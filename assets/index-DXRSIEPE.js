(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();const ds=!1;var Lt=Array.isArray,li=Array.prototype.indexOf,Nt=Array.from,ai=Object.defineProperty,_e=Object.getOwnPropertyDescriptor,ui=Object.getOwnPropertyDescriptors,hi=Object.prototype,fi=Array.prototype,Ps=Object.getPrototypeOf,ps=Object.isExtensible;function $e(s){return typeof s=="function"}const wt=()=>{};function Ss(s){for(var e=0;e<s.length;e++)s[e]()}const G=2,zs=4,yt=8,Vt=16,se=32,Ie=64,ot=128,N=256,lt=512,q=1024,Q=2048,we=4096,J=8192,xt=16384,ci=32768,Xe=65536,Is=1<<19,Cs=1<<20,Ft=1<<21,Re=Symbol("$state"),di=Symbol("legacy props"),pi=Symbol("");function ks(s){return s===this.v}function vi(s,e){return s!=s?e==e:s!==e||s!==null&&typeof s=="object"||typeof s=="function"}function Es(s){return!vi(s,this.v)}function _i(s){throw new Error("https://svelte.dev/e/effect_in_teardown")}function mi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function gi(s){throw new Error("https://svelte.dev/e/effect_orphan")}function wi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function yi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function xi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function bi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ke=!1,Mi=!1;function Ti(){Ke=!0}const Ht=1,Wt=2,As=4,Pi=8,Si=16,zi=1,Ii=2,D=Symbol(),Ci="http://www.w3.org/1999/xhtml";function Ut(s){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let x=null;function vs(s){x=s}function ki(s){return $s().get(s)}function Ei(s,e){return $s().set(s,e),e}function ue(s,e=!1,t){var i=x={p:x,c:null,d:!1,e:null,m:!1,s,x:null,l:null};Ke&&!e&&(x.l={s:null,u:null,r1:[],r2:He(!1)}),Ni(()=>{i.d=!0})}function he(s){const e=x;if(e!==null){const o=e.e;if(o!==null){var t=P,i=T;e.e=null;try{for(var n=0;n<o.length;n++){var r=o[n];Pe(r.effect),ae(r.reaction),Yt(r.fn)}}finally{Pe(t),ae(i)}}x=e.p,e.m=!0}return{}}function bt(){return!Ke||x!==null&&x.l===null}function $s(s){return x===null&&Ut(),x.c??(x.c=new Map(Ai(x)||void 0))}function Ai(s){let e=s.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}function Z(s){if(typeof s!="object"||s===null||Re in s)return s;const e=Ps(s);if(e!==hi&&e!==fi)return s;var t=new Map,i=Lt(s),n=W(0),r=T,o=u=>{var a=T;ae(r);var l=u();return ae(a),l};return i&&t.set("length",W(s.length)),new Proxy(s,{defineProperty(u,a,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&yi();var c=t.get(a);return c===void 0?(c=o(()=>W(l.value)),t.set(a,c)):O(c,o(()=>Z(l.value))),!0},deleteProperty(u,a){var l=t.get(a);if(l===void 0)a in u&&(t.set(a,o(()=>W(D))),Ct(n));else{if(i&&typeof a=="string"){var c=t.get("length"),f=Number(a);Number.isInteger(f)&&f<c.v&&O(c,f)}O(l,D),Ct(n)}return!0},get(u,a,l){var p;if(a===Re)return s;var c=t.get(a),f=a in u;if(c===void 0&&(!f||(p=_e(u,a))!=null&&p.writable)&&(c=o(()=>W(Z(f?u[a]:D))),t.set(a,c)),c!==void 0){var d=z(c);return d===D?void 0:d}return Reflect.get(u,a,l)},getOwnPropertyDescriptor(u,a){var l=Reflect.getOwnPropertyDescriptor(u,a);if(l&&"value"in l){var c=t.get(a);c&&(l.value=z(c))}else if(l===void 0){var f=t.get(a),d=f==null?void 0:f.v;if(f!==void 0&&d!==D)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return l},has(u,a){var d;if(a===Re)return!0;var l=t.get(a),c=l!==void 0&&l.v!==D||Reflect.has(u,a);if(l!==void 0||P!==null&&(!c||(d=_e(u,a))!=null&&d.writable)){l===void 0&&(l=o(()=>W(c?Z(u[a]):D)),t.set(a,l));var f=z(l);if(f===D)return!1}return c},set(u,a,l,c){var F;var f=t.get(a),d=a in u;if(i&&a==="length")for(var p=l;p<f.v;p+=1){var v=t.get(p+"");v!==void 0?O(v,D):p in u&&(v=o(()=>W(D)),t.set(p+"",v))}f===void 0?(!d||(F=_e(u,a))!=null&&F.writable)&&(f=o(()=>W(void 0)),O(f,o(()=>Z(l))),t.set(a,f)):(d=f.v!==D,O(f,o(()=>Z(l))));var y=Reflect.getOwnPropertyDescriptor(u,a);if(y!=null&&y.set&&y.set.call(c,l),!d){if(i&&typeof a=="string"){var C=t.get("length"),b=Number(a);Number.isInteger(b)&&b>=C.v&&O(C,b+1)}Ct(n)}return!0},ownKeys(u){z(n);var a=Reflect.ownKeys(u).filter(f=>{var d=t.get(f);return d===void 0||d.v!==D});for(var[l,c]of t)c.v!==D&&!(l in u)&&a.push(l);return a},setPrototypeOf(){xi()}})}function Ct(s,e=1){O(s,s.v+e)}function Gt(s){var e=G|Q,t=T!==null&&(T.f&G)!==0?T:null;return P===null||t!==null&&(t.f&N)!==0?e|=N:P.f|=Cs,{ctx:x,deps:null,effects:null,equals:ks,f:e,fn:s,reactions:null,rv:0,v:null,wv:0,parent:t??P}}function kt(s){const e=Gt(s);return Qs(e),e}function $i(s){const e=Gt(s);return e.equals=Es,e}function Bs(s){var e=s.effects;if(e!==null){s.effects=null;for(var t=0;t<e.length;t+=1)te(e[t])}}function Bi(s){for(var e=s.parent;e!==null;){if((e.f&G)===0)return e;e=e.parent}return null}function Fs(s){var e,t=P;Pe(Bi(s));try{Bs(s),e=ei(s)}finally{Pe(t)}return e}function Ds(s){var e=Fs(s),t=(oe||(s.f&N)!==0)&&s.deps!==null?we:q;Y(s,t),s.equals(e)||(s.v=e,s.wv=Js())}const Ve=new Map;function He(s,e){var t={f:0,v:s,reactions:null,equals:ks,rv:0,wv:0};return t}function W(s,e){const t=He(s);return Qs(t),t}function Fi(s,e=!1){var i;const t=He(s);return e||(t.equals=Es),Ke&&x!==null&&x.l!==null&&((i=x.l).s??(i.s=[])).push(t),t}function O(s,e,t=!1){T!==null&&!K&&bt()&&(T.f&(G|Vt))!==0&&!(B!=null&&B.includes(s))&&bi();let i=t?Z(e):e;return Dt(s,i)}function Dt(s,e){if(!s.equals(e)){var t=s.v;Je?Ve.set(s,e):Ve.set(s,t),s.v=e,(s.f&G)!==0&&((s.f&Q)!==0&&Fs(s),Y(s,(s.f&N)===0?q:we)),s.wv=Js(),Os(s,Q),bt()&&P!==null&&(P.f&q)!==0&&(P.f&(se|Ie))===0&&(H===null?Xi([s]):H.push(s))}return e}function Os(s,e){var t=s.reactions;if(t!==null)for(var i=bt(),n=t.length,r=0;r<n;r++){var o=t[r],u=o.f;(u&Q)===0&&(!i&&o===P||(Y(o,e),(u&(q|N))!==0&&((u&G)!==0?Os(o,we):Pt(o))))}}let Di=!1;var _s,qs,Rs,Ls,Ns;function Oi(){if(_s===void 0){_s=window,qs=document,Rs=/Firefox/.test(navigator.userAgent);var s=Element.prototype,e=Node.prototype,t=Text.prototype;Ls=_e(e,"firstChild").get,Ns=_e(e,"nextSibling").get,ps(s)&&(s.__click=void 0,s.__className=void 0,s.__attributes=null,s.__style=void 0,s.__e=void 0),ps(t)&&(t.__t=void 0)}}function Qe(s=""){return document.createTextNode(s)}function at(s){return Ls.call(s)}function Mt(s){return Ns.call(s)}function I(s,e){return at(s)}function Ze(s,e){{var t=at(s);return t instanceof Comment&&t.data===""?Mt(t):t}}function S(s,e=1,t=!1){let i=s;for(;e--;)i=Mt(i);return i}function qi(s){s.textContent=""}function Ri(s){P===null&&T===null&&gi(),T!==null&&(T.f&N)!==0&&P===null&&mi(),Je&&_i()}function Li(s,e){var t=e.last;t===null?e.last=e.first=s:(t.next=s,s.prev=t,e.last=s)}function Ce(s,e,t,i=!0){var n=P,r={ctx:x,deps:null,nodes_start:null,nodes_end:null,f:s|Q,first:null,fn:e,last:null,next:null,parent:n,prev:null,teardown:null,transitions:null,wv:0};if(t)try{Kt(r),r.f|=ci}catch(a){throw te(r),a}else e!==null&&Pt(r);var o=t&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&(Cs|ot))===0;if(!o&&i&&(n!==null&&Li(r,n),T!==null&&(T.f&G)!==0)){var u=T;(u.effects??(u.effects=[])).push(r)}return r}function Ni(s){const e=Ce(yt,null,!1);return Y(e,q),e.teardown=s,e}function Vs(s){Ri();var e=P!==null&&(P.f&se)!==0&&x!==null&&!x.m;if(e){var t=x;(t.e??(t.e=[])).push({fn:s,effect:P,reaction:T})}else{var i=Yt(s);return i}}function Vi(s){const e=Ce(Ie,s,!0);return(t={})=>new Promise(i=>{t.outro?We(e,()=>{te(e),i(void 0)}):(te(e),i(void 0))})}function Yt(s){return Ce(zs,s,!1)}function Hi(s){return Ce(yt,s,!0)}function le(s,e=[],t=Gt){const i=e.map(t);return ke(()=>s(...i.map(z)))}function ke(s,e=0){return Ce(yt|Vt|e,s,!0)}function ge(s,e=!0){return Ce(yt|se,s,!0,e)}function Hs(s){var e=s.teardown;if(e!==null){const t=Je,i=T;ms(!0),ae(null);try{e.call(null)}finally{ms(t),ae(i)}}}function Ws(s,e=!1){var t=s.first;for(s.first=s.last=null;t!==null;){var i=t.next;(t.f&Ie)!==0?t.parent=null:te(t,e),t=i}}function Wi(s){for(var e=s.first;e!==null;){var t=e.next;(e.f&se)===0&&te(e),e=t}}function te(s,e=!0){var t=!1;(e||(s.f&Is)!==0)&&s.nodes_start!==null&&(Ui(s.nodes_start,s.nodes_end),t=!0),Ws(s,e&&!t),dt(s,0),Y(s,xt);var i=s.transitions;if(i!==null)for(const r of i)r.stop();Hs(s);var n=s.parent;n!==null&&n.first!==null&&Us(s),s.next=s.prev=s.teardown=s.ctx=s.deps=s.fn=s.nodes_start=s.nodes_end=null}function Ui(s,e){for(;s!==null;){var t=s===e?null:Mt(s);s.remove(),s=t}}function Us(s){var e=s.parent,t=s.prev,i=s.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),e!==null&&(e.first===s&&(e.first=i),e.last===s&&(e.last=t))}function We(s,e){var t=[];Xt(s,t,!0),Gs(t,()=>{te(s),e&&e()})}function Gs(s,e){var t=s.length;if(t>0){var i=()=>--t||e();for(var n of s)n.out(i)}else e()}function Xt(s,e,t){if((s.f&J)===0){if(s.f^=J,s.transitions!==null)for(const o of s.transitions)(o.is_global||t)&&e.push(o);for(var i=s.first;i!==null;){var n=i.next,r=(i.f&Xe)!==0||(i.f&se)!==0;Xt(i,e,r?t:!1),i=n}}}function ut(s){Ys(s,!0)}function Ys(s,e){if((s.f&J)!==0){s.f^=J,(s.f&q)===0&&(s.f^=q),je(s)&&(Y(s,Q),Pt(s));for(var t=s.first;t!==null;){var i=t.next,n=(t.f&Xe)!==0||(t.f&se)!==0;Ys(t,n?e:!1),t=i}if(s.transitions!==null)for(const r of s.transitions)(r.is_global||e)&&r.in()}}let Ue=[],Ot=[];function Xs(){var s=Ue;Ue=[],Ss(s)}function Gi(){var s=Ot;Ot=[],Ss(s)}function Ks(s){Ue.length===0&&queueMicrotask(Xs),Ue.push(s)}function Yi(){Ue.length>0&&Xs(),Ot.length>0&&Gi()}let it=!1,ht=!1,ft=null,me=!1,Je=!1;function ms(s){Je=s}let Le=[];let T=null,K=!1;function ae(s){T=s}let P=null;function Pe(s){P=s}let B=null;function Qs(s){T!==null&&T.f&Ft&&(B===null?B=[s]:B.push(s))}let A=null,L=0,H=null;function Xi(s){H=s}let Zs=1,ct=0,oe=!1;function Js(){return++Zs}function je(s){var f;var e=s.f;if((e&Q)!==0)return!0;if((e&we)!==0){var t=s.deps,i=(e&N)!==0;if(t!==null){var n,r,o=(e&lt)!==0,u=i&&P!==null&&!oe,a=t.length;if(o||u){var l=s,c=l.parent;for(n=0;n<a;n++)r=t[n],(o||!((f=r==null?void 0:r.reactions)!=null&&f.includes(l)))&&(r.reactions??(r.reactions=[])).push(l);o&&(l.f^=lt),u&&c!==null&&(c.f&N)===0&&(l.f^=N)}for(n=0;n<a;n++)if(r=t[n],je(r)&&Ds(r),r.wv>s.wv)return!0}(!i||P!==null&&!oe)&&Y(s,q)}return!1}function Ki(s,e){for(var t=e;t!==null;){if((t.f&ot)!==0)try{t.fn(s);return}catch{t.f^=ot}t=t.parent}throw it=!1,s}function gs(s){return(s.f&xt)===0&&(s.parent===null||(s.parent.f&ot)===0)}function Tt(s,e,t,i){if(it){if(t===null&&(it=!1),gs(e))throw s;return}if(t!==null&&(it=!0),Ki(s,e),gs(e))throw s}function js(s,e,t=!0){var i=s.reactions;if(i!==null)for(var n=0;n<i.length;n++){var r=i[n];B!=null&&B.includes(s)||((r.f&G)!==0?js(r,e,!1):e===r&&(t?Y(r,Q):(r.f&q)!==0&&Y(r,we),Pt(r)))}}function ei(s){var p;var e=A,t=L,i=H,n=T,r=oe,o=B,u=x,a=K,l=s.f;A=null,L=0,H=null,oe=(l&N)!==0&&(K||!me||T===null),T=(l&(se|Ie))===0?s:null,B=null,vs(s.ctx),K=!1,ct++,s.f|=Ft;try{var c=(0,s.fn)(),f=s.deps;if(A!==null){var d;if(dt(s,L),f!==null&&L>0)for(f.length=L+A.length,d=0;d<A.length;d++)f[L+d]=A[d];else s.deps=f=A;if(!oe)for(d=L;d<f.length;d++)((p=f[d]).reactions??(p.reactions=[])).push(s)}else f!==null&&L<f.length&&(dt(s,L),f.length=L);if(bt()&&H!==null&&!K&&f!==null&&(s.f&(G|we|Q))===0)for(d=0;d<H.length;d++)js(H[d],s);return n!==null&&n!==s&&(ct++,H!==null&&(i===null?i=H:i.push(...H))),c}finally{A=e,L=t,H=i,T=n,oe=r,B=o,vs(u),K=a,s.f^=Ft}}function Qi(s,e){let t=e.reactions;if(t!==null){var i=li.call(t,s);if(i!==-1){var n=t.length-1;n===0?t=e.reactions=null:(t[i]=t[n],t.pop())}}t===null&&(e.f&G)!==0&&(A===null||!A.includes(e))&&(Y(e,we),(e.f&(N|lt))===0&&(e.f^=lt),Bs(e),dt(e,0))}function dt(s,e){var t=s.deps;if(t!==null)for(var i=e;i<t.length;i++)Qi(s,t[i])}function Kt(s){var e=s.f;if((e&xt)===0){Y(s,q);var t=P,i=x,n=me;P=s,me=!0;try{(e&Vt)!==0?Wi(s):Ws(s),Hs(s);var r=ei(s);s.teardown=typeof r=="function"?r:null,s.wv=Zs;var o=s.deps,u;ds&&Mi&&s.f&Q}catch(a){Tt(a,s,t,i||s.ctx)}finally{me=n,P=t}}}function Zi(){try{wi()}catch(s){if(ft!==null)Tt(s,ft,null);else throw s}}function ti(){var s=me;try{var e=0;for(me=!0;Le.length>0;){e++>1e3&&Zi();var t=Le,i=t.length;Le=[];for(var n=0;n<i;n++){var r=ji(t[n]);Ji(r)}Ve.clear()}}finally{ht=!1,me=s,ft=null}}function Ji(s){var e=s.length;if(e!==0)for(var t=0;t<e;t++){var i=s[t];if((i.f&(xt|J))===0)try{je(i)&&(Kt(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Us(i):i.fn=null))}catch(n){Tt(n,i,null,i.ctx)}}}function Pt(s){ht||(ht=!0,queueMicrotask(ti));for(var e=ft=s;e.parent!==null;){e=e.parent;var t=e.f;if((t&(Ie|se))!==0){if((t&q)===0)return;e.f^=q}}Le.push(e)}function ji(s){for(var e=[],t=s;t!==null;){var i=t.f,n=(i&(se|Ie))!==0,r=n&&(i&q)!==0;if(!r&&(i&J)===0){if((i&zs)!==0)e.push(t);else if(n)t.f^=q;else try{je(t)&&Kt(t)}catch(a){Tt(a,t,null,t.ctx)}var o=t.first;if(o!==null){t=o;continue}}var u=t.parent;for(t=t.next;t===null&&u!==null;)t=u.next,u=u.parent}return e}function en(s){for(var e;;){if(Yi(),Le.length===0)return e;ht=!0,ti()}}async function tn(){await Promise.resolve(),en()}function z(s){var e=s.f,t=(e&G)!==0;if(T!==null&&!K){if(!(B!=null&&B.includes(s))){var i=T.deps;s.rv<ct&&(s.rv=ct,A===null&&i!==null&&i[L]===s?L++:A===null?A=[s]:(!oe||!A.includes(s))&&A.push(s))}}else if(t&&s.deps===null&&s.effects===null){var n=s,r=n.parent;r!==null&&(r.f&N)===0&&(n.f^=N)}return t&&(n=s,je(n)&&Ds(n)),Je&&Ve.has(s)?Ve.get(s):s.v}function Qt(s){var e=K;try{return K=!0,s()}finally{K=e}}const sn=-7169;function Y(s,e){s.f=s.f&sn|e}const nn=["touchstart","touchmove"];function rn(s){return nn.includes(s)}const si=new Set,qt=new Set;function Zt(s){for(var e=0;e<s.length;e++)si.add(s[e]);for(var t of qt)t(s)}function st(s){var F;var e=this,t=e.ownerDocument,i=s.type,n=((F=s.composedPath)==null?void 0:F.call(s))||[],r=n[0]||s.target,o=0,u=s.__root;if(u){var a=n.indexOf(u);if(a!==-1&&(e===document||e===window)){s.__root=e;return}var l=n.indexOf(e);if(l===-1)return;a<=l&&(o=a)}if(r=n[o]||s.target,r!==e){ai(s,"currentTarget",{configurable:!0,get(){return r||t}});var c=T,f=P;ae(null),Pe(null);try{for(var d,p=[];r!==null;){var v=r.assignedSlot||r.parentNode||r.host||null;try{var y=r["__"+i];if(y!=null&&(!r.disabled||s.target===r))if(Lt(y)){var[C,...b]=y;C.apply(r,[s,...b])}else y.call(r,s)}catch(M){d?p.push(M):d=M}if(s.cancelBubble||v===e||v===null)break;r=v}if(d){for(let M of p)queueMicrotask(()=>{throw M});throw d}}finally{s.__root=e,delete s.currentTarget,ae(c),Pe(f)}}}function on(s){var e;e=document.head.appendChild(Qe());try{ke(()=>s(e),Is)}finally{}}function ln(s){var e=document.createElement("template");return e.innerHTML=s,e.content}function pt(s,e){var t=P;t.nodes_start===null&&(t.nodes_start=s,t.nodes_end=e)}function R(s,e){var t=(e&zi)!==0,i=(e&Ii)!==0,n,r=!s.startsWith("<!>");return()=>{n===void 0&&(n=ln(r?s:"<!>"+s),t||(n=at(n)));var o=i||Rs?document.importNode(n,!0):n.cloneNode(!0);if(t){var u=at(o),a=o.lastChild;pt(u,a)}else pt(o,o);return o}}function E(s=""){{var e=Qe(s+"");return pt(e,e),e}}function Jt(){var s=document.createDocumentFragment(),e=document.createComment(""),t=Qe();return s.append(e,t),pt(e,t),s}function g(s,e){s!==null&&s.before(e)}function Ge(s,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(s.__t??(s.__t=s.nodeValue))&&(s.__t=t,s.nodeValue=t+"")}function an(s,e){return un(s,e)}const ye=new Map;function un(s,{target:e,anchor:t,props:i={},events:n,context:r,intro:o=!0}){Oi();var u=new Set,a=f=>{for(var d=0;d<f.length;d++){var p=f[d];if(!u.has(p)){u.add(p);var v=rn(p);e.addEventListener(p,st,{passive:v});var y=ye.get(p);y===void 0?(document.addEventListener(p,st,{passive:v}),ye.set(p,1)):ye.set(p,y+1)}}};a(Nt(si)),qt.add(a);var l=void 0,c=Vi(()=>{var f=t??e.appendChild(Qe());return ge(()=>{if(r){ue({});var d=x;d.c=r}n&&(i.$$events=n),l=s(f,i)||{},r&&he()}),()=>{var v;for(var d of u){e.removeEventListener(d,st);var p=ye.get(d);--p===0?(document.removeEventListener(d,st),ye.delete(d)):ye.set(d,p)}qt.delete(a),f!==t&&((v=f.parentNode)==null||v.removeChild(f))}});return hn.set(l,c),l}let hn=new WeakMap;function jt(s,e,[t,i]=[0,0]){var n=s,r=null,o=null,u=D,a=t>0?Xe:0,l=!1;const c=(d,p=!0)=>{l=!0,f(p,d)},f=(d,p)=>{u!==(u=d)&&(u?(r?ut(r):p&&(r=ge(()=>p(n))),o&&We(o,()=>{o=null})):(o?ut(o):p&&(o=ge(()=>p(n,[t+1,i]))),r&&We(r,()=>{r=null})))};ke(()=>{l=!1,e(c),l||f(null,null)},a)}function es(s,e){return e}function fn(s,e,t,i){for(var n=[],r=e.length,o=0;o<r;o++)Xt(e[o].e,n,!0);var u=r>0&&n.length===0&&t!==null;if(u){var a=t.parentNode;qi(a),a.append(t),i.clear(),re(s,e[0].prev,e[r-1].next)}Gs(n,()=>{for(var l=0;l<r;l++){var c=e[l];u||(i.delete(c.k),re(s,c.prev,c.next)),te(c.e,!u)}})}function ts(s,e,t,i,n,r=null){var o=s,u={flags:e,items:new Map,first:null},a=(e&As)!==0;if(a){var l=s;o=l.appendChild(Qe())}var c=null,f=!1,d=$i(()=>{var p=t();return Lt(p)?p:p==null?[]:Nt(p)});ke(()=>{var p=z(d),v=p.length;f&&v===0||(f=v===0,cn(p,u,o,n,e,i,t),r!==null&&(v===0?c?ut(c):c=ge(()=>r(o)):c!==null&&We(c,()=>{c=null})),z(d))})}function cn(s,e,t,i,n,r,o){var as,us,hs,fs;var u=(n&Pi)!==0,a=(n&(Ht|Wt))!==0,l=s.length,c=e.items,f=e.first,d=f,p,v=null,y,C=[],b=[],F,M,m,k;if(u)for(k=0;k<l;k+=1)F=s[k],M=r(F,k),m=c.get(M),m!==void 0&&((as=m.a)==null||as.measure(),(y??(y=new Set)).add(m));for(k=0;k<l;k+=1){if(F=s[k],M=r(F,k),m=c.get(M),m===void 0){var ri=d?d.e.nodes_start:t;v=pn(ri,e,v,v===null?e.first:v.next,F,M,k,i,n,o),c.set(M,v),C=[],b=[],d=v.next;continue}if(a&&dn(m,F,k,n),(m.e.f&J)!==0&&(ut(m.e),u&&((us=m.a)==null||us.unfix(),(y??(y=new Set)).delete(m))),m!==d){if(p!==void 0&&p.has(m)){if(C.length<b.length){var tt=b[0],ne;v=tt.prev;var ls=C[0],zt=C[C.length-1];for(ne=0;ne<C.length;ne+=1)ws(C[ne],tt,t);for(ne=0;ne<b.length;ne+=1)p.delete(b[ne]);re(e,ls.prev,zt.next),re(e,v,ls),re(e,zt,tt),d=tt,v=zt,k-=1,C=[],b=[]}else p.delete(m),ws(m,d,t),re(e,m.prev,m.next),re(e,m,v===null?e.first:v.next),re(e,v,m),v=m;continue}for(C=[],b=[];d!==null&&d.k!==M;)(d.e.f&J)===0&&(p??(p=new Set)).add(d),b.push(d),d=d.next;if(d===null)continue;m=d}C.push(m),v=m,d=m.next}if(d!==null||p!==void 0){for(var Ae=p===void 0?[]:Nt(p);d!==null;)(d.e.f&J)===0&&Ae.push(d),d=d.next;var It=Ae.length;if(It>0){var oi=(n&As)!==0&&l===0?t:null;if(u){for(k=0;k<It;k+=1)(hs=Ae[k].a)==null||hs.measure();for(k=0;k<It;k+=1)(fs=Ae[k].a)==null||fs.fix()}fn(e,Ae,oi,c)}}u&&Ks(()=>{var cs;if(y!==void 0)for(m of y)(cs=m.a)==null||cs.apply()}),P.first=e.first&&e.first.e,P.last=v&&v.e}function dn(s,e,t,i){(i&Ht)!==0&&Dt(s.v,e),(i&Wt)!==0?Dt(s.i,t):s.i=t}function pn(s,e,t,i,n,r,o,u,a,l){var c=(a&Ht)!==0,f=(a&Si)===0,d=c?f?Fi(n):He(n):n,p=(a&Wt)===0?o:He(o),v={i:p,v:d,k:r,a:null,e:null,prev:t,next:i};try{return v.e=ge(()=>u(s,d,p,l),Di),v.e.prev=t&&t.e,v.e.next=i&&i.e,t===null?e.first=v:(t.next=v,t.e.next=v.e),i!==null&&(i.prev=v,i.e.prev=v.e),v}finally{}}function ws(s,e,t){for(var i=s.next?s.next.e.nodes_start:t,n=e?e.e.nodes_start:t,r=s.e.nodes_start;r!==i;){var o=Mt(r);n.before(r),r=o}}function re(s,e,t){e===null?s.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function St(s,e,...t){var i=s,n=wt,r;ke(()=>{n!==(n=e())&&(r&&(te(r),r=null),r=ge(()=>n(i,...t)))},Xe)}function vn(s,e,t){var i=s,n,r;ke(()=>{n!==(n=e())&&(r&&(We(r),r=null),n&&(r=ge(()=>t(i,n))))},Xe)}const ys=[...` 	
\r\f \v\uFEFF`];function _n(s,e,t){var i=s==null?"":""+s;if(e&&(i=i?i+" "+e:e),t){for(var n in t)if(t[n])i=i?i+" "+n:n;else if(i.length)for(var r=n.length,o=0;(o=i.indexOf(n,o))>=0;){var u=o+r;(o===0||ys.includes(i[o-1]))&&(u===i.length||ys.includes(i[u]))?i=(o===0?"":i.substring(0,o))+i.substring(u+1):o=u}}return i===""?null:i}function mn(s,e){return s==null?null:String(s)}function ss(s,e,t,i,n,r){var o=s.__className;if(o!==t||o===void 0){var u=_n(t,i,r);u==null?s.removeAttribute("class"):s.className=u,s.__className=t}else if(r&&n!==r)for(var a in r){var l=!!r[a];(n==null||l!==!!n[a])&&s.classList.toggle(a,l)}return r}function ii(s,e,t,i){var n=s.__style;if(n!==e){var r=mn(e);r==null?s.removeAttribute("style"):s.style.cssText=r,s.__style=e}return i}const gn=Symbol("is custom element"),wn=Symbol("is html");function Ne(s,e,t,i){var n=yn(s);n[e]!==(n[e]=t)&&(e==="loading"&&(s[pi]=t),t==null?s.removeAttribute(e):typeof t!="string"&&xn(s).includes(e)?s[e]=t:s.setAttribute(e,t))}function yn(s){return s.__attributes??(s.__attributes={[gn]:s.nodeName.includes("-"),[wn]:s.namespaceURI===Ci})}var xs=new Map;function xn(s){var e=xs.get(s.nodeName);if(e)return e;xs.set(s.nodeName,e=[]);for(var t,i=s,n=Element.prototype;n!==i;){t=ui(i);for(var r in t)t[r].set&&e.push(r);i=Ps(i)}return e}function bs(s,e){return s===e||(s==null?void 0:s[Re])===e}function nt(s={},e,t,i){return Yt(()=>{var n,r;return Hi(()=>{n=r,r=[],Qt(()=>{s!==t(...r)&&(e(s,...r),n&&bs(t(...n),s)&&e(null,...n))})}),()=>{Ks(()=>{r&&bs(t(...r),s)&&e(null,...r)})}}),s}const bn={get(s,e){let t=s.props.length;for(;t--;){let i=s.props[t];if($e(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i)return i[e]}},set(s,e,t){let i=s.props.length;for(;i--;){let n=s.props[i];$e(n)&&(n=n());const r=_e(n,e);if(r&&r.set)return r.set(t),!0}return!1},getOwnPropertyDescriptor(s,e){let t=s.props.length;for(;t--;){let i=s.props[t];if($e(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i){const n=_e(i,e);return n&&!n.configurable&&(n.configurable=!0),n}}},has(s,e){if(e===Re||e===di)return!1;for(let t of s.props)if($e(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(s){const e=[];for(let t of s.props)if($e(t)&&(t=t()),!!t){for(const i in t)e.includes(i)||e.push(i);for(const i of Object.getOwnPropertySymbols(t))e.includes(i)||e.push(i)}return e}};function Mn(...s){return new Proxy({props:s},bn)}function ve(s,e,t,i){var n;n=s[e];var r=i,o=!0,u=()=>(o&&(o=!1,r=i),r);n===void 0&&i!==void 0&&(n=u());var a;return a=()=>{var l=s[e];return l===void 0?u():(o=!0,l)},a}function is(s){x===null&&Ut(),Ke&&x.l!==null?Pn(x).m.push(s):Vs(()=>{const e=Qt(s);if(typeof e=="function")return e})}function Tn(s){x===null&&Ut(),is(()=>()=>Qt(s))}function Pn(s){var e=s.l;return e.u??(e.u={a:[],b:[],m:[]})}const Sn="5";var Ts;typeof window<"u"&&((Ts=window.__svelte??(window.__svelte={})).v??(Ts.v=new Set)).add(Sn);Ti();var zn=R('<a target="_blank" rel="noopener noreferrer" class="svelte-o5z3n1"> </a>'),In=R('<section class="page svelte-o5z3n1" id="current-page"><span class="title svelte-o5z3n1"> <!></span> <!></section>');function Ee(s,e){ue(e,!0);let t=ve(e,"title",3,"Some Page"),i=ve(e,"style",3,""),n=ve(e,"extra",3,null);var r=In(),o=I(r),u=I(o),a=S(u);{var l=f=>{var d=zn(),p=I(d);le(()=>{Ne(d,"href",n().href),Ge(p,n().title)}),g(f,d)};jt(a,f=>{n()&&f(l)})}var c=S(o,2);St(c,()=>e.children??wt),le(()=>{ii(r,i()),Ge(u,`${t()??""} `)}),g(s,r),he()}var Cn=R(`<div class="background svelte-ak2wnz"><div class="circles svelte-ak2wnz"><div class="circle svelte-ak2wnz"></div> <div class="circle svelte-ak2wnz"></div> <div class="circle svelte-ak2wnz"></div> <div class="circle svelte-ak2wnz"></div> <div class="circle svelte-ak2wnz"></div> <div class="circle svelte-ak2wnz"></div></div> <div class="block svelte-ak2wnz"><p class="svelte-ak2wnz">This site is a living showcase for the <!> <b class="svelte-ak2wnz">“Emergent Animation Systems: From Interpolation to Procedural Motion”</b>. Here, you'll find interactive examples and visual experiments that reveal how simple rules can create surprisingly complex and lifelike movement.</p> <p class="svelte-ak2wnz">Animation isn't just about cartoons or CGI, every moving graphic, from UI transitions to flocking birds, is built on simple algorithms. This project explores a spectrum of techniques: from basic interpolation and keyframes, through physics-based and noise-driven motion, to emergent behaviors like flocking and cellular automata.</p> <p class="svelte-ak2wnz">Each example is designed to be both educational and hands-on. You can inspect the code, tweak parameters, and see how mathematical ideas translate into dynamic visuals. The goal: to bridge theory and practice, and to show that complexity can arise from the simplest systems.</p> <p class="svelte-ak2wnz">Whether you're a developer, designer, or just curious, dive into the examples <!> and discover how simple code can create motion that feels alive.</p></div></div>`);function kn(s){Ee(s,{title:"Home",style:"display: flex; flex-direction: column;",children:(e,t)=>{var i=Cn(),n=S(I(i),2),r=I(n),o=S(I(r));$(o,{href:"/thesis",children:(l,c)=>{var f=E("thesis");g(l,f)},$$slots:{default:!0}});var u=S(r,6),a=S(I(u));$(a,{href:"/examples",children:(l,c)=>{var f=E("here");g(l,f)},$$slots:{default:!0}}),g(e,i)},$$slots:{default:!0}})}var En=R("<p>Page not found.</p>");function An(s){Ee(s,{title:"Error 404",children:(e,t)=>{var i=En();g(e,i)},$$slots:{default:!0}})}var $n=R('<iframe frameborder="0" title="Thesis PDF" class="svelte-gqw2wc"></iframe>');function Bn(s){const e=`${et}/main.pdf`;Ee(s,{title:"Thesis",extra:{href:e,title:"Open in a new page →"},children:(t,i)=>{var n=$n();Ne(n,"src",e),g(t,n)},$$slots:{default:!0}})}var Fn=R("<h3>What is this?</h3> <p>Emergent Animation Systems is a research & demo project. <br> The work ties an academic write-up to interactive web examples so you can both read the theory and experiment with the code.</p> <h3>What can I find here?</h3> <ul><li><!> - functional animations, procedural walkers, boids, cellular automata and more.</li> <li><!> - the LaTeX document that explains the algorithms and design choices.</li> <li><!> - explore the full codebase and examples.</li></ul> <h3>About the author</h3> <p>Konrád Soma Kiss - BSc Student in Computer Engineering (<!>)</p> <h3>Tools & tech</h3> <ul><li>Web demo: Svelte + TypeScript + Vite (with Deno)</li> <li>Rendering: HTML5 Canvas (custom scene & object system)</li> <li>Thesis: LaTeX</li></ul> <h3>Contact & contributions</h3> <p>If you'd like to suggest an example, report a bug, or contribute, open an issue or a pull request on the <!>.</p>",1);function Dn(s){Ee(s,{title:"About",children:(e,t)=>{var i=Fn(),n=S(Ze(i),6),r=I(n),o=I(r);$(o,{href:"/examples",children:(y,C)=>{var b=E("Interactive examples");g(y,b)},$$slots:{default:!0}});var u=S(r,2),a=I(u);$(a,{href:"/main.pdf",target:"_blank",children:(y,C)=>{var b=E("Thesis PDF");g(y,b)},$$slots:{default:!0}});var l=S(u,2),c=I(l);$(c,{href:"https://github.com/KissKonradUni/emergent-animations",target:"_blank",rel:"noopener",children:(y,C)=>{var b=E("Source on GitHub");g(y,b)},$$slots:{default:!0}});var f=S(n,4),d=S(I(f));$(d,{href:"https://konrads.hu",target:"_blank",children:(y,C)=>{var b=E("Website");g(y,b)},$$slots:{default:!0}});var p=S(f,8),v=S(I(p));$(v,{href:"https://github.com/KissKonradUni/emergent-animations",target:"_blank",rel:"noopener",children:(y,C)=>{var b=E("GitHub repository");g(y,b)},$$slots:{default:!0}}),g(e,i)},$$slots:{default:!0}})}var On=R('<div class="list svelte-161iceo"></div>');function qn(s){Ee(s,{title:"Examples",children:(e,t)=>{var i=On();ts(i,5,()=>ni,es,(n,r)=>{$(n,{get href(){return z(r).href},cssClass:"example-menu-item",children:(o,u)=>{var a=E();le(()=>Ge(a,z(r).title)),g(o,a)},$$slots:{default:!0}})}),g(e,i)},$$slots:{default:!0}})}class h{constructor(e=0,t=0){this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}add(e){return new h(this.x+e.x,this.y+e.y)}addInPlace(e){return this.x+=e.x,this.y+=e.y,this}subtract(e){return new h(this.x-e.x,this.y-e.y)}subtractInPlace(e){return this.x-=e.x,this.y-=e.y,this}multiply(e){return new h(this.x*e,this.y*e)}multiplyInPlace(e){return this.x*=e,this.y*=e,this}scale(e){return new h(this.x*e.x,this.y*e.y)}lengthSquared(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.lengthSquared())}normalize(){const e=this.length();return e===0?new h(0,0):new h(this.x/e,this.y/e)}dot(e){return this.x*e.x+this.y*e.y}clone(){return new h(this.x,this.y)}static zero(){return new h(0,0)}static one(){return new h(1,1)}}const Me=class Me{constructor(e,t=h.zero(),i=new h(100,100),n=h.one(),r=new h(.5,.5),o=0,u=[]){this._parent=null,this._hasDefaultSize=!0,this.position=t,this.rotation=o,this._size=i,this._hasDefaultSize=i.x===100&&i.y===100,this.scale=n,this.pivot=r,this.renderFunction=e,this._children=u}get globalPosition(){if(this._parent===null)return this.position.clone();const e=this._parent.globalPosition,t=Math.sin(this._parent.rotation),i=Math.cos(this._parent.rotation),n=this.position.x*i-this.position.y*t,r=this.position.x*t+this.position.y*i;return new h(e.x+n*this._parent.scale.x,e.y+r*this._parent.scale.y)}get globalRotation(){return this._parent===null?this.rotation:this.rotation+this._parent.globalRotation}get size(){return this._size}set size(e){this._size=e,this._hasDefaultSize=!1}get parent(){return this._parent}append(...e){this._children.push(...e),e.forEach(t=>{t._parent=this})}get hasDefaultSize(){return this._hasDefaultSize}render(e,t=0){if(!(this._parent!==null&&t===0)){if(t>10){console.warn("CanvasObject: Maximum render depth exceeded, stopping rendering to prevent stack overflow.");return}if(e.save(),e.translate(this.position.x,this.position.y),e.scale(this.scale.x,this.scale.y),e.rotate(this.rotation),this.renderFunction(this,e),this._children.forEach(i=>{i.render(e,t+1)}),!Me.debugMode){e.restore();return}e.fillStyle="#00ff00",e.fillRect(-2,-2,4,4),e.strokeStyle="#0000ff",e.lineWidth=1,e.strokeRect(-this.size.x*this.pivot.x,-this.size.y*this.pivot.y,this.size.x,this.size.y),e.restore()}}createCopy(e){const t=new Me(this.renderFunction,this.position.clone(),this.size.clone(),this.scale.clone(),this.pivot.clone(),this.rotation);return e?t._children=this._children.map(i=>i.createCopy(!0)):t._children=[],t}static setDebugMode(e){Me.debugMode=e}};Me.debugMode=!1;let _=Me;class w{static ellipse(e,t=null){return(i,n)=>{n.beginPath(),n.ellipse(-i.size.x*(i.pivot.x-.5),-i.size.y*(i.pivot.y-.5),i.size.x/2,i.size.y/2,0,0,Math.PI*2),n.fillStyle=e,n.fill(),t&&(n.strokeStyle=t,n.stroke())}}static rectangle(e,t=null){return(i,n)=>{n.beginPath(),n.rect(-i.size.x*i.pivot.x,-i.size.y*i.pivot.y,i.size.x,i.size.y),n.fillStyle=e,n.fill(),t&&(n.strokeStyle=t,n.stroke())}}static roundedRectangle(e,t=null,i=10){return(n,r)=>{r.beginPath(),r.roundRect(-n.size.x*n.pivot.x,-n.size.y*n.pivot.y,n.size.x,n.size.y,i),r.fillStyle=e,r.fill(),t&&(r.strokeStyle=t,r.stroke())}}static line(e,t=1){return(i,n)=>{const r=h.one().subtract(i.pivot);n.beginPath(),n.moveTo(-i.size.x*i.pivot.x,-i.size.y*i.pivot.y),n.lineTo(i.size.x*r.x,i.size.y*r.y),n.strokeStyle=e,n.lineWidth=t,n.stroke()}}static image(e){return(t,i)=>{e.isLoaded()&&i.drawImage(e.getImage(),-t.size.x*t.pivot.x,-t.size.y*t.pivot.y,t.size.x,t.size.y)}}static sprite(e,t=()=>0){return(i,n)=>{if(!e.isLoaded())return;const r=t();e.drawFrame(n,r,-i.size.x*i.pivot.x,-i.size.y*i.pivot.y,i.size.x,i.size.y)}}static staticText(e,t="16px monospace, Consolas",i="#000",n="left",r="top",o=!1){return w.dynamicText(()=>e,t,i,n,r,o)}static dynamicText(e,t="16px monospace, Consolas",i="#000",n="left",r="top",o=!1){return(u,a)=>{u.hasDefaultSize&&(u.size=h.one());let l=[],c=0;o?(l=e().split(`
`),c=parseInt(t)):l=[e()];for(let f=0;f<l.length;f++)a.font=t,a.fillStyle=i,a.textAlign=n,a.textBaseline=r,a.fillText(l[f],0,c*f)}}static plotFunction(e,t,i={lower:-5,upper:5},n={lower:-5,upper:5},r=.1,o=()=>0,u=1){return(a,l)=>{const c=new h((a.pivot.x-.5)*a.size.x,(a.pivot.y-.5)*a.size.y),f=new h(-a.size.x/2-c.x,-a.size.y/2-c.y),d=1-i.upper/(i.upper-i.lower);if(d>=0&&d<=1){l.beginPath(),l.moveTo(f.x+a.size.x*d,f.y),l.lineTo(f.x+a.size.x*d,f.y+a.size.y),l.strokeStyle="#000",l.lineWidth=2,l.stroke(),l.font="16px monospace, Consolas",l.fillStyle="#000",l.textAlign="left",l.textBaseline="top",l.fillText(n.upper.toString(),f.x+a.size.x*d+5,f.y),l.textAlign="left",l.textBaseline="bottom",l.fillText(n.lower.toString(),f.x+a.size.x*d+5,f.y+a.size.y);for(let M=Math.ceil(n.lower);M<=Math.floor(n.upper);M+=u){if(M===0)continue;const m=f.y+a.size.y*(1-(M-n.lower)/(n.upper-n.lower));l.beginPath(),l.moveTo(f.x,m),l.lineTo(f.x+a.size.x,m),l.strokeStyle="#00000044",l.lineWidth=2,l.stroke()}}const p=n.upper/(n.upper-n.lower);if(p>=0&&p<=1){l.beginPath(),l.moveTo(f.x,f.y+a.size.y*p),l.lineTo(f.x+a.size.x,f.y+a.size.y*p),l.strokeStyle="#000",l.lineWidth=2,l.stroke(),l.fillStyle="#000",l.textAlign="left",l.textBaseline="top",l.fillText(i.lower.toString(),f.x,f.y+a.size.y*p+5),l.textAlign="right",l.textBaseline="top",l.fillText(i.upper.toString(),f.x+a.size.x,f.y+a.size.y*p+5);for(let M=Math.ceil(i.lower);M<=Math.floor(i.upper);M+=u){if(M===0)continue;const m=f.x+a.size.x*((M-i.lower)/(i.upper-i.lower));l.beginPath(),l.moveTo(m,f.y),l.lineTo(m,f.y+a.size.y),l.strokeStyle="#00000044",l.lineWidth=2,l.stroke()}}l.beginPath();const v=a.size.x/(i.upper-i.lower),y=a.size.y/(n.upper-n.lower);for(let M=i.lower;M<=i.upper;M+=r){const m=t(M);l.lineTo(f.x+(M-i.lower)*v,f.y+a.size.y-(m-n.lower)*y)}const C=t(i.upper);l.lineTo(f.x+(i.upper-i.lower)*v,f.y+a.size.y-(C-n.lower)*y),l.strokeStyle="#ff5722",l.lineWidth=4,l.stroke();const b=o(),F=t(b);d>=0&&d<=1&&(l.beginPath(),l.ellipse(f.x+a.size.x*d+b*v,f.y+a.size.y*p-F*y,5,5,0,0,Math.PI*2),l.fillStyle="#f00",l.strokeStyle="#fff",l.lineWidth=2,l.fill(),l.stroke()),l.font="20px monospace, Consolas",l.fillStyle="#fff",l.textAlign="center",l.textBaseline="bottom",l.fillText(e,f.x+a.size.x/2,f.y)}}static axes(e,t,i,n=!0){return(r,o)=>{const u=new h(r.pivot.x*r.size.x,r.pivot.y*r.size.y);o.save(),o.translate(-u.x,-u.y);const a=e.x<0&&e.y>0?-e.x/(e.y-e.x):0;let l=t.x<0&&t.y>0?-t.x/(t.y-t.x):0;n&&(l=1-l);const c=new h(r.size.x/(e.y-e.x)*i,r.size.y/(t.y-t.x)*i),f=a*r.size.x,d=l*r.size.y;o.strokeStyle="#00000088",o.lineWidth=1,o.beginPath();for(let p=Math.ceil(e.x/i)*c.x;p<=r.size.x-f+.1;p+=c.x)o.moveTo(p+f,0),o.lineTo(p+f,r.size.y);for(let p=Math.ceil(-t.y/i)*c.y;p<=r.size.y-d+.1;p+=c.y)o.moveTo(0,p+d),o.lineTo(r.size.x,p+d);o.stroke(),o.strokeStyle="#f00",o.fillStyle="#f00",o.lineWidth=2,o.beginPath(),o.moveTo(0,l*r.size.y),o.lineTo(r.size.x-20,l*r.size.y),o.stroke(),o.beginPath(),o.lineTo(r.size.x-20,l*r.size.y+5),o.lineTo(r.size.x-20,l*r.size.y-5),o.lineTo(r.size.x,l*r.size.y),o.fill(),o.font="16px monospace, Consolas",o.textAlign="left",o.textBaseline="top",o.fillText(e.x.toString(),5,l*r.size.y+5),o.textAlign="right",o.fillText(e.y.toString(),r.size.x-5,l*r.size.y+5),o.fillStyle="#fff",o.textAlign="left",o.textBaseline="bottom",o.fillText(`${Math.min(Math.max(e.x,0),e.y).toString()};${Math.min(Math.max(t.x,0),t.y).toString()}`,a*r.size.x+5,l*r.size.y-5),o.strokeStyle="#0f0",o.fillStyle="#0f0",o.beginPath(),n?(o.moveTo(a*r.size.x,r.size.y-20),o.lineTo(a*r.size.x,0),o.stroke(),o.beginPath(),o.lineTo(a*r.size.x+5,20),o.lineTo(a*r.size.x-5,20),o.lineTo(a*r.size.x,0)):(o.moveTo(a*r.size.x,0),o.lineTo(a*r.size.x,r.size.y-20),o.stroke(),o.beginPath(),o.lineTo(a*r.size.x+5,r.size.y-20),o.lineTo(a*r.size.x-5,r.size.y-20),o.lineTo(a*r.size.x,r.size.y)),o.fill(),o.textAlign="right",o.textBaseline="top",o.fillText(n?t.y.toString():t.x.toString(),a*r.size.x-5,5),o.textBaseline="bottom",o.fillText(n?t.x.toString():t.y.toString(),a*r.size.x-5,r.size.y-5),o.restore()}}}class ie{constructor(e,t,i){this.wrapper=e,this.context=t,this.time=i,this.objects={}}render(){}renderInOrder(...e){for(const t of e)t.render(this.context)}*sequence(){}static provide(){return(e,t,i)=>new this(e,t,i)}getFileInfo(){return"unknown"}}class Et{constructor(){this._isDown=!1,this._wasDown=!1,this._justPressed=!1,this._justReleased=!1}update(e=this._isDown){this._isDown=e,this._isDown?(this._justPressed=!this._wasDown,this._justReleased=!1):(this._justPressed=!1,this._justReleased=!this._wasDown),this._wasDown=this._isDown}isDown(){return this._isDown}isPressed(){return this._justPressed}isReleased(){return this._justReleased}}const mt=class mt{constructor(e,t=new h(-1,-1)){this.id=mt._idCounter++,this.visible=!0,this.autoPosition=!1,this.position=t,this.size=e,(this.position.x<0||this.position.y<0)&&(this.autoPosition=!0,this.position=new h(0,0))}};mt._idCounter=0;let Se=mt;class Ms extends Se{constructor(e,t){super(e,t),this._children=[],this.autoPosition=!1}addChild(e){this._children.push(e)}removeChild(e){const t=this._children.indexOf(e);t!==-1&&this._children.splice(t,1)}render(e,t,i=h.zero()){if(!this.visible)return;t.save(),t.translate(this.position.x,this.position.y),t.fillStyle="#88888888",t.beginPath(),t.roundRect(0,0,this.size.x,this.size.y,4),t.fill();let n=0;for(const r of this._children)r.autoPosition&&(r.position.x=10,r.position.y=n+10,n+=r.size.y+10),r.render(e,t,i.add(this.position));t.restore()}}class At extends Se{constructor(e,t,i){super(new h(e.size.x-20,Math.min(32,e.size.y-20))),e.addChild(this),this._text=t,this._onClick=i}render(e,t,i=h.zero()){if(!this.visible)return;let n=!1,r=!1;e.mouseInRect(this.position.add(i),this.size)&&(n=!0,e.mouseButtons.left.isDown()&&(r=!0,e.mouseButtons.left.isPressed()&&this._onClick())),t.save();const o=this.position.add(this.size.multiply(.5));t.translate(o.x,o.y),t.fillStyle=r?"#7799cc88":n?"#99ccff88":"#cccccc88",t.beginPath();const u=r?.98:n?1.02:1;t.scale(u,u),t.roundRect(-this.size.x/2,-this.size.y/2,this.size.x,this.size.y,4),t.fill(),t.fillStyle="#222",t.font="16px Noto Sans",t.textAlign="center",t.textBaseline="middle",t.fillText(this._text,0,1),t.restore()}}class fe extends Se{constructor(e,t){super(new h(e.size.x-20,20)),e.addChild(this),this._text=t}render(e,t,i=h.zero()){this.visible&&(t.save(),t.translate(this.position.x,this.position.y),t.fillStyle="#ccc",t.font="16px Noto Sans",t.textAlign="left",t.textBaseline="middle",t.fillText(this._text(),0,this.size.y/2),t.restore())}}class ce extends Se{constructor(e,t,i,n,r){super(new h(e.size.x-20,40)),this._dragging=!1,e.addChild(this),this._min=t,this._max=i,this._value=n,this._onChange=r}get value(){return this._value}set value(e){this._value=Math.max(this._min,Math.min(this._max,e)),this._onChange(this._value)}render(e,t,i=h.zero()){if(!this.visible)return;let n=!1;if(e.mouseInRect(this.position.add(i),this.size)&&(n=!0,e.mouseButtons.left.isPressed()&&(this._dragging=!0)),this._dragging){e.mouseButtons.left.isReleased()&&(this._dragging=!1);const a=this.position.x+i.x,l=this.position.x+i.x+this.size.x,c=e.transformedMousePosition.x;this.value=this._min+(c-a)/(l-a)*(this._max-this._min)}t.save();const r=this.position.add(this.size.multiply(.5));t.translate(r.x,r.y),t.fillStyle="#cccccc88",t.beginPath(),t.roundRect(-this.size.x/2,-this.size.y/2*.5,this.size.x,this.size.y*.25,4),t.fill();const o=this._max<=10?2:0;t.fillStyle="#222",t.font="16px Noto Sans",t.textAlign="center",t.textBaseline="middle",t.fillText(this.value.toFixed(o),0,16),t.textAlign="left",t.fillText(this._min.toFixed(o),-this.size.x/2+4,16),t.textAlign="right",t.fillText(this._max.toFixed(o),this.size.x/2-4,16);const u=-this.size.x/2+(this.value-this._min)/(this._max-this._min)*this.size.x;t.fillStyle=this._dragging?"#7799cc":n?"#99ccff":"#cccccc",t.beginPath(),t.roundRect(u-4,-this.size.y/2,8,this.size.y*.75,4),t.fill(),t.restore()}}class Rn{constructor(e,t,i){this._realMousePosition=new h(-1,-1),this._transformedMousePosition=new h(-1,-1),this._dpiScale=globalThis.devicePixelRatio||1,this._mouseButtons={left:new Et,middle:new Et,right:new Et},this._elements=[],this._wrapper=e,this._canvas=t,this._context=i,this._canvas.addEventListener("mousemove",this.onMouseMove.bind(this)),this._canvas.addEventListener("mouseleave",()=>{this._realMousePosition.x=-1,this._realMousePosition.y=-1,this._transformedMousePosition.x=-1,this._transformedMousePosition.y=-1,this._mouseButtons.left.update(!1),this._mouseButtons.middle.update(!1),this._mouseButtons.right.update(!1)}),this._canvas.addEventListener("mousedown",n=>this.onMouseChange(n,!0)),this._canvas.addEventListener("mouseup",n=>this.onMouseChange(n,!1))}get realMousePosition(){return this._realMousePosition}get transformedMousePosition(){return this._transformedMousePosition}get mouseButtons(){return this._mouseButtons}addElement(e){this._elements.push(e)}onMouseMove(e){this._realMousePosition.x=e.offsetX*this._dpiScale,this._realMousePosition.y=e.offsetY*this._dpiScale,this._transformedMousePosition.x=(this._realMousePosition.x-this._wrapper.offset.x)/this._wrapper.scale,this._transformedMousePosition.y=(this._realMousePosition.y-this._wrapper.offset.y)/this._wrapper.scale}onMouseChange(e,t){switch(e.button){case 0:this._mouseButtons.left.update(t);return;case 1:this._mouseButtons.middle.update(t);return;case 2:this._mouseButtons.right.update(t);return}}render(){for(const t of this._elements)t.render(this,this._context,h.zero());if(this._mouseButtons.left.update(),this._mouseButtons.middle.update(),this._mouseButtons.right.update(),!_.debugMode)return;const e=this._wrapper.resolution;this._context.fillStyle="rgba(0, 0, 0, 0.25)",this._context.fillRect(0,e.y-135,e.x,135),this._context.fillStyle="white",this._context.font="16px monospace, Consolas",this._context.textAlign="left",this._context.textBaseline="top",this._context.fillText(`Client Size: (${this._wrapper.clientSize.x}, ${this._wrapper.clientSize.y}) x ${this._dpiScale}`,10,e.y-25),this._context.fillText(`Working Resolution: (${e.x}, ${e.y})`,10,e.y-50),this._context.fillText(`Real Mouse Position: (${this._realMousePosition.x.toFixed(2)}, ${this._realMousePosition.y.toFixed(2)})`,10,e.y-75),this._context.fillText(`Mouse Position: (${this._transformedMousePosition.x.toFixed(2)}, ${this._transformedMousePosition.y.toFixed(2)})`,10,e.y-100),this._context.fillText(`Scale: ${this._wrapper.scale.toFixed(2)}, Offset: (${this._wrapper.offset.x.toFixed(2)}, ${this._wrapper.offset.y.toFixed(2)})`,10,e.y-125)}mouseInRect(e,t){return this._transformedMousePosition.x>=e.x&&this._transformedMousePosition.x<=e.x+t.x&&this._transformedMousePosition.y>=e.y&&this._transformedMousePosition.y<=e.y+t.y}}class Ln{constructor(){this.delta=0,this.now=0}}class Nn extends ie{constructor(e,t,i){super(e,t,i);const n=e.resolution;this.halfResolution=n.multiply(.5),this.objects={text:new _(w.staticText("Please provide a scene implementation.","32px Consolas, monospace","white","center","middle"),this.halfResolution,n)}}render(){this.objects.text.rotation=Math.sin(this.time.now*5)*Math.PI*.025,this.objects.text.render(this.context)}}const gt=class gt{constructor(e,t,i){if(this._time=new Ln,this._startTime=0,this._resolution=new h(1280,720),this._clientSize=new h(1280,720),this._scale=1,this._offset=new h(0,0),this._resolutionScale=1,this._dpi=globalThis.devicePixelRatio||2,this.backgroundColor="#444",this._scene=null,this._glHandler=null,this._fpsData=new Float32Array(201),this._fpsAccumulative=0,this._fpsIndex=0,this._fpsBounds={lower:0,upper:60},this._topFps=60,this._bottomFps=-1,this._renderCallbackHandle=null,this._fpsPlot=new _(w.plotFunction("",r=>this._fpsData[(r+this._fpsIndex)%201],{lower:0,upper:200},this._fpsBounds,1,()=>200,20),new h(970,10),new h(300,65),new h(1,1),new h(0,0)),this._instanceId=gt.IdCounter++,this._startTime=-1,this._canvas=e,this._wrapperElement=t,this._context=e.getContext("2d"),this._ui=new Rn(this,this._canvas,this._context),this._scene=i(this,this._context,this._time),this._scene===null&&(this._scene=new Nn(this,this._context,this._time)),this._sequenceGenerator=this._scene.sequence(),!this._context)throw new Error("Failed to get 2D context from canvas");this._renderCallbackHandle=globalThis.requestAnimationFrame(this.onRenderFrame.bind(this));const n=()=>{this._canvas.width=this._wrapperElement.clientWidth*this._dpi*this._resolutionScale,this._canvas.height=this._wrapperElement.clientHeight*this._dpi*this._resolutionScale};globalThis.addEventListener("resize",n.bind(this)),n()}get resolution(){return this._resolution}get clientSize(){return this._clientSize.set(this._wrapperElement.clientWidth,this._wrapperElement.clientHeight),this._clientSize}get scale(){return this._scale}get offset(){return this._offset}get ui(){return this._ui}onRenderFrame(e){const t=e/1e3;this._startTime<0&&(this._startTime=t),this._time.delta=t-this._startTime-this._time.now,this._time.now=t-this._startTime,this.setupTransformations(),this._scene.render(),this._sequenceGenerator.next(),this._ui.render(),this.drawDebugInfo(),this._renderCallbackHandle=globalThis.requestAnimationFrame(this.onRenderFrame.bind(this))}setupTransformations(){this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.fillStyle="#000",this._context.fillRect(0,0,this._canvas.width,this._canvas.height);const e=this._canvas.width/this._resolution.x,t=this._canvas.height/this._resolution.y;this._scale=Math.min(e,t),this._offset.x=(this._canvas.width-this._resolution.x*this._scale)/2,this._offset.y=(this._canvas.height-this._resolution.y*this._scale)/2,this._context.setTransform(this._scale,0,0,this._scale,this.offset.x,this._offset.y),this._context.fillStyle=this.backgroundColor,this._context.fillRect(0,0,this._resolution.x,this._resolution.y),this._context.strokeStyle="white",this._context.strokeRect(0,0,this._resolution.x,this._resolution.y)}drawDebugInfo(){var t;if(_.debugMode===!1)return;this._context.fillStyle="#00000044",this._context.fillRect(0,0,1280,100),this._context.fillStyle="white",this._context.font="16px Consolas, monospace",this._context.textAlign="left",this._context.textBaseline="alphabetic",this._context.fillText(`(${this._instanceId}) Debug Info`,10,20),this._context.beginPath(),this._context.moveTo(10,30),this._context.lineTo(960,30),this._context.strokeStyle="white",this._context.lineWidth=1,this._context.lineCap="butt",this._context.stroke(),this._context.fillText(`Now       : ${this._time.now.toFixed(2)}s`,10,50),this._context.fillText(`Resolution: ${this._canvas.width}x${this._canvas.height}`,10,70),this._context.fillText(`Scene     : ${(t=this._scene)==null?void 0:t.getFileInfo()}`,10,90);const e=1/this._time.delta;this._context.textAlign="right",this._context.fillText(`FPS: ${e.toFixed(2).padStart(6,"0")}`,960,20),this._context.fillText(`Avg: ${(this._fpsAccumulative/200).toFixed(2).padStart(6,"0")}`,960,50),this._context.fillText(`Max: ${this._topFps.toFixed(2).padStart(6,"0")}`,960,70),this._context.fillText(`Min: ${this._bottomFps.toFixed(2).padStart(6,"0")}`,960,90),!(isNaN(e)||isFinite(e)===!1)&&(this._topFps=Math.max(this._topFps,e),this._bottomFps=this._bottomFps<0?e:Math.min(this._bottomFps,e),this._fpsAccumulative+=e,this._fpsIndex>=201&&(this._fpsAccumulative-=this._fpsData[this._fpsIndex%201]),_.debugMode=!1,this._fpsData[this._fpsIndex++%201]=e,this._fpsBounds.upper=Math.max(this._fpsBounds.upper,Math.ceil(e/10+1)*10),this._fpsPlot.render(this._context),_.debugMode=!0)}getTextSize(e){const t=this._context.measureText(e);return new h(t.actualBoundingBoxLeft+t.actualBoundingBoxRight,t.actualBoundingBoxAscent+t.actualBoundingBoxDescent)}getWebGLContext(){if(this._glHandler)return this._glHandler._glContext;const e=document.createElement("canvas");if(e.classList.add("webgl-canvas"),this._glHandler={_glCanvas:e,_glContext:e.getContext("webgl2"),_glResolution:new h(1280,720)},!this._glHandler._glContext)return console.error("WebGL context is not available."),null;const t=()=>{this._glHandler._glCanvas.width=this._wrapperElement.clientWidth,this._glHandler._glCanvas.height=this._wrapperElement.clientHeight;const i=this._wrapperElement.clientWidth/this._resolution.x,n=this._wrapperElement.clientHeight/this._resolution.y,r=Math.min(i,n),o=(this._wrapperElement.clientWidth-this._resolution.x*r)/2,u=(this._wrapperElement.clientHeight-this._resolution.y*r)/2;this._glHandler._glResolution.x=this._resolution.x*r,this._glHandler._glResolution.y=this._resolution.y*r,this._glHandler._glContext.viewport(o,u,this._resolution.x*r,this._resolution.y*r)};return globalThis.addEventListener("resize",t.bind(this)),setTimeout(t.bind(this),1),this._wrapperElement.insertBefore(this._glHandler._glCanvas,this._canvas),this._glHandler._glContext}destroy(){this._renderCallbackHandle&&globalThis.cancelAnimationFrame(this._renderCallbackHandle),this._scene&&console.log(`CanvasWrapper (${this._instanceId}) with scene "${this._scene.getFileInfo().split("/").pop()}" destroyed.`)}};gt.IdCounter=0;let Rt=gt;var Vn=()=>_.setDebugMode(!_.debugMode),Hn=R('<div class="canvas-wrapper svelte-2j3np0"><button class="fullscreen svelte-2j3np0"><span>⛶</span></button> <button class="debugMode svelte-2j3np0"><span>🛠️</span></button> <canvas width="200" height="100"></canvas></div>');function Wn(s,e){ue(e,!0);let t=e.scene||(()=>null),i,n,r,o,u=W(!1);const a=()=>{document.fullscreenElement||O(u,!1)};is(()=>{o=new Rt(i,n,t),r.addEventListener("click",()=>{if(document.fullscreenElement){document.exitFullscreen().catch(p=>{console.error("Failed to exit fullscreen mode:",p)}),O(u,!1);return}n.requestFullscreen().catch(p=>{console.error("Failed to enter fullscreen mode:",p)}),O(u,!0)}),document.addEventListener("fullscreenchange",a)}),Tn(()=>{o.destroy(),document.removeEventListener("fullscreenchange",a)});var l=Hn(),c=I(l);nt(c,p=>r=p,()=>r);var f=S(c,2);f.__click=[Vn];var d=S(f,2);nt(d,p=>i=p,()=>i),nt(l,p=>n=p,()=>n),le(()=>ss(d,1,`canvas ${z(u)?"fullscreen":""}`,"svelte-2j3np0")),g(s,l),he()}Zt(["click"]);var Un=R('<button role="tab"> </button>'),Gn=R('<div class="tabs"><div class="tab-buttons svelte-1491n74" role="tablist"></div> <div class="tab-contents svelte-1491n74"><!></div></div>');function Yn(s,e){ue(e,!0);let t=Z([]),i=W(Z(parseInt(new URL(window.location.href).searchParams.get("tab")||"0",10)));Ei("tabs",{registerTab:a=>(t.push(a),t.length-1),activeTab:()=>z(i)}),Vs(()=>{const a=new URL(window.location.href);a.searchParams.set("tab",z(i).toString()),window.history.replaceState({},"",a.toString())});var n=Gn(),r=I(n);ts(r,21,()=>t,es,(a,l,c)=>{var f=Un();f.__click=()=>O(i,c,!0);let d;var p=I(f);le(v=>{d=ss(f,1,"svelte-1491n74",null,d,v),Ge(p,z(l).title)},[()=>({active:z(i)===c})]),g(a,f)});var o=S(r,2),u=I(o);St(u,()=>e.children??wt),g(s,n),he()}Zt(["click"]);var Xn=R('<div class="tab-panel svelte-fai8lk" role="tabpanel"><!></div>');function Kn(s,e){ue(e,!0);const{registerTab:t,activeTab:i}=ki("tabs");let n=W(-1);is(()=>{O(n,t({title:e.title}),!0)});var r=Jt(),o=Ze(r);{var u=a=>{var l=Xn(),c=I(l);St(c,()=>e.children),g(a,l)};jt(o,a=>{z(n)===i()&&a(u)})}g(s,r),he()}function Qn(s,e){ue(e,!0),Ee(s,{get title(){return e.title},children:(t,i)=>{Yn(t,{children:(n,r)=>{var o=Jt(),u=Ze(o);ts(u,17,()=>e.pages,es,(a,l)=>{Kn(a,{get title(){return z(l).name},children:(c,f)=>{Wn(c,{get scene(){return z(l).scene}})},$$slots:{default:!0}})}),g(n,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),he()}class Zn extends ie{getFileInfo(){return"src/rendering/scenes/SimpleFunctional.ts"}constructor(e,t,i){super(e,t,i),this.params={radius:200,alpha:0,omega:1},this.objects={xPlot:new _(w.plotFunction("x(t) = cos(t)",n=>Math.cos(n+i.now),{lower:-1,upper:5},{lower:-2,upper:2},.1),new h(950,240),new h(300,200),new h(1,1),new h(.5,.5),0),yPlot:new _(w.plotFunction("y(t) = sin(t)",n=>Math.sin(n+i.now),{lower:-1,upper:5},{lower:-2,upper:2},.1),new h(950,480),new h(300,200),new h(1,1),new h(.5,.5),0),pathCircle:new _(w.ellipse("transparent","#000"),new h(350,350),new h(400,400),new h(1,1),new h(.5,.5),0),circle:new _(w.ellipse("#ff5722","#ff8a50"),new h(0,0),new h(50,50),new h(1,1),new h(.5,.5),0)},this.objects.pathCircle.append(this.objects.circle)}render(){this.objects.circle.position=new h(this.params.radius*Math.cos(this.params.alpha+this.params.omega*this.time.now),this.params.radius*Math.sin(this.params.alpha+this.params.omega*this.time.now)),this.context.lineWidth=2,this.renderInOrder(this.objects.pathCircle,this.objects.xPlot,this.objects.yPlot,this.objects.circle)}}class ns{constructor(e){this.time=e}}class j{static*run(e){for(e.start();!e.tick();)yield}static*runTogether(e){e.forEach(i=>i.start());let t;do t=e.map(i=>i.tick()),yield;while(t.some(i=>!i))}static*runParallel(e){let t=!1;for(;!t;){t=!0;for(const i of e)i.next().done||(t=!1);yield}}}class rs extends ns{constructor(e,t){super(e),this.startTime=0,this.endTime=0,this.duration=0,this.finished=!0,this.duration=t}start(){this.startTime=this.time.now,this.endTime=this.startTime+this.duration,this.finished=!1}tick(){return this.finished?!0:(this.time.now>=this.endTime&&(this.finished=!0),this.finished)}}class ee extends ns{constructor(e,t,i){switch(super(e),this.startTime=0,this.endTime=0,this.finished=!0,this.setter=t,this.options=i,this.options.easing=i.easing??(n=>n),typeof i.startValue){case"number":this.type="number";break;case"object":if(i.startValue instanceof h)this.type="vector2f";else throw new Error("Unsupported type for Interpolator: "+typeof i.startValue);break;default:throw new Error("Unsupported type for Interpolator: "+typeof i.startValue)}}start(){this.startTime=this.time.now,this.endTime=this.startTime+this.options.duration,this.finished=!1,this.setter(this.options.startValue)}tick(){if(this.finished)return!0;const e=this.time.now,t=e-this.startTime,i=Math.min(t/this.options.duration,1),n=this.options.easing(i);let r;switch(this.type){case"number":r=ee.lerp(this.options.startValue,this.options.endValue,n);break;case"vector2f":r=new h(0,0),ee.lerpVector2fInPlace(r,this.options.startValue,this.options.endValue,n);break;default:r=this.options.startValue;break}return this.setter(r),e>=this.endTime&&(this.finished=!0,this.setter(this.options.endValue)),this.finished}get progress(){if(this.finished)return 1;const t=this.time.now-this.startTime;return Math.min(t/this.options.duration,1)}reverse(){const e=this.options.startValue;this.options.startValue=this.options.endValue,this.options.endValue=e}static lerp(e,t,i){return e+(t-e)*i}static lerpVector2fInPlace(e,t,i,n){e.x=this.lerp(t.x,i.x,n),e.y=this.lerp(t.y,i.y,n)}}class U{static linear(e){return e}static easeInQuad(e){return e*e}static easeOutQuad(e){return e*(2-e)}static easeInOutQuad(e){return e<.5?2*e*e:-1+(4-2*e)*e}static easeInCubic(e){return e*e*e}static easeOutCubic(e){return 1-Math.pow(1-e,3)}static easeInOutCubic(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}static easeInElastic(e){const t=2*Math.PI/3;return e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*t)}static easeOutElastic(e){const t=2*Math.PI/3;return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*t)+1}static easeInOutElastic(e){const t=2*Math.PI/4.5;return e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*t))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*t)/2+1}}class vt extends ns{constructor(e,t,i){super(e),this.currentIndex=0,this.frames=i.keyframes,this.interpolator=new ee(e,t,{startValue:this.frames[0].value,endValue:this.frames[1].value,duration:this.frames[0].duration??1,easing:i.easing}),this.endsOnStart=i.loops??!1}start(){this.interpolator.start(),this.currentIndex=0,this.interpolator.options.startValue=this.frames[0].value,this.interpolator.options.endValue=this.frames[1].value}tick(){return this.currentIndex>=this.frames.length-(this.endsOnStart?0:1)?!0:(this.interpolator.tick()&&(this.currentIndex++,this.currentIndex<this.frames.length&&(this.interpolator.options.startValue=this.frames[this.currentIndex].value,this.interpolator.options.endValue=this.frames[(this.currentIndex+1)%this.frames.length].value,this.interpolator.start())),!1)}}class Jn extends ie{getFileInfo(){return"src/rendering/scenes/SimpleInterpolation.ts"}constructor(e,t,i){super(e,t,i),this.dotPositions={ballA:0,ballB:0,ballC:0},this.objects={ballA:new _(w.ellipse("#ff5722","#ff0000"),new h(340,360),new h(50,50),new h(1,1),new h(.5,.5),0),ballB:new _(w.ellipse("#57ff22","#00ff22"),new h(640,360),new h(50,50),new h(1,1),new h(.5,.5),0),ballC:new _(w.ellipse("#2257ff","#2200ff"),new h(940,360),new h(50,50),new h(1,1),new h(.5,.5),0),easingPlotA:new _(w.plotFunction("easeInQuad: t ^ 2",U.easeInQuad,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballA),new h(340,150),new h(200,200),new h(1,1),new h(.5,.5),0),easingPlotB:new _(w.plotFunction("easeOutQuad: t * (2 - t)",U.easeOutQuad,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballB),new h(640,150),new h(200,200),new h(1,1),new h(.5,.5),0),easingPlotC:new _(w.plotFunction("easeInOutElastic: <...>",U.easeInOutElastic,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballC),new h(940,150),new h(200,200),new h(1,1),new h(.5,.5),0)},this.sequencers={ballAInterpolator:new ee(i,n=>{this.objects.ballA.position.y=n},{startValue:360,endValue:600,duration:1,easing:U.easeInQuad}),ballBInterpolator:new ee(i,n=>{this.objects.ballB.position.y=n},{startValue:360,endValue:600,duration:1,easing:U.easeOutQuad}),ballCInterpolator:new ee(i,n=>{this.objects.ballC.position.y=n},{startValue:360,endValue:600,duration:1,easing:U.easeInOutElastic}),timer:new rs(i,.5)}}*sequence(){for(;;)yield*j.runTogether([this.sequencers.ballAInterpolator,this.sequencers.ballBInterpolator,this.sequencers.ballCInterpolator]),yield*j.run(this.sequencers.timer),this.sequencers.ballAInterpolator.reverse(),this.sequencers.ballBInterpolator.reverse(),this.sequencers.ballCInterpolator.reverse()}render(){this.context.strokeStyle="#222",this.context.lineWidth=16,this.context.lineCap="round",this.context.beginPath(),this.context.moveTo(340,360),this.context.lineTo(340,600),this.context.moveTo(640,360),this.context.lineTo(640,600),this.context.moveTo(940,360),this.context.lineTo(940,600),this.context.stroke(),this.context.lineWidth=1,this.dotPositions.ballA=this.sequencers.ballAInterpolator.progress,this.dotPositions.ballB=this.sequencers.ballBInterpolator.progress,this.dotPositions.ballC=this.sequencers.ballCInterpolator.progress,this.renderInOrder(...Object.values(this.objects))}}class jn extends ie{getFileInfo(){return"src/rendering/scenes/SimpleSequence.ts"}constructor(e,t,i){super(e,t,i),this.rectPath=[{value:new h(160,160),duration:.25},{value:new h(560,160),duration:.25},{value:new h(560,560),duration:.25},{value:new h(160,560),duration:.25}],this.polyPath=[{value:new h(720,260),duration:.33},{value:new h(920,160),duration:.33},{value:new h(1120,260),duration:.33},{value:new h(720,460),duration:.33},{value:new h(920,560),duration:.33},{value:new h(1120,460),duration:.33}],this.objects={circleA:new _(w.ellipse("#ff5722","#ff0000"),new h(340,360),new h(50,50),new h(1,1),new h(.5,.5),0),circleB:new _(w.ellipse("#ff5722","#ff0000"),new h(720,360),new h(50,50),new h(1,1),new h(.5,.5),0),path:new _(w.roundedRectangle("#00000000","#000",8),new h(360,360),new h(400,400))},this.sequencers={sequenceA:new vt(this.time,n=>this.objects.circleA.position=n,{keyframes:this.rectPath,easing:U.linear,loops:!0}),sequenceB:new vt(this.time,n=>this.objects.circleB.position=n,{keyframes:this.polyPath,easing:U.easeInOutCubic,loops:!0})}}render(){this.context.beginPath(),this.context.moveTo(this.polyPath[0].value.x,this.polyPath[0].value.y);for(let e=1;e<this.polyPath.length;e++)this.context.lineTo(this.polyPath[e].value.x,this.polyPath[e].value.y);this.context.closePath(),this.context.strokeStyle="#000",this.context.lineWidth=2,this.context.stroke(),this.renderInOrder(this.objects.path,this.objects.circleA,this.objects.circleB)}*sequence(){yield*j.runParallel([this.sequenceA(),this.sequenceB()])}*sequenceA(){for(;;)yield*j.run(this.sequencers.sequenceA)}*sequenceB(){for(;;)yield*j.run(this.sequencers.sequenceB)}}const de=class de{constructor(e){this.loaded=!1,this.size=new h(-1,-1);const t=et+e;if(this.image=de.cache.get(t)||new Image,!de.cache.has(t))this.image.src=t,de.cache.set(t,this.image);else{this.loaded=!0;const i=de.cache.get(t);this.size.set(i.width,i.height)}this.image.onload=()=>{this.loaded=!0,this.size.set(this.image.width,this.image.height)}}isLoaded(){return this.loaded}getImage(){return this.loaded||console.warn(`Image at ${this.image.src} is not loaded yet.`),this.image}};de.cache=new Map;let _t=de;const pe=class pe extends _t{constructor(e,t,i,n=t*i){super(e),this.framesX=t,this.framesY=i,this.frameCount=n}drawFrame(e,t,i,n,r,o){if(!this.isLoaded()){console.warn(`Spritesheet at ${this.image.src} is not loaded yet.`);return}const u=t%this.frameCount,a=this.image.width/this.framesX,l=this.image.height/this.framesY,c=u%this.framesX*a,f=Math.floor(u/this.framesX)*l;e.drawImage(this.image,c+pe.BIAS,f+pe.BIAS,a-pe.BIAS*2,l-pe.BIAS*2,i,n,r,o)}};pe.BIAS=.5;let Te=pe;class er{constructor(e,t){this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=t,this.context=this.canvas.getContext("2d")}getCanvas(){return this.canvas}getContext(){return this.context}get imageData(){return this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}set imageData(e){this.context.putImageData(e,0,0)}}class tr extends ie{getFileInfo(){return"src/rendering/scenes/ComplexSequence.ts"}constructor(e,t,i){super(e,t,i),this.textures={wood:new _t("/wood.webp")},this.objects={sign:new _(w.image(this.textures.wood),new h(0,200),new h(400,300),new h(1,1),new h(.5,0)),text:new _(w.staticText(["This whole animation is done","with the following objects:","","2 simple sequences.","A looping interpolator."].join(`
`),"20px Arial","#ffffff","center","top",!0),new h(0,100)),ropeLeft:new _(w.roundedRectangle("#000",null,5),new h(0,0),new h(10,300),new h(1,1),new h(.5,.01),Math.PI/5),ropeRight:new _(w.roundedRectangle("#000",null,5),new h(0,0),new h(10,300),new h(1,1),new h(.5,.01),-Math.PI/5),pivot:new _(()=>{},new h(640,-1e3),new h(1,1)),nail:new _(w.roundedRectangle("#888","#000",4),new h(0,8),new h(16,16),new h(1,1),new h(.5,.5),.2)},this.objects.pivot.append(this.objects.ropeLeft,this.objects.ropeRight,this.objects.sign,this.objects.nail),this.objects.sign.append(this.objects.text),this.sequencers={timer:new rs(this.time,.5),signRotation:new vt(this.time,n=>this.objects.sign.rotation=n,{keyframes:[{value:0,duration:.25},{value:-.05,duration:.25},{value:.05,duration:.25},{value:0,duration:.25}],easing:U.easeInOutQuad}),pivotY:new ee(this.time,n=>this.objects.pivot.position.y=n,{startValue:-600,endValue:100,duration:1,easing:U.easeOutElastic}),pivotRotationStart:new vt(this.time,n=>{this.objects.pivot.rotation=n,this.objects.nail.rotation=-n+.2},{keyframes:[{value:Math.PI/5,duration:.66},{value:-Math.PI/5,duration:.66},{value:Math.PI/10,duration:.66}],easing:U.easeInOutQuad}),pivotRotationLoop:new ee(this.time,n=>{this.objects.pivot.rotation=n,this.objects.nail.rotation=-n+.2},{startValue:Math.PI/10,endValue:-Math.PI/10,duration:.6666,easing:U.easeInOutQuad})}}*sequence(){for(yield*j.run(this.sequencers.timer),yield*j.runTogether([this.sequencers.signRotation,this.sequencers.pivotY,this.sequencers.pivotRotationStart]);;)if(yield*j.run(this.sequencers.pivotRotationLoop),this.sequencers.pivotRotationLoop.reverse(),this.sequencers.pivotRotationLoop.options.endValue*=.5,Math.abs(this.sequencers.pivotRotationLoop.options.endValue)<.001){this.objects.pivot.rotation=0;break}}render(){this.objects.pivot.render(this.context)}}class rt{constructor(e,t,i){this.background=new _(w.roundedRectangle("rgba(0, 0, 0, 0.5)","black",8),e,t.clone(),new h(1,1),new h(0,0)),this.foreground=new _(w.roundedRectangle("rgba(0, 255, 0, 0.5)","green",8),new h(0,0),t.clone(),new h(1,1),new h(0,0)),this.text=new _(w.dynamicText(i,"24px Consolas, monospace","white","left","middle"),new h(0,-12)),this.background.append(this.foreground,this.text)}render(e){this.background.render(e)}setProgress(e){this.foreground.size.x=this.background.size.x*e}}class sr extends ie{getFileInfo(){return"src/rendering/scenes/SimpleFrameAnimation.ts"}constructor(e,t,i){super(e,t,i),this.textures={cat:new Te("/cat-spritesheet.webp",12,14,158)},this.objects={cat:new _(w.sprite(this.textures.cat,()=>Math.floor(i.now*24)),new h(1280/2,720/2),new h(256,256)),progressBar:new rt(new h(256/2,592),new h(1024,32),()=>`Frame: ${Math.floor(i.now*24)%158} / 158`)}}render(){this.objects.progressBar.setProgress(Math.round(this.time.now*24)/158%1),this.renderInOrder(this.objects.cat,this.objects.progressBar)}}class ir extends ie{getFileInfo(){return"src/rendering/scenes/CatPendulum.ts"}constructor(e,t,i){super(e,t,i),this.textures={cat1:new Te("/cat-spritesheet.webp",12,14,158),cat2:new Te("/cat-alt-spritesheet.webp",9,8,71),cat3:new Te("/cat-alt-02-spritesheet.webp",9,8,68)},this.objects={cat1:new _(w.sprite(this.textures.cat1,()=>Math.floor(i.now*24)),new h(0,200),new h(200,200),new h(1,1),new h(.5,0),0),cat2:new _(w.sprite(this.textures.cat2,()=>Math.floor(i.now*24)),new h(0,150),new h(200,200),new h(1,1),new h(.5,0),0),cat3:new _(w.sprite(this.textures.cat3,()=>Math.floor(i.now*24)),new h(640,100),new h(200,150),new h(1,1),new h(.5,0),0),texts:{cat1:new _(w.staticText("Cat 1: 158 frames","24px Consolas, monospace","white","center","middle")),cat2:new _(w.staticText("Cat 2: 71 frames","24px Consolas, monospace","white","center","middle")),cat3:new _(w.staticText("Cat 3: 68 frames","24px Consolas, monospace","white","center","middle"))},progressBars:{cat1:new rt(new h(50,518),new h(128,24),()=>`Cat 1: ${Math.floor(i.now*24)%158+1} / 158`),cat2:new rt(new h(50,582),new h(128,24),()=>`Cat 2: ${Math.floor(i.now*24)%71+1} / 71`),cat3:new rt(new h(50,646),new h(128,24),()=>`Cat 3: ${Math.floor(i.now*24)%68+1} / 68`)}},this.objects.cat3.append(this.objects.texts.cat3,this.objects.cat2),this.objects.cat2.append(this.objects.texts.cat2,this.objects.cat1),this.objects.cat1.append(this.objects.texts.cat1)}render(){this.objects.cat1.rotation=Math.sin(this.time.now*2)*.75,this.objects.cat2.rotation=Math.sin(this.time.now*3)*.5,this.objects.cat3.rotation=Math.sin(this.time.now*4)*.5,this.objects.progressBars.cat1.setProgress(Math.round(this.time.now*24)/158%1),this.objects.progressBars.cat2.setProgress(Math.round(this.time.now*24)/71%1),this.objects.progressBars.cat3.setProgress(Math.round(this.time.now*24)/68%1),this.renderInOrder(this.objects.cat3,this.objects.progressBars.cat1,this.objects.progressBars.cat2,this.objects.progressBars.cat3)}}class nr extends ie{getFileInfo(){return"src/rendering/scenes/GameOfLife.ts"}constructor(e,t,i){super(e,t,i);const n=e.resolution,r=8;this.cols=Math.floor(n.x/r),this.rows=Math.floor(n.y/r),this.grid=new er(this.cols,this.rows),this.imageData=this.grid.imageData,this.timer=new rs(i,1/30);const o=this.imageData;for(let u=0;u<this.rows;u++)for(let a=0;a<this.cols;a++)o.data[(u*this.cols+a)*4]=0,o.data[(u*this.cols+a)*4+1]=0,o.data[(u*this.cols+a)*4+2]=0,o.data[(u*this.cols+a)*4+3]=Math.random()<.5?255:0;this.grid.imageData=o}*sequence(){for(;;)this.updateGrid(),yield*j.run(this.timer)}render(){const e=this.context;e.fillStyle="#ff5722",e.fillRect(0,0,this.wrapper.resolution.x,this.wrapper.resolution.y),e.imageSmoothingEnabled=!1,e.drawImage(this.grid.getCanvas(),0,0,this.wrapper.resolution.x,this.wrapper.resolution.y)}updateGrid(){const e=Array.from(this.grid.imageData.data.filter((t,i)=>i%4===3)).map(t=>t>0);for(let t=0;t<e.length;t++){const i=Math.floor(t/this.cols),n=t%this.cols,r=this.countAliveNeighbors(e,i,n);e[t]?r<2||r>3?this.imageData.data[t*4+3]=0:this.imageData.data[t*4+3]=255:r===3?this.imageData.data[t*4+3]=255:this.imageData.data[t*4+3]=0}this.grid.imageData=this.imageData}countAliveNeighbors(e,t,i){const n=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];let r=0;for(const[o,u]of n){const a=t+o,l=i+u;if(a>=0&&a<this.rows&&l>=0&&l<this.cols){const c=a*this.cols+l;e[c]&&r++}}return r}}function Be(s,e,t){return Math.max(e,Math.min(t,s))}function xe(s,e,t){return s+(e-s)*t}function rr(s,e,t){const i=(n,r=(n+s/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}const $t={r:200,g:128,b:255},Bt={r:200,g:255,b:128};let be=500,Fe=Math.PI*4,De=300,X=100,Oe=40,qe=60,V=200;function or(s,e){return(t,i)=>{const n=t.position.x/s.x,r=t.position.y/s.y,o={r:xe($t.r,Bt.r,n),g:xe($t.g,Bt.g,r),b:xe($t.b,Bt.b,n+r)},u=rr(t.rotation/Math.PI*360,1,1),a={r:xe(o.r,u[0]*256,.25),g:xe(o.g,u[1]*256,.25),b:xe(o.b,u[2]*256,.25)};if(i.fillStyle=`rgb(${a.r}, ${a.g}, ${a.b})`,i.beginPath(),i.moveTo(10,0),i.lineTo(-10,7),i.lineTo(-5,0),i.lineTo(-10,-7),i.fill(),_.debugMode){i.save(),i.rotate(-t.rotation);const l=e.getObjectsInRange(t.position.x,t.position.y,X);i.strokeStyle="#ff0000";for(const c of l){if(c===t)continue;const f=c.position.subtract(t.position);f.length()>X||(i.beginPath(),i.moveTo(0,0),i.lineTo(f.x,f.y),i.stroke())}i.restore(),i.strokeStyle="#00ff00",i.lineWidth=2,i.beginPath(),i.moveTo(0,0),i.lineTo(50,0),i.arc(0,0,X,0,Math.PI*2),i.stroke(),i.strokeStyle="#0000ff",i.beginPath(),i.arc(0,0,Oe,0,Math.PI*2),i.stroke(),i.strokeStyle="#ffff00",i.beginPath(),i.arc(0,0,qe,0,Math.PI*2),i.stroke()}}}class lr{constructor(e,t){this.grid=[],this.resolution=t,this.cellCount=e,this.cellSize=new h(t.x/e,t.y/e);for(let i=0;i<e;i++){this.grid[i]=[];for(let n=0;n<e;n++)this.grid[i][n]=[]}}add(e){const t=Math.floor(e.position.x/(this.resolution.x/this.cellCount)),i=Math.floor(e.position.y/(this.resolution.y/this.cellCount));t>=0&&t<this.cellCount&&i>=0&&i<this.cellCount&&this.grid[i][t].push(e)}getObjectsInCell(e,t){return e<0||e>=this.cellCount||t<0||t>=this.cellCount?[]:this.grid[t][e]||[]}getObjectsInRange(e,t,i){const n=[],r=Math.max(0,Math.floor((e-i)/this.cellSize.x)),o=Math.min(this.cellCount-1,Math.ceil((e+i)/this.cellSize.x)),u=Math.max(0,Math.floor((t-i)/this.cellSize.y)),a=Math.min(this.cellCount-1,Math.ceil((t+i)/this.cellSize.y));for(let l=u;l<=a;l++)for(let c=r;c<=o;c++)n.push(...this.grid[l][c]);return n}clear(){for(let e=0;e<this.cellCount;e++)for(let t=0;t<this.cellCount;t++)this.grid[e][t]=[]}debugRender(e){const t=this.resolution.x/this.cellCount,i=this.resolution.y/this.cellCount;e.strokeStyle="#000000",e.lineWidth=1,e.beginPath();for(let n=1;n<this.cellCount;n++)e.moveTo(n*t,0),e.lineTo(n*t,this.resolution.y),e.moveTo(0,n*i),e.lineTo(this.resolution.x,n*i);e.stroke()}}class ar extends ie{getFileInfo(){return"src/rendering/scenes/Boids.ts"}constructor(e,t,i){super(e,t,i),this.debugAgent=null,this.spawnAgents(e,be),this.debugAgent=this.agents[Math.floor(Math.random()*this.agents.length)];const n=new h(300,654),r=new Ms(n,e.resolution.subtract(n).subtract(new h(10,10)));r.visible=!1,new fe(r,()=>"Agent Count"),new ce(r,0,1500,be,u=>be=Math.round(u)),new At(r,"Respawn Agents",()=>{this.spawnAgents(e,be),this.debugAgent=this.agents[Math.floor(Math.random()*this.agents.length)]}),new fe(r,()=>"Rotation Speed Limit (rad/s)"),new ce(r,0,Math.PI*16,Fe,u=>Fe=u),new fe(r,()=>"Movement Speed (px/s)"),new ce(r,0,1e3,De,u=>De=u),new fe(r,()=>"Separation Range (px)"),new ce(r,1,500,X,u=>X=u),new fe(r,()=>"Alignment Range (px)"),new ce(r,1,500,Oe,u=>Oe=u),new fe(r,()=>"Cohesion Range (px)"),new ce(r,1,500,qe,u=>qe=u),new fe(r,()=>"Bounds Avoidance Distance (px)"),new ce(r,1,500,V,u=>V=u),new At(r,"Restore Defaults",()=>{be=500,Fe=Math.PI*4,De=300,X=100,Oe=40,qe=60,V=200,this.spawnAgents(e,be),this.debugAgent=this.agents[Math.floor(Math.random()*this.agents.length)]});const o=new Ms(new h(42,42),new h(e.resolution.x-52,e.resolution.y-50));new At(o,"҉",()=>{r.visible=!r.visible,o.position.x=r.visible?e.resolution.x-62-n.x:e.resolution.x-52}),e.ui.addElement(r),e.ui.addElement(o)}spawnAgents(e,t){const i=Math.ceil(Math.sqrt(t*e.resolution.x/e.resolution.y)),n=Math.ceil(t/i),r=e.resolution.x/i;this.grid=new lr(Math.ceil(Math.sqrt(t)),e.resolution),console.log(`Boids grid: ${i} x ${n} (${t} agents) with cell size ${r}`),this.newRotations=new Float32Array(t);const o=or(e.resolution,this.grid);return this.agents=Array.from({length:t},(u,a)=>{const l=new _(o,new h(Be(a%i*(e.resolution.x/i)+r/2,0,e.resolution.x),Be(Math.floor(a/i)*(e.resolution.y/n)+r/2,0,e.resolution.y)),new h(20,20),h.one(),new h(.5,.5),Math.random()*Math.PI*2);return this.grid.add(l),l}),console.log(`Spawned ${this.agents.length} agents.`),o}turnAwayFromBounds(e){const t=this.wrapper.resolution,i=e.position;let n=new h(0,0),r=0;return i.x<V?(n.x=1,r+=V-i.x):i.x>t.x-V&&(n.x=-1,r+=i.x-(t.x-V)),i.y<V?(n.y=1,r+=V-i.y):i.y>t.y-V&&(n.y=-1,r+=i.y-(t.y-V)),n=n.normalize(),{steeringVector:new h(n.x,n.y),strength:Math.pow(r/V,2)}}separate(e,t){const i=new h(0,0);let n=1/0,r=0;for(const a of t){if(a===e)continue;const l=e.position.subtract(a.position),c=l.length();c<X&&c>0&&(c<n&&(n=c),i.addInPlace(l.normalize().multiply(1/c)),r++)}let o=0,u=0;return r>0&&(o=Math.atan2(i.y,i.x),u=Math.max(0,X-n)/X),{steeringVector:new h(Math.cos(o),Math.sin(o)),strength:Math.pow(u,4)}}align(e,t){const i=new h(0,0);let n=0;for(const u of t){if(u===e)continue;const l=u.position.subtract(e.position).length();l<Oe&&l>0&&(i.addInPlace(new h(Math.cos(u.rotation),Math.sin(u.rotation))),n++)}let r=e.rotation,o=0;return n>0&&(i.multiplyInPlace(1/n),r=Math.atan2(i.y,i.x),o=1),{steeringVector:new h(Math.cos(r),Math.sin(r)),strength:Math.pow(o,2)}}cohere(e,t){const i=new h(0,0);let n=0;for(const u of t){if(u===e)continue;const l=u.position.subtract(e.position).length();l<qe&&l>0&&(i.addInPlace(u.position),n++)}let r=e.rotation,o=0;return n>0&&(i.multiplyInPlace(1/n),i.subtractInPlace(e.position),r=Math.atan2(i.y,i.x),o=(1-1/n)*.5),{steeringVector:new h(Math.cos(r),Math.sin(r)),strength:Math.pow(o,2)}}moveAgents(e){for(const t of this.agents){const i=new h(Math.cos(t.rotation)*De*e.delta,Math.sin(t.rotation)*De*e.delta);t.position.addInPlace(i),t.position.x=Be(t.position.x,0,this.wrapper.resolution.x),t.position.y=Be(t.position.y,0,this.wrapper.resolution.y)}}render(){_.debugMode&&this.grid.debugRender(this.context);for(let e=0;e<this.agents.length;e++){const t=this.agents[e],i=this.grid.getObjectsInRange(t.position.x,t.position.y,X),n=this.turnAwayFromBounds(t),r=this.separate(t,i),o=this.align(t,i),u=this.cohere(t,i);let a=n.steeringVector.multiply(n.strength).add(r.steeringVector.multiply(r.strength)).add(o.steeringVector.multiply(o.strength)).add(u.steeringVector.multiply(u.strength));a.length()===0?a=new h(Math.cos(t.rotation),Math.sin(t.rotation)):a=a.normalize();let c=Math.atan2(a.y,a.x)-t.rotation;c=Math.atan2(Math.sin(c),Math.cos(c));const f=Be(c,-Fe*this.time.delta,Fe*this.time.delta);this.newRotations[e]=(t.rotation+f+Math.PI*2)%(Math.PI*2)}for(let e=0;e<this.agents.length;e++){const t=this.agents[e];t.rotation=this.newRotations[e]}this.moveAgents(this.time),this.grid.clear();for(const e of this.agents)this.grid.add(e);for(const e of this.agents){const t=_.debugMode;t&&this.debugAgent!==e&&_.setDebugMode(!1),e.render(this.context),_.setDebugMode(t)}}}console.log("Running in production mode.");const et="/emergent-animations",os=[],ni=[{title:"Functional Animations",href:"/examples/functional-animations",examples:[{name:"Simple functional",scene:Zn.provide()},{name:"Simple interpolation",scene:Jn.provide()},{name:"Simple sequence",scene:jn.provide()},{name:"Complex sequence",scene:tr.provide()}]},{title:"Frame Animations",href:"/examples/frame-animations",examples:[{name:"Simple animation",scene:sr.provide()},{name:"Complex animation",scene:ir.provide()}]},{title:"Rule Based Animations",href:"/examples/rule-based-animations",examples:[{name:"Game of Life",scene:nr.provide()},{name:"Boids",scene:ar.provide()}]}],ur=[{href:"/",component:kn,title:"Home"},{href:"/404",component:An,title:"404"},{href:"/thesis",component:Bn,title:"Thesis"},{href:"/about",component:Dn,title:"About"},{href:"/examples",component:qn,title:"Examples"},...ni.map(s=>({href:s.href,title:s.title,component:Qn,props:{title:s.title,pages:s.examples||[]}}))],ze=ur.reduce((s,e)=>(s[e.href]=e,s),{});let Ye=ze[globalThis.location.pathname.replace(et,"")]??ze["/404"];function hr(s){globalThis.history.pushState({},"",et+s),Ye=ze[s]??ze["/404"],os.forEach(e=>e(Ye))}function fr(){return Ye}function cr(s){os.push(s)}globalThis.addEventListener("popstate",()=>{const s=globalThis.location.pathname.replace(et,"");Ye=ze[s]??ze["/404"],os.forEach(e=>e(Ye))});function dr(s,e,t){e()===""&&(s.preventDefault(),s.stopPropagation(),hr(t.href))}var pr=R("<a><!> <!></a>");function $(s,e){ue(e,!0);let t=ve(e,"style",3,""),i=ve(e,"cssClass",3,""),n=ve(e,"target",3,""),r=ve(e,"rel",3,""),o;tn().then(()=>{o.innerText=o.innerText.trim()});var u=pr();u.__click=[dr,n,e];var a=I(u);St(a,()=>e.children??wt);var l=S(a,2);{var c=f=>{var d=E();le(()=>Ge(d,e.href)),g(f,d)};jt(l,f=>{e.children||f(c)})}nt(u,f=>o=f,()=>o),le(()=>{Ne(u,"href",e.href),ii(u,t()),Ne(u,"target",n()),Ne(u,"rel",r()),ss(u,1,`link ${i()??""}`,"svelte-1iwy9kf")}),g(s,u),he()}Zt(["click"]);var vr=R('<header class="svelte-1xgxzs1"><!> <nav class="svelte-1xgxzs1"><!> <!> <!> <!></nav></header>');function _r(s){var e=vr(),t=I(e);$(t,{href:"/",cssClass:"navbar-title",children:(a,l)=>{var c=E("Emergent Animations");g(a,c)},$$slots:{default:!0}});var i=S(t,2),n=I(i);$(n,{cssClass:"navbar-link",href:"/",children:(a,l)=>{var c=E("Home");g(a,c)},$$slots:{default:!0}});var r=S(n,2);$(r,{cssClass:"navbar-link",href:"/thesis",children:(a,l)=>{var c=E("Thesis");g(a,c)},$$slots:{default:!0}});var o=S(r,2);$(o,{cssClass:"navbar-link",href:"/examples",children:(a,l)=>{var c=E("Examples");g(a,c)},$$slots:{default:!0}});var u=S(o,2);$(u,{cssClass:"navbar-link",href:"/about",children:(a,l)=>{var c=E("About");g(a,c)},$$slots:{default:!0}}),g(s,e)}function mr(s,e){ue(e,!0);let t=W(Z(fr())),i=kt(()=>{var l;return(l=z(t))==null?void 0:l.component}),n=kt(()=>{var l;return((l=z(t))==null?void 0:l.title)||"*"}),r=kt(()=>{var l;return((l=z(t))==null?void 0:l.props)||{}}),o=null;cr(l=>{z(t).href!=l.href&&(o&&clearTimeout(o),document.getElementById("current-page").classList.add("fade-out"),o=setTimeout(()=>{O(t,l,!0),document.getElementById("current-page").classList.remove("fade-out")},150))});var u=Jt();on(l=>{le(()=>qs.title=`Emergent Animations - ${z(n)??""}`)});var a=Ze(u);vn(a,()=>z(i),(l,c)=>{c(l,Mn(()=>z(r)))}),g(s,u),he()}var gr=R('<!> <main class="svelte-7hgqb0"><!></main> <footer class="svelte-7hgqb0"><span>Created by <!> using <!> ❤️</span></footer>',1);function wr(s){var e=gr(),t=Ze(e);_r(t);var i=S(t,2),n=I(i);mr(n,{});var r=S(i,2),o=I(r),u=S(I(o));$(u,{href:"https://github.com/KissKonradUni/emergent-animations",target:"_blank",rel:"noopener noreferrer",children:(l,c)=>{var f=E("Konrád Soma Kiss");g(l,f)},$$slots:{default:!0}});var a=S(u,2);$(a,{href:"https://svelte.dev",target:"_blank",rel:"noopener noreferrer",children:(l,c)=>{var f=E("Svelte");g(l,f)},$$slots:{default:!0}}),g(s,e)}an(wr,{target:document.body});
