(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();const nn=!1;var zt=Array.isArray,Kn=Array.prototype.indexOf,At=Array.from,Qn=Object.defineProperty,de=Object.getOwnPropertyDescriptor,Zn=Object.getOwnPropertyDescriptors,Jn=Object.prototype,jn=Array.prototype,wn=Object.getPrototypeOf,sn=Object.isExtensible;function Ae(n){return typeof n=="function"}const lt=()=>{};function es(n){for(var e=0;e<n.length;e++)n[e]()}const H=2,gn=4,at=8,kt=16,ee=32,Ie=64,Qe=128,N=256,Ze=512,B=1024,X=2048,ge=4096,Z=8192,ut=16384,ts=32768,Le=65536,_n=1<<19,mn=1<<20,St=1<<21,ke=Symbol("$state"),ns=Symbol("legacy props"),ss=Symbol("");function yn(n){return n===this.v}function is(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function xn(n){return!is(n,this.v)}function rs(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function os(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ls(n){throw new Error("https://svelte.dev/e/effect_orphan")}function as(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function us(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function hs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function fs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ne=!1,cs=!1;function ds(){Ne=!0}const Ft=1,qt=2,bn=4,ps=8,vs=16,ws=1,gs=2,k=Symbol(),_s="http://www.w3.org/1999/xhtml";function $t(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let m=null;function rn(n){m=n}function ms(n){return Tn().get(n)}function ys(n,e){return Tn().set(n,e),e}function le(n,e=!1,t){var s=m={p:m,c:null,d:!1,e:null,m:!1,s:n,x:null,l:null};Ne&&!e&&(m.l={s:null,u:null,r1:[],r2:$e(!1)}),zs(()=>{s.d=!0})}function ae(n){const e=m;if(e!==null){const o=e.e;if(o!==null){var t=T,s=b;e.e=null;try{for(var i=0;i<o.length;i++){var r=o[i];Me(r.effect),oe(r.reaction),Ot(r.fn)}}finally{Me(t),oe(s)}}m=e.p,e.m=!0}return{}}function ht(){return!Ne||m!==null&&m.l===null}function Tn(n){return m===null&&$t(),m.c??(m.c=new Map(xs(m)||void 0))}function xs(n){let e=n.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}function K(n){if(typeof n!="object"||n===null||ke in n)return n;const e=wn(n);if(e!==Jn&&e!==jn)return n;var t=new Map,s=zt(n),i=V(0),r=b,o=h=>{var a=b;oe(r);var l=h();return oe(a),l};return s&&t.set("length",V(n.length)),new Proxy(n,{defineProperty(h,a,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&us();var c=t.get(a);return c===void 0?(c=o(()=>V(l.value)),t.set(a,c)):F(c,o(()=>K(l.value))),!0},deleteProperty(h,a){var l=t.get(a);if(l===void 0)a in h&&(t.set(a,o(()=>V(k))),mt(i));else{if(s&&typeof a=="string"){var c=t.get("length"),f=Number(a);Number.isInteger(f)&&f<c.v&&F(c,f)}F(l,k),mt(i)}return!0},get(h,a,l){var p;if(a===ke)return n;var c=t.get(a),f=a in h;if(c===void 0&&(!f||(p=de(h,a))!=null&&p.writable)&&(c=o(()=>V(K(f?h[a]:k))),t.set(a,c)),c!==void 0){var d=M(c);return d===k?void 0:d}return Reflect.get(h,a,l)},getOwnPropertyDescriptor(h,a){var l=Reflect.getOwnPropertyDescriptor(h,a);if(l&&"value"in l){var c=t.get(a);c&&(l.value=M(c))}else if(l===void 0){var f=t.get(a),d=f==null?void 0:f.v;if(f!==void 0&&d!==k)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return l},has(h,a){var d;if(a===ke)return!0;var l=t.get(a),c=l!==void 0&&l.v!==k||Reflect.has(h,a);if(l!==void 0||T!==null&&(!c||(d=de(h,a))!=null&&d.writable)){l===void 0&&(l=o(()=>V(c?K(h[a]):k)),t.set(a,l));var f=M(l);if(f===k)return!1}return c},set(h,a,l,c){var A;var f=t.get(a),d=a in h;if(s&&a==="length")for(var p=l;p<f.v;p+=1){var v=t.get(p+"");v!==void 0?F(v,k):p in h&&(v=o(()=>V(k)),t.set(p+"",v))}f===void 0?(!d||(A=de(h,a))!=null&&A.writable)&&(f=o(()=>V(void 0)),F(f,o(()=>K(l))),t.set(a,f)):(d=f.v!==k,F(f,o(()=>K(l))));var S=Reflect.getOwnPropertyDescriptor(h,a);if(S!=null&&S.set&&S.set.call(c,l),!d){if(s&&typeof a=="string"){var P=t.get("length"),C=Number(a);Number.isInteger(C)&&C>=P.v&&F(P,C+1)}mt(i)}return!0},ownKeys(h){M(i);var a=Reflect.ownKeys(h).filter(f=>{var d=t.get(f);return d===void 0||d.v!==k});for(var[l,c]of t)c.v!==k&&!(l in h)&&a.push(l);return a},setPrototypeOf(){hs()}})}function mt(n,e=1){F(n,n.v+e)}function Bt(n){var e=H|X,t=b!==null&&(b.f&H)!==0?b:null;return T===null||t!==null&&(t.f&N)!==0?e|=N:T.f|=mn,{ctx:m,deps:null,effects:null,equals:yn,f:e,fn:n,reactions:null,rv:0,v:null,wv:0,parent:t??T}}function yt(n){const e=Bt(n);return Ln(e),e}function bs(n){const e=Bt(n);return e.equals=xn,e}function Mn(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)j(e[t])}}function Ts(n){for(var e=n.parent;e!==null;){if((e.f&H)===0)return e;e=e.parent}return null}function Sn(n){var e,t=T;Me(Ts(n));try{Mn(n),e=Hn(n)}finally{Me(t)}return e}function In(n){var e=Sn(n),t=(ie||(n.f&N)!==0)&&n.deps!==null?ge:B;W(n,t),n.equals(e)||(n.v=e,n.wv=Rn())}const qe=new Map;function $e(n,e){var t={f:0,v:n,reactions:null,equals:yn,rv:0,wv:0};return t}function V(n,e){const t=$e(n);return Ln(t),t}function Ms(n,e=!1){var s;const t=$e(n);return e||(t.equals=xn),Ne&&m!==null&&m.l!==null&&((s=m.l).s??(s.s=[])).push(t),t}function F(n,e,t=!1){b!==null&&!Y&&ht()&&(b.f&(H|kt))!==0&&!(z!=null&&z.includes(n))&&fs();let s=t?K(e):e;return It(n,s)}function It(n,e){if(!n.equals(e)){var t=n.v;Ve?qe.set(n,e):qe.set(n,t),n.v=e,(n.f&H)!==0&&((n.f&X)!==0&&Sn(n),W(n,(n.f&N)===0?B:ge)),n.wv=Rn(),Pn(n,X),ht()&&T!==null&&(T.f&B)!==0&&(T.f&(ee|Ie))===0&&(R===null?Bs([n]):R.push(n))}return e}function Pn(n,e){var t=n.reactions;if(t!==null)for(var s=ht(),i=t.length,r=0;r<i;r++){var o=t[r],h=o.f;(h&X)===0&&(!s&&o===T||(W(o,e),(h&(B|N))!==0&&((h&H)!==0?Pn(o,ge):pt(o))))}}let Ss=!1;var on,Cn,En,zn,An;function Is(){if(on===void 0){on=window,Cn=document,En=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,t=Text.prototype;zn=de(e,"firstChild").get,An=de(e,"nextSibling").get,sn(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),sn(t)&&(t.__t=void 0)}}function Re(n=""){return document.createTextNode(n)}function Je(n){return zn.call(n)}function ft(n){return An.call(n)}function $(n,e){return Je(n)}function ct(n,e){{var t=Je(n);return t instanceof Comment&&t.data===""?ft(t):t}}function q(n,e=1,t=!1){let s=n;for(;e--;)s=ft(s);return s}function Ps(n){n.textContent=""}function Cs(n){T===null&&b===null&&ls(),b!==null&&(b.f&N)!==0&&T===null&&os(),Ve&&rs()}function Es(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function Pe(n,e,t,s=!0){var i=T,r={ctx:m,deps:null,nodes_start:null,nodes_end:null,f:n|X,first:null,fn:e,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(t)try{Lt(r),r.f|=ts}catch(a){throw j(r),a}else e!==null&&pt(r);var o=t&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&(mn|Qe))===0;if(!o&&s&&(i!==null&&Es(r,i),b!==null&&(b.f&H)!==0)){var h=b;(h.effects??(h.effects=[])).push(r)}return r}function zs(n){const e=Pe(at,null,!1);return W(e,B),e.teardown=n,e}function kn(n){Cs();var e=T!==null&&(T.f&ee)!==0&&m!==null&&!m.m;if(e){var t=m;(t.e??(t.e=[])).push({fn:n,effect:T,reaction:b})}else{var s=Ot(n);return s}}function As(n){const e=Pe(Ie,n,!0);return(t={})=>new Promise(s=>{t.outro?Be(e,()=>{j(e),s(void 0)}):(j(e),s(void 0))})}function Ot(n){return Pe(gn,n,!1)}function ks(n){return Pe(at,n,!0)}function re(n,e=[],t=Bt){const s=e.map(t);return Ce(()=>n(...s.map(M)))}function Ce(n,e=0){return Pe(at|kt|e,n,!0)}function we(n,e=!0){return Pe(at|ee,n,!0,e)}function Fn(n){var e=n.teardown;if(e!==null){const t=Ve,s=b;ln(!0),oe(null);try{e.call(null)}finally{ln(t),oe(s)}}}function qn(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){var s=t.next;(t.f&Ie)!==0?t.parent=null:j(t,e),t=s}}function Fs(n){for(var e=n.first;e!==null;){var t=e.next;(e.f&ee)===0&&j(e),e=t}}function j(n,e=!0){var t=!1;(e||(n.f&_n)!==0)&&n.nodes_start!==null&&(qs(n.nodes_start,n.nodes_end),t=!0),qn(n,e&&!t),st(n,0),W(n,ut);var s=n.transitions;if(s!==null)for(const r of s)r.stop();Fn(n);var i=n.parent;i!==null&&i.first!==null&&$n(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function qs(n,e){for(;n!==null;){var t=n===e?null:ft(n);n.remove(),n=t}}function $n(n){var e=n.parent,t=n.prev,s=n.next;t!==null&&(t.next=s),s!==null&&(s.prev=t),e!==null&&(e.first===n&&(e.first=s),e.last===n&&(e.last=t))}function Be(n,e){var t=[];Dt(n,t,!0),Bn(t,()=>{j(n),e&&e()})}function Bn(n,e){var t=n.length;if(t>0){var s=()=>--t||e();for(var i of n)i.out(s)}else e()}function Dt(n,e,t){if((n.f&Z)===0){if(n.f^=Z,n.transitions!==null)for(const o of n.transitions)(o.is_global||t)&&e.push(o);for(var s=n.first;s!==null;){var i=s.next,r=(s.f&Le)!==0||(s.f&ee)!==0;Dt(s,e,r?t:!1),s=i}}}function je(n){On(n,!0)}function On(n,e){if((n.f&Z)!==0){n.f^=Z,(n.f&B)===0&&(n.f^=B),He(n)&&(W(n,X),pt(n));for(var t=n.first;t!==null;){var s=t.next,i=(t.f&Le)!==0||(t.f&ee)!==0;On(t,i?e:!1),t=s}if(n.transitions!==null)for(const r of n.transitions)(r.is_global||e)&&r.in()}}let et=[];function $s(){var n=et;et=[],es(n)}function Dn(n){et.length===0&&queueMicrotask($s),et.push(n)}let Ge=!1,Pt=!1,tt=null,pe=!1,Ve=!1;function ln(n){Ve=n}let Ue=[];let b=null,Y=!1;function oe(n){b=n}let T=null;function Me(n){T=n}let z=null;function Ln(n){b!==null&&b.f&St&&(z===null?z=[n]:z.push(n))}let E=null,D=0,R=null;function Bs(n){R=n}let Nn=1,nt=0,ie=!1;function Rn(){return++Nn}function He(n){var f;var e=n.f;if((e&X)!==0)return!0;if((e&ge)!==0){var t=n.deps,s=(e&N)!==0;if(t!==null){var i,r,o=(e&Ze)!==0,h=s&&T!==null&&!ie,a=t.length;if(o||h){var l=n,c=l.parent;for(i=0;i<a;i++)r=t[i],(o||!((f=r==null?void 0:r.reactions)!=null&&f.includes(l)))&&(r.reactions??(r.reactions=[])).push(l);o&&(l.f^=Ze),h&&c!==null&&(c.f&N)===0&&(l.f^=N)}for(i=0;i<a;i++)if(r=t[i],He(r)&&In(r),r.wv>n.wv)return!0}(!s||T!==null&&!ie)&&W(n,B)}return!1}function Os(n,e){for(var t=e;t!==null;){if((t.f&Qe)!==0)try{t.fn(n);return}catch{t.f^=Qe}t=t.parent}throw Ge=!1,n}function an(n){return(n.f&ut)===0&&(n.parent===null||(n.parent.f&Qe)===0)}function dt(n,e,t,s){if(Ge){if(t===null&&(Ge=!1),an(e))throw n;return}if(t!==null&&(Ge=!0),Os(n,e),an(e))throw n}function Vn(n,e,t=!0){var s=n.reactions;if(s!==null)for(var i=0;i<s.length;i++){var r=s[i];z!=null&&z.includes(n)||((r.f&H)!==0?Vn(r,e,!1):e===r&&(t?W(r,X):(r.f&B)!==0&&W(r,ge),pt(r)))}}function Hn(n){var p;var e=E,t=D,s=R,i=b,r=ie,o=z,h=m,a=Y,l=n.f;E=null,D=0,R=null,ie=(l&N)!==0&&(Y||!pe||b===null),b=(l&(ee|Ie))===0?n:null,z=null,rn(n.ctx),Y=!1,nt++,n.f|=St;try{var c=(0,n.fn)(),f=n.deps;if(E!==null){var d;if(st(n,D),f!==null&&D>0)for(f.length=D+E.length,d=0;d<E.length;d++)f[D+d]=E[d];else n.deps=f=E;if(!ie)for(d=D;d<f.length;d++)((p=f[d]).reactions??(p.reactions=[])).push(n)}else f!==null&&D<f.length&&(st(n,D),f.length=D);if(ht()&&R!==null&&!Y&&f!==null&&(n.f&(H|ge|X))===0)for(d=0;d<R.length;d++)Vn(R[d],n);return i!==null&&i!==n&&(nt++,R!==null&&(s===null?s=R:s.push(...R))),c}finally{E=e,D=t,R=s,b=i,ie=r,z=o,rn(h),Y=a,n.f^=St}}function Ds(n,e){let t=e.reactions;if(t!==null){var s=Kn.call(t,n);if(s!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[s]=t[i],t.pop())}}t===null&&(e.f&H)!==0&&(E===null||!E.includes(e))&&(W(e,ge),(e.f&(N|Ze))===0&&(e.f^=Ze),Mn(e),st(e,0))}function st(n,e){var t=n.deps;if(t!==null)for(var s=e;s<t.length;s++)Ds(n,t[s])}function Lt(n){var e=n.f;if((e&ut)===0){W(n,B);var t=T,s=m,i=pe;T=n,pe=!0;try{(e&kt)!==0?Fs(n):qn(n),Fn(n);var r=Hn(n);n.teardown=typeof r=="function"?r:null,n.wv=Nn;var o=n.deps,h;nn&&cs&&n.f&X}catch(a){dt(a,n,t,s||n.ctx)}finally{pe=i,T=t}}}function Ls(){try{as()}catch(n){if(tt!==null)dt(n,tt,null);else throw n}}function Ns(){var n=pe;try{var e=0;for(pe=!0;Ue.length>0;){e++>1e3&&Ls();var t=Ue,s=t.length;Ue=[];for(var i=0;i<s;i++){var r=Vs(t[i]);Rs(r)}qe.clear()}}finally{Pt=!1,pe=n,tt=null}}function Rs(n){var e=n.length;if(e!==0)for(var t=0;t<e;t++){var s=n[t];if((s.f&(ut|Z))===0)try{He(s)&&(Lt(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null?$n(s):s.fn=null))}catch(i){dt(i,s,null,s.ctx)}}}function pt(n){Pt||(Pt=!0,queueMicrotask(Ns));for(var e=tt=n;e.parent!==null;){e=e.parent;var t=e.f;if((t&(Ie|ee))!==0){if((t&B)===0)return;e.f^=B}}Ue.push(e)}function Vs(n){for(var e=[],t=n;t!==null;){var s=t.f,i=(s&(ee|Ie))!==0,r=i&&(s&B)!==0;if(!r&&(s&Z)===0){if((s&gn)!==0)e.push(t);else if(i)t.f^=B;else try{He(t)&&Lt(t)}catch(a){dt(a,t,null,t.ctx)}var o=t.first;if(o!==null){t=o;continue}}var h=t.parent;for(t=t.next;t===null&&h!==null;)t=h.next,h=h.parent}return e}function M(n){var e=n.f,t=(e&H)!==0;if(b!==null&&!Y){if(!(z!=null&&z.includes(n))){var s=b.deps;n.rv<nt&&(n.rv=nt,E===null&&s!==null&&s[D]===n?D++:E===null?E=[n]:(!ie||!E.includes(n))&&E.push(n))}}else if(t&&n.deps===null&&n.effects===null){var i=n,r=i.parent;r!==null&&(r.f&N)===0&&(i.f^=N)}return t&&(i=n,He(i)&&In(i)),Ve&&qe.has(n)?qe.get(n):n.v}function Nt(n){var e=Y;try{return Y=!0,n()}finally{Y=e}}const Hs=-7169;function W(n,e){n.f=n.f&Hs|e}const Ws=["touchstart","touchmove"];function Ys(n){return Ws.includes(n)}const Wn=new Set,Ct=new Set;function Rt(n){for(var e=0;e<n.length;e++)Wn.add(n[e]);for(var t of Ct)t(n)}function Xe(n){var A;var e=this,t=e.ownerDocument,s=n.type,i=((A=n.composedPath)==null?void 0:A.call(n))||[],r=i[0]||n.target,o=0,h=n.__root;if(h){var a=i.indexOf(h);if(a!==-1&&(e===document||e===window)){n.__root=e;return}var l=i.indexOf(e);if(l===-1)return;a<=l&&(o=a)}if(r=i[o]||n.target,r!==e){Qn(n,"currentTarget",{configurable:!0,get(){return r||t}});var c=b,f=T;oe(null),Me(null);try{for(var d,p=[];r!==null;){var v=r.assignedSlot||r.parentNode||r.host||null;try{var S=r["__"+s];if(S!=null&&(!r.disabled||n.target===r))if(zt(S)){var[P,...C]=S;P.apply(r,[n,...C])}else S.call(r,n)}catch(y){d?p.push(y):d=y}if(n.cancelBubble||v===e||v===null)break;r=v}if(d){for(let y of p)queueMicrotask(()=>{throw y});throw d}}finally{n.__root=e,delete n.currentTarget,oe(c),Me(f)}}}function Xs(n){var e;e=document.head.appendChild(Re());try{Ce(()=>n(e),_n)}finally{}}function Gs(n){var e=document.createElement("template");return e.innerHTML=n,e.content}function it(n,e){var t=T;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function O(n,e){var t=(e&ws)!==0,s=(e&gs)!==0,i,r=!n.startsWith("<!>");return()=>{i===void 0&&(i=Gs(r?n:"<!>"+n),t||(i=Je(i)));var o=s||En?document.importNode(i,!0):i.cloneNode(!0);if(t){var h=Je(o),a=o.lastChild;it(h,a)}else it(o,o);return o}}function Q(n=""){{var e=Re(n+"");return it(e,e),e}}function Vt(){var n=document.createDocumentFragment(),e=document.createComment(""),t=Re();return n.append(e,t),it(e,t),n}function x(n,e){n!==null&&n.before(e)}function Oe(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t+"")}function Us(n,e){return Ks(n,e)}const _e=new Map;function Ks(n,{target:e,anchor:t,props:s={},events:i,context:r,intro:o=!0}){Is();var h=new Set,a=f=>{for(var d=0;d<f.length;d++){var p=f[d];if(!h.has(p)){h.add(p);var v=Ys(p);e.addEventListener(p,Xe,{passive:v});var S=_e.get(p);S===void 0?(document.addEventListener(p,Xe,{passive:v}),_e.set(p,1)):_e.set(p,S+1)}}};a(At(Wn)),Ct.add(a);var l=void 0,c=As(()=>{var f=t??e.appendChild(Re());return we(()=>{if(r){le({});var d=m;d.c=r}i&&(s.$$events=i),l=n(f,s)||{},r&&ae()}),()=>{var v;for(var d of h){e.removeEventListener(d,Xe);var p=_e.get(d);--p===0?(document.removeEventListener(d,Xe),_e.delete(d)):_e.set(d,p)}Ct.delete(a),f!==t&&((v=f.parentNode)==null||v.removeChild(f))}});return Qs.set(l,c),l}let Qs=new WeakMap;function Ht(n,e,[t,s]=[0,0]){var i=n,r=null,o=null,h=k,a=t>0?Le:0,l=!1;const c=(d,p=!0)=>{l=!0,f(p,d)},f=(d,p)=>{h!==(h=d)&&(h?(r?je(r):p&&(r=we(()=>p(i))),o&&Be(o,()=>{o=null})):(o?je(o):p&&(o=we(()=>p(i,[t+1,s]))),r&&Be(r,()=>{r=null})))};Ce(()=>{l=!1,e(c),l||f(null,null)},a)}function Wt(n,e){return e}function Zs(n,e,t,s){for(var i=[],r=e.length,o=0;o<r;o++)Dt(e[o].e,i,!0);var h=r>0&&i.length===0&&t!==null;if(h){var a=t.parentNode;Ps(a),a.append(t),s.clear(),ne(n,e[0].prev,e[r-1].next)}Bn(i,()=>{for(var l=0;l<r;l++){var c=e[l];h||(s.delete(c.k),ne(n,c.prev,c.next)),j(c.e,!h)}})}function Yt(n,e,t,s,i,r=null){var o=n,h={flags:e,items:new Map,first:null},a=(e&bn)!==0;if(a){var l=n;o=l.appendChild(Re())}var c=null,f=!1,d=bs(()=>{var p=t();return zt(p)?p:p==null?[]:At(p)});Ce(()=>{var p=M(d),v=p.length;f&&v===0||(f=v===0,Js(p,h,o,i,e,s,t),r!==null&&(v===0?c?je(c):c=we(()=>r(o)):c!==null&&Be(c,()=>{c=null})),M(d))})}function Js(n,e,t,s,i,r,o){var Zt,Jt,jt,en;var h=(i&ps)!==0,a=(i&(Ft|qt))!==0,l=n.length,c=e.items,f=e.first,d=f,p,v=null,S,P=[],C=[],A,y,_,I;if(h)for(I=0;I<l;I+=1)A=n[I],y=r(A,I),_=c.get(y),_!==void 0&&((Zt=_.a)==null||Zt.measure(),(S??(S=new Set)).add(_));for(I=0;I<l;I+=1){if(A=n[I],y=r(A,I),_=c.get(y),_===void 0){var Gn=d?d.e.nodes_start:t;v=ei(Gn,e,v,v===null?e.first:v.next,A,y,I,s,i,o),c.set(y,v),P=[],C=[],d=v.next;continue}if(a&&js(_,A,I,i),(_.e.f&Z)!==0&&(je(_.e),h&&((Jt=_.a)==null||Jt.unfix(),(S??(S=new Set)).delete(_))),_!==d){if(p!==void 0&&p.has(_)){if(P.length<C.length){var Ye=C[0],te;v=Ye.prev;var Qt=P[0],gt=P[P.length-1];for(te=0;te<P.length;te+=1)un(P[te],Ye,t);for(te=0;te<C.length;te+=1)p.delete(C[te]);ne(e,Qt.prev,gt.next),ne(e,v,Qt),ne(e,gt,Ye),d=Ye,v=gt,I-=1,P=[],C=[]}else p.delete(_),un(_,d,t),ne(e,_.prev,_.next),ne(e,_,v===null?e.first:v.next),ne(e,v,_),v=_;continue}for(P=[],C=[];d!==null&&d.k!==y;)(d.e.f&Z)===0&&(p??(p=new Set)).add(d),C.push(d),d=d.next;if(d===null)continue;_=d}P.push(_),v=_,d=_.next}if(d!==null||p!==void 0){for(var ze=p===void 0?[]:At(p);d!==null;)(d.e.f&Z)===0&&ze.push(d),d=d.next;var _t=ze.length;if(_t>0){var Un=(i&bn)!==0&&l===0?t:null;if(h){for(I=0;I<_t;I+=1)(jt=ze[I].a)==null||jt.measure();for(I=0;I<_t;I+=1)(en=ze[I].a)==null||en.fix()}Zs(e,ze,Un,c)}}h&&Dn(()=>{var tn;if(S!==void 0)for(_ of S)(tn=_.a)==null||tn.apply()}),T.first=e.first&&e.first.e,T.last=v&&v.e}function js(n,e,t,s){(s&Ft)!==0&&It(n.v,e),(s&qt)!==0?It(n.i,t):n.i=t}function ei(n,e,t,s,i,r,o,h,a,l){var c=(a&Ft)!==0,f=(a&vs)===0,d=c?f?Ms(i):$e(i):i,p=(a&qt)===0?o:$e(o),v={i:p,v:d,k:r,a:null,e:null,prev:t,next:s};try{return v.e=we(()=>h(n,d,p,l),Ss),v.e.prev=t&&t.e,v.e.next=s&&s.e,t===null?e.first=v:(t.next=v,t.e.next=v.e),s!==null&&(s.prev=v,s.e.prev=v.e),v}finally{}}function un(n,e,t){for(var s=n.next?n.next.e.nodes_start:t,i=e?e.e.nodes_start:t,r=n.e.nodes_start;r!==s;){var o=ft(r);i.before(r),r=o}}function ne(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function vt(n,e,...t){var s=n,i=lt,r;Ce(()=>{i!==(i=e())&&(r&&(j(r),r=null),r=we(()=>i(s,...t)))},Le)}function ti(n,e,t){var s=n,i,r;Ce(()=>{i!==(i=e())&&(r&&(Be(r),r=null),i&&(r=we(()=>t(s,i))))},Le)}const hn=[...` 	
\r\f \v\uFEFF`];function ni(n,e,t){var s=n==null?"":""+n;if(e&&(s=s?s+" "+e:e),t){for(var i in t)if(t[i])s=s?s+" "+i:i;else if(s.length)for(var r=i.length,o=0;(o=s.indexOf(i,o))>=0;){var h=o+r;(o===0||hn.includes(s[o-1]))&&(h===s.length||hn.includes(s[h]))?s=(o===0?"":s.substring(0,o))+s.substring(h+1):o=h}}return s===""?null:s}function si(n,e){return n==null?null:String(n)}function Xt(n,e,t,s,i,r){var o=n.__className;if(o!==t||o===void 0){var h=ni(t,s,r);h==null?n.removeAttribute("class"):n.className=h,n.__className=t}else if(r&&i!==r)for(var a in r){var l=!!r[a];(i==null||l!==!!i[a])&&n.classList.toggle(a,l)}return r}function Yn(n,e,t,s){var i=n.__style;if(i!==e){var r=si(e);r==null?n.removeAttribute("style"):n.style.cssText=r,n.__style=e}return s}const ii=Symbol("is custom element"),ri=Symbol("is html");function Fe(n,e,t,s){var i=oi(n);i[e]!==(i[e]=t)&&(e==="loading"&&(n[ss]=t),t==null?n.removeAttribute(e):typeof t!="string"&&li(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function oi(n){return n.__attributes??(n.__attributes={[ii]:n.nodeName.includes("-"),[ri]:n.namespaceURI===_s})}var fn=new Map;function li(n){var e=fn.get(n.nodeName);if(e)return e;fn.set(n.nodeName,e=[]);for(var t,s=n,i=Element.prototype;i!==s;){t=Zn(s);for(var r in t)t[r].set&&e.push(r);s=wn(s)}return e}function cn(n,e){return n===e||(n==null?void 0:n[ke])===e}function xt(n={},e,t,s){return Ot(()=>{var i,r;return ks(()=>{i=r,r=[],Nt(()=>{n!==t(...r)&&(e(n,...r),i&&cn(t(...i),n)&&e(null,...i))})}),()=>{Dn(()=>{r&&cn(t(...r),n)&&e(null,...r)})}}),n}const ai={get(n,e){let t=n.props.length;for(;t--;){let s=n.props[t];if(Ae(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(n,e,t){let s=n.props.length;for(;s--;){let i=n.props[s];Ae(i)&&(i=i());const r=de(i,e);if(r&&r.set)return r.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let s=n.props[t];if(Ae(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const i=de(s,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(n,e){if(e===ke||e===ns)return!1;for(let t of n.props)if(Ae(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props)if(Ae(t)&&(t=t()),!!t){for(const s in t)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(t))e.includes(s)||e.push(s)}return e}};function ui(...n){return new Proxy({props:n},ai)}function fe(n,e,t,s){var i;i=n[e];var r=s,o=!0,h=()=>(o&&(o=!1,r=s),r);i===void 0&&s!==void 0&&(i=h());var a;return a=()=>{var l=n[e];return l===void 0?h():(o=!0,l)},a}function Gt(n){m===null&&$t(),Ne&&m.l!==null?fi(m).m.push(n):kn(()=>{const e=Nt(n);if(typeof e=="function")return e})}function hi(n){m===null&&$t(),Gt(()=>()=>Nt(n))}function fi(n){var e=n.l;return e.u??(e.u={a:[],b:[],m:[]})}const ci="5";var vn;typeof window<"u"&&((vn=window.__svelte??(window.__svelte={})).v??(vn.v=new Set)).add(ci);ds();var di=O('<a target="_blank" rel="noopener noreferrer" class="svelte-o5z3n1"> </a>'),pi=O('<section class="page svelte-o5z3n1" id="current-page"><span class="title svelte-o5z3n1"> <!></span> <!></section>');function Ee(n,e){le(e,!0);let t=fe(e,"title",3,"Some Page"),s=fe(e,"style",3,""),i=fe(e,"extra",3,null);var r=pi(),o=$(r),h=$(o),a=q(h);{var l=f=>{var d=di(),p=$(d);re(()=>{Fe(d,"href",i().href),Oe(p,i().title)}),x(f,d)};Ht(a,f=>{i()&&f(l)})}var c=q(o,2);vt(c,()=>e.children??lt),re(()=>{Yn(r,s()),Oe(h,`${t()??""} `)}),x(n,r),ae()}var vi=O('<p>Welcome to the website!</p> <img src="https://picsum.photos/400/300" alt="Random" class="svelte-1yc2abm">',1);function wi(n){Ee(n,{title:"Home",children:(e,t)=>{var s=vi();x(e,s)},$$slots:{default:!0}})}var gi=O("<p>Page not found.</p>");function _i(n){Ee(n,{title:"Error 404",children:(e,t)=>{var s=gi();x(e,s)},$$slots:{default:!0}})}var mi=O('<iframe frameborder="0" title="Thesis PDF" class="svelte-gqw2wc"></iframe>');function yi(n){const e=`${We}/main.pdf`;Ee(n,{title:"Thesis",extra:{href:e,title:"Open in a new page →"},children:(t,s)=>{var i=mi();Fe(i,"src",e),x(t,i)},$$slots:{default:!0}})}var xi=O("<p>Cool.</p>");function bi(n){Ee(n,{title:"About",children:(e,t)=>{var s=xi();x(e,s)},$$slots:{default:!0}})}var Ti=O('<div class="list svelte-161iceo"></div>');function Mi(n){Ee(n,{title:"Examples",children:(e,t)=>{var s=Ti();Yt(s,5,()=>Xn,Wt,(i,r)=>{se(i,{get href(){return M(r).href},cssClass:"example-menu-item",children:(o,h)=>{var a=Q();re(()=>Oe(a,M(r).title)),x(o,a)},$$slots:{default:!0}})}),x(e,s)},$$slots:{default:!0}})}class u{constructor(e=0,t=0){this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}add(e){return new u(this.x+e.x,this.y+e.y)}addInPlace(e){return this.x+=e.x,this.y+=e.y,this}subtract(e){return new u(this.x-e.x,this.y-e.y)}subtractInPlace(e){return this.x-=e.x,this.y-=e.y,this}multiply(e){return new u(this.x*e,this.y*e)}multiplyInPlace(e){return this.x*=e,this.y*=e,this}scale(e){return new u(this.x*e.x,this.y*e.y)}lengthSquared(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.lengthSquared())}normalize(){const e=this.length();return e===0?new u(0,0):new u(this.x/e,this.y/e)}dot(e){return this.x*e.x+this.y*e.y}clone(){return new u(this.x,this.y)}static zero(){return new u(0,0)}static one(){return new u(1,1)}}const be=class be{constructor(e,t=u.zero(),s=new u(100,100),i=u.one(),r=new u(.5,.5),o=0,h=[]){this._parent=null,this._hasDefaultSize=!0,this.position=t,this.rotation=o,this._size=s,this._hasDefaultSize=s.x===100&&s.y===100,this.scale=i,this.pivot=r,this.renderFunction=e,this._children=h}get size(){return this._size}set size(e){this._size=e,this._hasDefaultSize=!1}append(...e){this._children.push(...e),e.forEach(t=>{t._parent=this})}get hasDefaultSize(){return this._hasDefaultSize}render(e,t=0){if(!(this._parent!==null&&t===0)){if(t>10){console.warn("CanvasObject: Maximum render depth exceeded, stopping rendering to prevent stack overflow.");return}if(e.save(),e.translate(this.position.x,this.position.y),e.scale(this.scale.x,this.scale.y),e.rotate(this.rotation),this.renderFunction(this,e),this._children.forEach(s=>{s.render(e,t+1)}),!be.debugMode){e.restore();return}e.fillStyle="#00ff00",e.fillRect(-2,-2,4,4),e.strokeStyle="#0000ff",e.lineWidth=1,e.strokeRect(-this.size.x*this.pivot.x,-this.size.y*this.pivot.y,this.size.x,this.size.y),e.restore()}}createCopy(e){const t=new be(this.renderFunction,this.position.clone(),this.size.clone(),this.scale.clone(),this.pivot.clone(),this.rotation);return e?t._children=this._children.map(s=>s.createCopy(!0)):t._children=[],t}static setDebugMode(e){be.debugMode=e}};be.debugMode=!1;let w=be;class g{static ellipse(e,t=null){return(s,i)=>{i.beginPath(),i.ellipse(-s.size.x*(s.pivot.x-.5),-s.size.y*(s.pivot.y-.5),s.size.x/2,s.size.y/2,0,0,Math.PI*2),i.fillStyle=e,i.fill(),t&&(i.strokeStyle=t,i.stroke())}}static rectangle(e,t=null){return(s,i)=>{i.beginPath(),i.rect(-s.size.x*s.pivot.x,-s.size.y*s.pivot.y,s.size.x,s.size.y),i.fillStyle=e,i.fill(),t&&(i.strokeStyle=t,i.stroke())}}static roundedRectangle(e,t=null,s=10){return(i,r)=>{r.beginPath(),r.roundRect(-i.size.x*i.pivot.x,-i.size.y*i.pivot.y,i.size.x,i.size.y,s),r.fillStyle=e,r.fill(),t&&(r.strokeStyle=t,r.stroke())}}static line(e,t=1){return(s,i)=>{const r=u.one().subtract(s.pivot);i.beginPath(),i.moveTo(-s.size.x*s.pivot.x,-s.size.y*s.pivot.y),i.lineTo(s.size.x*r.x,s.size.y*r.y),i.strokeStyle=e,i.lineWidth=t,i.stroke()}}static image(e){return(t,s)=>{e.isLoaded()&&s.drawImage(e.getImage(),-t.size.x*t.pivot.x,-t.size.y*t.pivot.y,t.size.x,t.size.y)}}static sprite(e,t=()=>0){return(s,i)=>{if(!e.isLoaded())return;const r=t();e.drawFrame(i,r,-s.size.x*s.pivot.x,-s.size.y*s.pivot.y,s.size.x,s.size.y)}}static staticText(e,t="16px monospace, Consolas",s="#000",i="left",r="top",o=!1){return g.dynamicText(()=>e,t,s,i,r,o)}static dynamicText(e,t="16px monospace, Consolas",s="#000",i="left",r="top",o=!1){return(h,a)=>{h.hasDefaultSize&&(h.size=u.one());let l=[],c=0;o?(l=e().split(`
`),c=parseInt(t)):l=[e()];for(let f=0;f<l.length;f++)a.font=t,a.fillStyle=s,a.textAlign=i,a.textBaseline=r,a.fillText(l[f],0,c*f)}}static plotFunction(e,t,s={lower:-5,upper:5},i={lower:-5,upper:5},r=.1,o=()=>0,h=1){return(a,l)=>{const c=new u((a.pivot.x-.5)*a.size.x,(a.pivot.y-.5)*a.size.y),f=new u(-a.size.x/2-c.x,-a.size.y/2-c.y),d=1-s.upper/(s.upper-s.lower);if(d>=0&&d<=1){l.beginPath(),l.moveTo(f.x+a.size.x*d,f.y),l.lineTo(f.x+a.size.x*d,f.y+a.size.y),l.strokeStyle="#000",l.lineWidth=2,l.stroke(),l.font="16px monospace, Consolas",l.fillStyle="#000",l.textAlign="left",l.textBaseline="top",l.fillText(i.upper.toString(),f.x+a.size.x*d+5,f.y),l.textAlign="left",l.textBaseline="bottom",l.fillText(i.lower.toString(),f.x+a.size.x*d+5,f.y+a.size.y);for(let y=Math.ceil(i.lower);y<=Math.floor(i.upper);y+=h){if(y===0)continue;const _=f.y+a.size.y*(1-(y-i.lower)/(i.upper-i.lower));l.beginPath(),l.moveTo(f.x,_),l.lineTo(f.x+a.size.x,_),l.strokeStyle="#00000044",l.lineWidth=2,l.stroke()}}const p=i.upper/(i.upper-i.lower);if(p>=0&&p<=1){l.beginPath(),l.moveTo(f.x,f.y+a.size.y*p),l.lineTo(f.x+a.size.x,f.y+a.size.y*p),l.strokeStyle="#000",l.lineWidth=2,l.stroke(),l.fillStyle="#000",l.textAlign="left",l.textBaseline="top",l.fillText(s.lower.toString(),f.x,f.y+a.size.y*p+5),l.textAlign="right",l.textBaseline="top",l.fillText(s.upper.toString(),f.x+a.size.x,f.y+a.size.y*p+5);for(let y=Math.ceil(s.lower);y<=Math.floor(s.upper);y+=h){if(y===0)continue;const _=f.x+a.size.x*((y-s.lower)/(s.upper-s.lower));l.beginPath(),l.moveTo(_,f.y),l.lineTo(_,f.y+a.size.y),l.strokeStyle="#00000044",l.lineWidth=2,l.stroke()}}l.beginPath();const v=a.size.x/(s.upper-s.lower),S=a.size.y/(i.upper-i.lower);for(let y=s.lower;y<=s.upper;y+=r){const _=t(y);l.lineTo(f.x+(y-s.lower)*v,f.y+a.size.y-(_-i.lower)*S)}const P=t(s.upper);l.lineTo(f.x+(s.upper-s.lower)*v,f.y+a.size.y-(P-i.lower)*S),l.strokeStyle="#ff5722",l.lineWidth=4,l.stroke();const C=o(),A=t(C);d>=0&&d<=1&&(l.beginPath(),l.ellipse(f.x+a.size.x*d+C*v,f.y+a.size.y*p-A*S,5,5,0,0,Math.PI*2),l.fillStyle="#f00",l.strokeStyle="#fff",l.lineWidth=2,l.fill(),l.stroke()),l.font="20px monospace, Consolas",l.fillStyle="#fff",l.textAlign="center",l.textBaseline="bottom",l.fillText(e,f.x+a.size.x/2,f.y)}}static axes(e,t,s,i=!0){return(r,o)=>{const h=new u(r.pivot.x*r.size.x,r.pivot.y*r.size.y);o.save(),o.translate(-h.x,-h.y);const a=e.x<0&&e.y>0?-e.x/(e.y-e.x):0;let l=t.x<0&&t.y>0?-t.x/(t.y-t.x):0;i&&(l=1-l);const c=new u(r.size.x/(e.y-e.x)*s,r.size.y/(t.y-t.x)*s),f=a*r.size.x,d=l*r.size.y;o.strokeStyle="#00000088",o.lineWidth=1,o.beginPath();for(let p=Math.ceil(e.x/s)*c.x;p<=r.size.x-f+.1;p+=c.x)o.moveTo(p+f,0),o.lineTo(p+f,r.size.y);for(let p=Math.ceil(-t.y/s)*c.y;p<=r.size.y-d+.1;p+=c.y)o.moveTo(0,p+d),o.lineTo(r.size.x,p+d);o.stroke(),o.strokeStyle="#f00",o.fillStyle="#f00",o.lineWidth=2,o.beginPath(),o.moveTo(0,l*r.size.y),o.lineTo(r.size.x-20,l*r.size.y),o.stroke(),o.beginPath(),o.lineTo(r.size.x-20,l*r.size.y+5),o.lineTo(r.size.x-20,l*r.size.y-5),o.lineTo(r.size.x,l*r.size.y),o.fill(),o.font="16px monospace, Consolas",o.textAlign="left",o.textBaseline="top",o.fillText(e.x.toString(),5,l*r.size.y+5),o.textAlign="right",o.fillText(e.y.toString(),r.size.x-5,l*r.size.y+5),o.fillStyle="#fff",o.textAlign="left",o.textBaseline="bottom",o.fillText(`${Math.min(Math.max(e.x,0),e.y).toString()};${Math.min(Math.max(t.x,0),t.y).toString()}`,a*r.size.x+5,l*r.size.y-5),o.strokeStyle="#0f0",o.fillStyle="#0f0",o.beginPath(),i?(o.moveTo(a*r.size.x,r.size.y-20),o.lineTo(a*r.size.x,0),o.stroke(),o.beginPath(),o.lineTo(a*r.size.x+5,20),o.lineTo(a*r.size.x-5,20),o.lineTo(a*r.size.x,0)):(o.moveTo(a*r.size.x,0),o.lineTo(a*r.size.x,r.size.y-20),o.stroke(),o.beginPath(),o.lineTo(a*r.size.x+5,r.size.y-20),o.lineTo(a*r.size.x-5,r.size.y-20),o.lineTo(a*r.size.x,r.size.y)),o.fill(),o.textAlign="right",o.textBaseline="top",o.fillText(i?t.y.toString():t.x.toString(),a*r.size.x-5,5),o.textBaseline="bottom",o.fillText(i?t.x.toString():t.y.toString(),a*r.size.x-5,r.size.y-5),o.restore()}}}class G{constructor(e,t,s){this.wrapper=e,this.context=t,this.time=s,this.objects={}}render(){}renderInOrder(...e){for(const t of e)t.render(this.context)}*sequence(){}static provide(){return(e,t,s)=>new this(e,t,s)}getFileInfo(){return"unknown"}}class Si{constructor(){this.delta=0,this.now=0}}class Ii extends G{constructor(e,t,s){super(e,t,s);const i=e.resolution;this.halfResolution=i.multiply(.5),this.objects={text:new w(g.staticText("Please provide a scene implementation.","32px Consolas, monospace","white","center","middle"),this.halfResolution,i)}}render(){this.objects.text.rotation=Math.sin(this.time.now*5)*Math.PI*.025,this.objects.text.render(this.context)}}const ot=class ot{constructor(e,t,s){if(this._time=new Si,this._startTime=0,this._resolution=new u(1280,720),this._resolutionScale=1,this._dpi=globalThis.devicePixelRatio||2,this.backgroundColor="#444",this._scene=null,this._glHandler=null,this._fpsData=new Float32Array(201),this._fpsAccumulative=0,this._fpsIndex=0,this._fpsBounds={lower:0,upper:60},this._topFps=60,this._bottomFps=-1,this._renderCallbackHandle=null,this._fpsPlot=new w(g.plotFunction("",r=>this._fpsData[(r+this._fpsIndex)%201],{lower:0,upper:200},this._fpsBounds,1,()=>200,20),new u(970,10),new u(300,65),new u(1,1),new u(0,0)),this._instanceId=ot.IdCounter++,this._startTime=-1,this._canvas=e,this._wrapperElement=t,this._context=e.getContext("2d"),this._scene=s(this,this._context,this._time),this._scene===null&&(this._scene=new Ii(this,this._context,this._time)),this._sequenceGenerator=this._scene.sequence(),!this._context)throw new Error("Failed to get 2D context from canvas");this._renderCallbackHandle=globalThis.requestAnimationFrame(this.onRenderFrame.bind(this));const i=()=>{this._canvas.width=this._wrapperElement.clientWidth*this._dpi*this._resolutionScale,this._canvas.height=this._wrapperElement.clientHeight*this._dpi*this._resolutionScale};globalThis.addEventListener("resize",i.bind(this)),i()}get resolution(){return this._resolution}get clientSize(){return new u(this._wrapperElement.clientWidth,this._wrapperElement.clientHeight)}onRenderFrame(e){const t=e/1e3;this._startTime<0&&(this._startTime=t),this._time.delta=t-this._startTime-this._time.now,this._time.now=t-this._startTime,this.setupTransformations(),this._scene.render(),this._sequenceGenerator.next(),this.drawDebugInfo(),this._renderCallbackHandle=globalThis.requestAnimationFrame(this.onRenderFrame.bind(this))}setupTransformations(){this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.fillStyle="#000",this._context.fillRect(0,0,this._canvas.width,this._canvas.height);const e=this._canvas.width/this._resolution.x,t=this._canvas.height/this._resolution.y,s=Math.min(e,t),i=(this._canvas.width-this._resolution.x*s)/2,r=(this._canvas.height-this._resolution.y*s)/2;this._context.setTransform(s,0,0,s,i,r),this._context.fillStyle=this.backgroundColor,this._context.fillRect(0,0,this._resolution.x,this._resolution.y),this._context.strokeStyle="white",this._context.strokeRect(0,0,this._resolution.x,this._resolution.y)}drawDebugInfo(){var t;if(w.debugMode===!1)return;this._context.fillStyle="#00000044",this._context.fillRect(0,0,1280,100),this._context.fillStyle="white",this._context.font="16px Consolas, monospace",this._context.textAlign="left",this._context.textBaseline="alphabetic",this._context.fillText(`(${this._instanceId}) Debug Info`,10,20),this._context.beginPath(),this._context.moveTo(10,30),this._context.lineTo(960,30),this._context.strokeStyle="white",this._context.lineWidth=1,this._context.lineCap="butt",this._context.stroke(),this._context.fillText(`Now       : ${this._time.now.toFixed(2)}s`,10,50),this._context.fillText(`Resolution: ${this._canvas.width}x${this._canvas.height}`,10,70),this._context.fillText(`Scene     : ${(t=this._scene)==null?void 0:t.getFileInfo()}`,10,90);const e=1/this._time.delta;this._context.textAlign="right",this._context.fillText(`FPS: ${e.toFixed(2).padStart(6,"0")}`,960,20),this._context.fillText(`Avg: ${(this._fpsAccumulative/200).toFixed(2).padStart(6,"0")}`,960,50),this._context.fillText(`Max: ${this._topFps.toFixed(2).padStart(6,"0")}`,960,70),this._context.fillText(`Min: ${this._bottomFps.toFixed(2).padStart(6,"0")}`,960,90),!(isNaN(e)||isFinite(e)===!1)&&(this._topFps=Math.max(this._topFps,e),this._bottomFps=this._bottomFps<0?e:Math.min(this._bottomFps,e),this._fpsAccumulative+=e,this._fpsIndex>=201&&(this._fpsAccumulative-=this._fpsData[this._fpsIndex%201]),w.debugMode=!1,this._fpsData[this._fpsIndex++%201]=e,this._fpsBounds.upper=Math.max(this._fpsBounds.upper,Math.ceil(e/10+1)*10),this._fpsPlot.render(this._context),w.debugMode=!0)}getTextSize(e){const t=this._context.measureText(e);return new u(t.actualBoundingBoxLeft+t.actualBoundingBoxRight,t.actualBoundingBoxAscent+t.actualBoundingBoxDescent)}getWebGLContext(){if(this._glHandler)return this._glHandler._glContext;const e=document.createElement("canvas");if(e.classList.add("webgl-canvas"),this._glHandler={_glCanvas:e,_glContext:e.getContext("webgl2"),_glResolution:new u(1280,720)},!this._glHandler._glContext)return console.error("WebGL context is not available."),null;const t=()=>{this._glHandler._glCanvas.width=this._wrapperElement.clientWidth,this._glHandler._glCanvas.height=this._wrapperElement.clientHeight;const s=this._wrapperElement.clientWidth/this._resolution.x,i=this._wrapperElement.clientHeight/this._resolution.y,r=Math.min(s,i),o=(this._wrapperElement.clientWidth-this._resolution.x*r)/2,h=(this._wrapperElement.clientHeight-this._resolution.y*r)/2;this._glHandler._glResolution.x=this._resolution.x*r,this._glHandler._glResolution.y=this._resolution.y*r,this._glHandler._glContext.viewport(o,h,this._resolution.x*r,this._resolution.y*r)};return globalThis.addEventListener("resize",t.bind(this)),setTimeout(t.bind(this),1),this._wrapperElement.insertBefore(this._glHandler._glCanvas,this._canvas),this._glHandler._glContext}destroy(){this._renderCallbackHandle&&globalThis.cancelAnimationFrame(this._renderCallbackHandle),this._scene&&console.log(`CanvasWrapper (${this._instanceId}) with scene "${this._scene.getFileInfo().split("/").pop()}" destroyed.`)}};ot.IdCounter=0;let Et=ot;var Pi=()=>w.setDebugMode(!w.debugMode),Ci=O('<div class="canvas-wrapper svelte-2j3np0"><button class="fullscreen svelte-2j3np0"><span>⛶</span></button> <button class="debugMode svelte-2j3np0"><span>🛠️</span></button> <canvas width="200" height="100"></canvas></div>');function Ei(n,e){le(e,!0);let t=e.scene||(()=>null),s,i,r,o,h=V(!1);const a=()=>{document.fullscreenElement||F(h,!1)};Gt(()=>{o=new Et(s,i,t),r.addEventListener("click",()=>{if(document.fullscreenElement){document.exitFullscreen().catch(p=>{console.error("Failed to exit fullscreen mode:",p)}),F(h,!1);return}i.requestFullscreen().catch(p=>{console.error("Failed to enter fullscreen mode:",p)}),F(h,!0)}),document.addEventListener("fullscreenchange",a)}),hi(()=>{o.destroy(),document.removeEventListener("fullscreenchange",a)});var l=Ci(),c=$(l);xt(c,p=>r=p,()=>r);var f=q(c,2);f.__click=[Pi];var d=q(f,2);xt(d,p=>s=p,()=>s),xt(l,p=>i=p,()=>i),re(()=>Xt(d,1,`canvas ${M(h)?"fullscreen":""}`,"svelte-2j3np0")),x(n,l),ae()}Rt(["click"]);var zi=O('<button role="tab"> </button>'),Ai=O('<div class="tabs"><div class="tab-buttons svelte-1491n74" role="tablist"></div> <div class="tab-contents svelte-1491n74"><!></div></div>');function ki(n,e){le(e,!0);let t=K([]),s=V(K(parseInt(new URL(window.location.href).searchParams.get("tab")||"0",10)));ys("tabs",{registerTab:a=>(t.push(a),t.length-1),activeTab:()=>M(s)}),kn(()=>{const a=new URL(window.location.href);a.searchParams.set("tab",M(s).toString()),window.history.replaceState({},"",a.toString())});var i=Ai(),r=$(i);Yt(r,21,()=>t,Wt,(a,l,c)=>{var f=zi();f.__click=()=>F(s,c,!0);let d;var p=$(f);re(v=>{d=Xt(f,1,"svelte-1491n74",null,d,v),Oe(p,M(l).title)},[()=>({active:M(s)===c})]),x(a,f)});var o=q(r,2),h=$(o);vt(h,()=>e.children??lt),x(n,i),ae()}Rt(["click"]);var Fi=O('<div class="tab-panel svelte-fai8lk" role="tabpanel"><!></div>');function qi(n,e){le(e,!0);const{registerTab:t,activeTab:s}=ms("tabs");let i=V(-1);Gt(()=>{F(i,t({title:e.title}),!0)});var r=Vt(),o=ct(r);{var h=a=>{var l=Fi(),c=$(l);vt(c,()=>e.children),x(a,l)};Ht(o,a=>{M(i)===s()&&a(h)})}x(n,r),ae()}function $i(n,e){le(e,!0),Ee(n,{get title(){return e.title},children:(t,s)=>{ki(t,{children:(i,r)=>{var o=Vt(),h=ct(o);Yt(h,17,()=>e.pages,Wt,(a,l)=>{qi(a,{get title(){return M(l).name},children:(c,f)=>{Ei(c,{get scene(){return M(l).scene}})},$$slots:{default:!0}})}),x(i,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),ae()}class Ut{constructor(e){this.time=e}}class J{static*run(e){for(e.start();!e.tick();)yield}static*runTogether(e){e.forEach(s=>s.start());let t;do t=e.map(s=>s.tick()),yield;while(t.some(s=>!s))}}class wt extends Ut{constructor(e,t){super(e),this.startTime=0,this.endTime=0,this.duration=0,this.finished=!0,this.duration=t}start(){this.startTime=this.time.now,this.endTime=this.startTime+this.duration,this.finished=!1}tick(){return this.finished?!0:(this.time.now>=this.endTime&&(this.finished=!0),this.finished)}}class ve extends Ut{constructor(e,t,s){super(e),this.startTime=0,this.endTime=0,this.finished=!0,this.setter=t,this.options=s,this.options.easing=s.easing??(i=>i)}start(){this.startTime=this.time.now,this.endTime=this.startTime+this.options.duration,this.finished=!1,this.setter(this.options.startValue)}tick(){if(this.finished)return!0;const e=this.time.now,t=e-this.startTime,s=Math.min(t/this.options.duration,1),i=this.options.easing(s),r=this.options.startValue+(this.options.endValue-this.options.startValue)*i;return this.setter(r),e>=this.endTime&&(this.finished=!0,this.setter(this.options.endValue)),this.finished}get progress(){if(this.finished)return 1;const t=this.time.now-this.startTime;return Math.min(t/this.options.duration,1)}reverse(){const e=this.options.startValue;this.options.startValue=this.options.endValue,this.options.endValue=e}}class L{static linear(e){return e}static easeInQuad(e){return e*e}static easeOutQuad(e){return e*(2-e)}static easeInOutQuad(e){return e<.5?2*e*e:-1+(4-2*e)*e}static easeInCubic(e){return e*e*e}static easeOutCubic(e){return 1-Math.pow(1-e,3)}static easeInOutCubic(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}static easeInElastic(e){const t=2*Math.PI/3;return e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*t)}static easeOutElastic(e){const t=2*Math.PI/3;return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*t)+1}static easeInOutElastic(e){const t=2*Math.PI/4.5;return e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*t))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*t)/2+1}}class xe extends Ut{constructor(e,t,s,i){super(e),this.currentIndex=0,this.values=s,this.interpolator=new ve(e,t,{startValue:s[0],endValue:s[1],duration:i.duration,easing:i.easing}),this.endsOnStart=i.loops??!1}start(){this.interpolator.start(),this.currentIndex=0,this.interpolator.options.startValue=this.values[0],this.interpolator.options.endValue=this.values[1]}tick(){return this.currentIndex>=this.values.length-(this.endsOnStart?0:1)?!0:(this.interpolator.tick()&&(this.currentIndex++,this.currentIndex<this.values.length&&(this.interpolator.options.startValue=this.values[this.currentIndex],this.interpolator.options.endValue=this.values[(this.currentIndex+1)%this.values.length],this.interpolator.start())),!1)}}class Bi extends G{getFileInfo(){return"src/rendering/scenes/basics/CoordinateSystems.ts"}constructor(e,t,s){super(e,t,s),this.objects={screenSpace:new w(g.axes(new u(0,1280),new u(0,720),80,!1),new u(40,40),new u(1200,640),new u(1,1),new u(0,0)),ball:new w(g.ellipse("#888","#000"),new u(340,290),new u(50,50)),hat:new w(g.rectangle("#f00","#000"),new u(0,-30),new u(25,25)),localSpace:new w(g.axes(new u(-100,100),new u(-100,100),20,!1),new u(0,0),new u(200,200))},this.objects.ball.append(this.objects.hat),this.objects.ball.append(this.objects.localSpace),this.sequencers={timer:new wt(s,1),interpolator:new ve(s,i=>this.objects.ball.position.x=i,{startValue:320,endValue:960,duration:.5,easing:L.easeInOutCubic})}}*sequence(){for(;;)yield*J.run(this.sequencers.interpolator),this.sequencers.interpolator.reverse(),yield*J.run(this.sequencers.timer)}render(){this.objects.screenSpace.render(this.context),this.objects.ball.render(this.context),this.context.fillStyle="#fff",this.context.font="20px Arial",this.context.textAlign="center",this.context.textBaseline="top",this.context.fillText(`Ball Position: (${this.objects.ball.position.x.toFixed(2)}, ${this.objects.ball.position.y.toFixed(2)})`,this.wrapper.resolution.x/2,this.wrapper.resolution.y-30)}}class Oi extends G{getFileInfo(){return"src/rendering/scenes/SimpleFunctional.ts"}constructor(e,t,s){super(e,t,s),this.objects={xPlot:new w(g.plotFunction("f(x, α, t) = cos(α + t)",i=>Math.cos(i+s.now),{lower:-1,upper:5},{lower:-2,upper:2},.1),new u(950,240),new u(300,200),new u(1,1),new u(.5,.5),0),yPlot:new w(g.plotFunction("f(y, α, t) = sin(α + t)",i=>Math.sin(i+s.now),{lower:-1,upper:5},{lower:-2,upper:2},.1),new u(950,480),new u(300,200),new u(1,1),new u(.5,.5),0),pathCircle:new w(g.ellipse("transparent","#000"),new u(350,360),new u(400,400),new u(1,1),new u(.5,.5),0),circle:new w(g.ellipse("#ff5722","#ff8a50"),new u(350,360),new u(50,50),new u(1,1),new u(.5,.5),0)}}render(){this.objects.circle.position=new u(350+200*Math.cos(this.time.now),360+200*Math.sin(this.time.now)),this.context.lineWidth=2,this.renderInOrder(this.objects.pathCircle,this.objects.xPlot,this.objects.yPlot,this.objects.circle)}}class Di extends G{getFileInfo(){return"src/rendering/scenes/SimpleInterpolation.ts"}constructor(e,t,s){super(e,t,s),this.dotPositions={ballA:0,ballB:0,ballC:0},this.objects={ballA:new w(g.ellipse("#ff5722","#ff0000"),new u(340,360),new u(50,50),new u(1,1),new u(.5,.5),0),ballB:new w(g.ellipse("#57ff22","#00ff22"),new u(640,360),new u(50,50),new u(1,1),new u(.5,.5),0),ballC:new w(g.ellipse("#2257ff","#2200ff"),new u(940,360),new u(50,50),new u(1,1),new u(.5,.5),0),easingPlotA:new w(g.plotFunction("easeInQuad: t ^ 2",L.easeInQuad,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballA),new u(340,150),new u(200,200),new u(1,1),new u(.5,.5),0),easingPlotB:new w(g.plotFunction("easeOutQuad: t * (2 - t)",L.easeOutQuad,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballB),new u(640,150),new u(200,200),new u(1,1),new u(.5,.5),0),easingPlotC:new w(g.plotFunction("easeInOutElastic: <...>",L.easeInOutElastic,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballC),new u(940,150),new u(200,200),new u(1,1),new u(.5,.5),0)},this.sequencers={ballAInterpolator:new ve(s,i=>{this.objects.ballA.position.y=i},{startValue:360,endValue:600,duration:1,easing:i=>i*i}),ballBInterpolator:new ve(s,i=>{this.objects.ballB.position.y=i},{startValue:360,endValue:600,duration:1,easing:i=>1-Math.pow(1-i,2)}),ballCInterpolator:new ve(s,i=>{this.objects.ballC.position.y=i},{startValue:360,endValue:600,duration:1,easing:L.easeInOutElastic}),timer:new wt(s,.5)}}*sequence(){for(;;)yield*J.runTogether([this.sequencers.ballAInterpolator,this.sequencers.ballBInterpolator,this.sequencers.ballCInterpolator]),yield*J.run(this.sequencers.timer),this.sequencers.ballAInterpolator.reverse(),this.sequencers.ballBInterpolator.reverse(),this.sequencers.ballCInterpolator.reverse()}render(){this.context.strokeStyle="#222",this.context.lineWidth=16,this.context.lineCap="round",this.context.beginPath(),this.context.moveTo(340,360),this.context.lineTo(340,600),this.context.moveTo(640,360),this.context.lineTo(640,600),this.context.moveTo(940,360),this.context.lineTo(940,600),this.context.stroke(),this.context.lineWidth=1,this.dotPositions.ballA=this.sequencers.ballAInterpolator.progress,this.dotPositions.ballB=this.sequencers.ballBInterpolator.progress,this.dotPositions.ballC=this.sequencers.ballCInterpolator.progress,Object.keys(this.objects).forEach(e=>{this.objects[e].render(this.context)})}}class Li extends G{getFileInfo(){return"src/rendering/scenes/SimpleSequence.ts"}constructor(e,t,s){super(e,t,s),this.rectPath=[new u(160,160),new u(560,160),new u(560,560),new u(160,560)],this.polyPath=[new u(720,260),new u(920,160),new u(1120,260),new u(720,460),new u(920,560),new u(1120,460)],this.objects={circleA:new w(g.ellipse("#ff5722","#ff0000"),new u(340,360),new u(50,50),new u(1,1),new u(.5,.5),0),circleB:new w(g.ellipse("#ff5722","#ff0000"),new u(720,360),new u(50,50),new u(1,1),new u(.5,.5),0),path:new w(g.roundedRectangle("#00000000","#000",8),new u(360,360),new u(400,400))},this.sequencers={sequenceAX:new xe(this.time,i=>this.objects.circleA.position.x=i,this.rectPath.map(i=>i.x),{duration:.75,easing:L.linear,loops:!0}),sequenceAY:new xe(this.time,i=>this.objects.circleA.position.y=i,this.rectPath.map(i=>i.y),{duration:.75,easing:L.linear,loops:!0}),sequenceBX:new xe(this.time,i=>this.objects.circleB.position.x=i,this.polyPath.map(i=>i.x),{duration:.5,easing:L.easeInOutCubic,loops:!0}),sequenceBY:new xe(this.time,i=>this.objects.circleB.position.y=i,this.polyPath.map(i=>i.y),{duration:.5,easing:L.easeInOutCubic,loops:!0})}}render(){this.context.beginPath(),this.context.moveTo(this.polyPath[0].x,this.polyPath[0].y);for(let e=1;e<this.polyPath.length;e++)this.context.lineTo(this.polyPath[e].x,this.polyPath[e].y);this.context.closePath(),this.context.strokeStyle="#000",this.context.lineWidth=2,this.context.stroke(),this.renderInOrder(this.objects.path,this.objects.circleA,this.objects.circleB)}*sequence(){for(;;)yield*J.runTogether([this.sequencers.sequenceAX,this.sequencers.sequenceAY,this.sequencers.sequenceBX,this.sequencers.sequenceBY])}}const ue=class ue{constructor(e){this.loaded=!1,this.size=new u(-1,-1);const t=We+e;if(this.image=ue.cache.get(t)||new Image,!ue.cache.has(t))this.image.src=t,ue.cache.set(t,this.image);else{this.loaded=!0;const s=ue.cache.get(t);this.size.set(s.width,s.height)}this.image.onload=()=>{this.loaded=!0,this.size.set(this.image.width,this.image.height)}}isLoaded(){return this.loaded}getImage(){return this.loaded||console.warn(`Image at ${this.image.src} is not loaded yet.`),this.image}};ue.cache=new Map;let rt=ue;const he=class he extends rt{constructor(e,t,s,i=t*s){super(e),this.framesX=t,this.framesY=s,this.frameCount=i}drawFrame(e,t,s,i,r,o){if(!this.isLoaded()){console.warn(`Spritesheet at ${this.image.src} is not loaded yet.`);return}const h=t%this.frameCount,a=this.image.width/this.framesX,l=this.image.height/this.framesY,c=h%this.framesX*a,f=Math.floor(h/this.framesX)*l;e.drawImage(this.image,c+he.BIAS,f+he.BIAS,a-he.BIAS*2,l-he.BIAS*2,s,i,r,o)}};he.BIAS=.5;let Te=he;class Ni{constructor(e,t){this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=t,this.context=this.canvas.getContext("2d")}getCanvas(){return this.canvas}getContext(){return this.context}get imageData(){return this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}set imageData(e){this.context.putImageData(e,0,0)}}class Ri extends G{getFileInfo(){return"src/rendering/scenes/ComplexSequence.ts"}constructor(e,t,s){super(e,t,s),this.textures={wood:new rt("/wood.webp")},this.objects={sign:new w(g.image(this.textures.wood),new u(0,200),new u(400,300),new u(1,1),new u(.5,0)),text:new w(g.staticText(["This whole animation is done","with the following objects:","","2 simple sequences.","A looping interpolator."].join(`
`),"20px Arial","#ffffff","center","top",!0),new u(0,100)),ropeLeft:new w(g.roundedRectangle("#000",null,5),new u(0,0),new u(10,300),new u(1,1),new u(.5,.01),Math.PI/5),ropeRight:new w(g.roundedRectangle("#000",null,5),new u(0,0),new u(10,300),new u(1,1),new u(.5,.01),-Math.PI/5),pivot:new w(()=>{},new u(640,-1e3),new u(1,1)),nail:new w(g.roundedRectangle("#888","#000",4),new u(0,8),new u(16,16),new u(1,1),new u(.5,.5),.2)},this.objects.pivot.append(this.objects.ropeLeft,this.objects.ropeRight,this.objects.sign,this.objects.nail),this.objects.sign.append(this.objects.text),this.sequencers={timer:new wt(this.time,.5),signRotation:new xe(this.time,i=>this.objects.sign.rotation=i,[0,-.05,.05,0],{duration:.25,easing:L.easeInOutQuad}),pivotY:new ve(this.time,i=>this.objects.pivot.position.y=i,{startValue:-600,endValue:100,duration:1,easing:L.easeOutElastic}),pivotRotationStart:new xe(this.time,i=>{this.objects.pivot.rotation=i,this.objects.nail.rotation=-i+.2},[Math.PI/5,-Math.PI/5,Math.PI/10],{duration:.6666,easing:L.easeInOutQuad}),pivotRotationLoop:new ve(this.time,i=>{this.objects.pivot.rotation=i,this.objects.nail.rotation=-i+.2},{startValue:Math.PI/10,endValue:-Math.PI/10,duration:.6666,easing:L.easeInOutQuad})}}*sequence(){for(yield*J.run(this.sequencers.timer),yield*J.runTogether([this.sequencers.signRotation,this.sequencers.pivotY,this.sequencers.pivotRotationStart]);;)if(yield*J.run(this.sequencers.pivotRotationLoop),this.sequencers.pivotRotationLoop.reverse(),this.sequencers.pivotRotationLoop.options.endValue*=.5,Math.abs(this.sequencers.pivotRotationLoop.options.endValue)<.001){this.objects.pivot.rotation=0;break}}render(){this.objects.pivot.render(this.context)}}class Ke{constructor(e,t,s){this.background=new w(g.roundedRectangle("rgba(0, 0, 0, 0.5)","black",8),e,t.clone(),new u(1,1),new u(0,0)),this.foreground=new w(g.roundedRectangle("rgba(0, 255, 0, 0.5)","green",8),new u(0,0),t.clone(),new u(1,1),new u(0,0)),this.text=new w(g.dynamicText(s,"24px Consolas, monospace","white","left","middle"),new u(0,-12)),this.background.append(this.foreground,this.text)}render(e){this.background.render(e)}setProgress(e){this.foreground.size.x=this.background.size.x*e}}class Vi extends G{getFileInfo(){return"src/rendering/scenes/SimpleFrameAnimation.ts"}constructor(e,t,s){super(e,t,s),this.textures={cat:new Te("/cat-spritesheet.webp",12,14,158)},this.objects={cat:new w(g.sprite(this.textures.cat,()=>Math.floor(s.now*24)),new u(1280/2,720/2),new u(256,256)),progressBar:new Ke(new u(256/2,592),new u(1024,32),()=>`Frame: ${Math.floor(s.now*24)%158} / 158`)}}render(){this.objects.progressBar.setProgress(Math.round(this.time.now*24)/158%1),this.renderInOrder(this.objects.cat,this.objects.progressBar)}}class Hi extends G{getFileInfo(){return"src/rendering/scenes/CatPendulum.ts"}constructor(e,t,s){super(e,t,s),this.textures={cat1:new Te("/cat-spritesheet.webp",12,14,158),cat2:new Te("/cat-alt-spritesheet.webp",9,8,71),cat3:new Te("/cat-alt-02-spritesheet.webp",9,8,68)},this.objects={cat1:new w(g.sprite(this.textures.cat1,()=>Math.floor(s.now*24)),new u(0,200),new u(200,200),new u(1,1),new u(.5,0),0),cat2:new w(g.sprite(this.textures.cat2,()=>Math.floor(s.now*24)),new u(0,150),new u(200,200),new u(1,1),new u(.5,0),0),cat3:new w(g.sprite(this.textures.cat3,()=>Math.floor(s.now*24)),new u(640,100),new u(200,150),new u(1,1),new u(.5,0),0),texts:{cat1:new w(g.staticText("Cat 1: 158 frames","24px Consolas, monospace","white","center","middle")),cat2:new w(g.staticText("Cat 2: 71 frames","24px Consolas, monospace","white","center","middle")),cat3:new w(g.staticText("Cat 3: 68 frames","24px Consolas, monospace","white","center","middle"))},progressBars:{cat1:new Ke(new u(50,518),new u(128,24),()=>`Cat 1: ${Math.floor(s.now*24)%158+1} / 158`),cat2:new Ke(new u(50,582),new u(128,24),()=>`Cat 2: ${Math.floor(s.now*24)%71+1} / 71`),cat3:new Ke(new u(50,646),new u(128,24),()=>`Cat 3: ${Math.floor(s.now*24)%68+1} / 68`)}},this.objects.cat3.append(this.objects.texts.cat3,this.objects.cat2),this.objects.cat2.append(this.objects.texts.cat2,this.objects.cat1),this.objects.cat1.append(this.objects.texts.cat1)}render(){this.objects.cat1.rotation=Math.sin(this.time.now*2)*.75,this.objects.cat2.rotation=Math.sin(this.time.now*3)*.5,this.objects.cat3.rotation=Math.sin(this.time.now*4)*.5,this.objects.progressBars.cat1.setProgress(Math.round(this.time.now*24)/158%1),this.objects.progressBars.cat2.setProgress(Math.round(this.time.now*24)/71%1),this.objects.progressBars.cat3.setProgress(Math.round(this.time.now*24)/68%1),this.renderInOrder(this.objects.cat3,this.objects.progressBars.cat1,this.objects.progressBars.cat2,this.objects.progressBars.cat3)}}class Wi extends G{getFileInfo(){return"src/rendering/scenes/GameOfLife.ts"}constructor(e,t,s){super(e,t,s);const i=e.resolution,r=8;this.cols=Math.floor(i.x/r),this.rows=Math.floor(i.y/r),this.grid=new Ni(this.cols,this.rows),this.imageData=this.grid.imageData,this.timer=new wt(s,1/30);const o=this.imageData;for(let h=0;h<this.rows;h++)for(let a=0;a<this.cols;a++)o.data[(h*this.cols+a)*4]=0,o.data[(h*this.cols+a)*4+1]=0,o.data[(h*this.cols+a)*4+2]=0,o.data[(h*this.cols+a)*4+3]=Math.random()<.5?255:0;this.grid.imageData=o}*sequence(){for(;;)this.updateGrid(),yield*J.run(this.timer)}render(){const e=this.context;e.fillStyle="#ff5722",e.fillRect(0,0,this.wrapper.resolution.x,this.wrapper.resolution.y),e.imageSmoothingEnabled=!1,e.drawImage(this.grid.getCanvas(),0,0,this.wrapper.resolution.x,this.wrapper.resolution.y)}updateGrid(){const e=Array.from(this.grid.imageData.data.filter((t,s)=>s%4===3)).map(t=>t>0);for(let t=0;t<e.length;t++){const s=Math.floor(t/this.cols),i=t%this.cols,r=this.countAliveNeighbors(e,s,i);e[t]?r<2||r>3?this.imageData.data[t*4+3]=0:this.imageData.data[t*4+3]=255:r===3?this.imageData.data[t*4+3]=255:this.imageData.data[t*4+3]=0}this.grid.imageData=this.imageData}countAliveNeighbors(e,t,s){const i=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];let r=0;for(const[o,h]of i){const a=t+o,l=s+h;if(a>=0&&a<this.rows&&l>=0&&l<this.cols){const c=a*this.cols+l;e[c]&&r++}}return r}}function bt(n,e,t){return Math.max(e,Math.min(t,n))}function me(n,e,t){return n+(e-n)*t}function Yi(n,e,t){const s=(i,r=(i+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}const Tt={r:200,g:128,b:255},Mt={r:200,g:255,b:128},ye=500,dn=Math.PI*4,pn=300,ce=100,Xi=40,Gi=60,U=200;function Ui(n,e){return(t,s)=>{const i=t.position.x/n.x,r=t.position.y/n.y,o={r:me(Tt.r,Mt.r,i),g:me(Tt.g,Mt.g,r),b:me(Tt.b,Mt.b,i+r)},h=Yi(t.rotation/Math.PI*360,1,1),a={r:me(o.r,h[0]*256,.25),g:me(o.g,h[1]*256,.25),b:me(o.b,h[2]*256,.25)};if(s.fillStyle=`rgb(${a.r}, ${a.g}, ${a.b})`,s.beginPath(),s.moveTo(10,0),s.lineTo(-10,7),s.lineTo(-5,0),s.lineTo(-10,-7),s.fill(),w.debugMode){s.save(),s.rotate(-t.rotation);const l=e.getObjectsInRange(t.position.x,t.position.y,ce);s.strokeStyle="#ff0000";for(const c of l){if(c===t)continue;const f=c.position.subtract(t.position);f.length()>ce||(s.beginPath(),s.moveTo(0,0),s.lineTo(f.x,f.y),s.stroke())}s.restore(),s.strokeStyle="#00ff00",s.lineWidth=2,s.beginPath(),s.moveTo(0,0),s.lineTo(50,0),s.arc(0,0,ce,0,Math.PI*2),s.stroke()}}}class Ki{constructor(e,t){this.grid=[],this.resolution=t,this.cellCount=e,this.cellSize=new u(t.x/e,t.y/e);for(let s=0;s<e;s++){this.grid[s]=[];for(let i=0;i<e;i++)this.grid[s][i]=[]}}add(e){const t=Math.floor(e.position.x/(this.resolution.x/this.cellCount)),s=Math.floor(e.position.y/(this.resolution.y/this.cellCount));t>=0&&t<this.cellCount&&s>=0&&s<this.cellCount&&this.grid[s][t].push(e)}getObjectsInCell(e,t){return e<0||e>=this.cellCount||t<0||t>=this.cellCount?[]:this.grid[t][e]||[]}getObjectsInRange(e,t,s){const i=[],r=Math.max(0,Math.floor((e-s)/this.cellSize.x)),o=Math.min(this.cellCount-1,Math.ceil((e+s)/this.cellSize.x)),h=Math.max(0,Math.floor((t-s)/this.cellSize.y)),a=Math.min(this.cellCount-1,Math.ceil((t+s)/this.cellSize.y));for(let l=h;l<=a;l++)for(let c=r;c<=o;c++)i.push(...this.grid[l][c]);return i}clear(){for(let e=0;e<this.cellCount;e++)for(let t=0;t<this.cellCount;t++)this.grid[e][t]=[]}debugRender(e){const t=this.resolution.x/this.cellCount,s=this.resolution.y/this.cellCount;e.strokeStyle="#000000",e.lineWidth=1,e.beginPath();for(let i=1;i<this.cellCount;i++)e.moveTo(i*t,0),e.lineTo(i*t,this.resolution.y),e.moveTo(0,i*s),e.lineTo(this.resolution.x,i*s);e.stroke()}}class Qi extends G{getFileInfo(){return"src/rendering/scenes/Boids.ts"}constructor(e,t,s){super(e,t,s),this.newRotations=new Float32Array(ye),this.debugAgent=null,this.grid=new Ki(Math.ceil(Math.sqrt(ye)),e.resolution);const i=Math.ceil(Math.sqrt(ye*e.resolution.x/e.resolution.y)),r=Math.ceil(ye/i),o=e.resolution.x/i;console.log(`Boids grid: ${i} x ${r} (${ye} agents)`);const h=Ui(e.resolution,this.grid);this.agents=Array.from({length:ye},(a,l)=>{const c=new w(h,new u(l%i*(e.resolution.x/i)+o/2,Math.floor(l/i)*(e.resolution.y/r)+o/2),new u(20,20),u.one(),new u(.5,.5),Math.random()*Math.PI*2);return this.grid.add(c),c}),this.debugAgent=this.agents[Math.floor(Math.random()*this.agents.length)]}turnAwayFromBounds(e){const t=this.wrapper.resolution,s=e.position;let i=new u(0,0),r=0;return s.x<U?(i.x=1,r+=U-s.x):s.x>t.x-U&&(i.x=-1,r+=s.x-(t.x-U)),s.y<U?(i.y=1,r+=U-s.y):s.y>t.y-U&&(i.y=-1,r+=s.y-(t.y-U)),i=i.normalize(),{steeringVector:new u(i.x,i.y),strength:Math.pow(r/U,2)}}separate(e,t){const s=new u(0,0);let i=1/0,r=0;for(const a of t){if(a===e)continue;const l=e.position.subtract(a.position),c=l.length();c<ce&&c>0&&(c<i&&(i=c),s.addInPlace(l.normalize().multiply(1/c)),r++)}let o=0,h=0;return r>0&&(o=Math.atan2(s.y,s.x),h=Math.max(0,ce-i)/ce),{steeringVector:new u(Math.cos(o),Math.sin(o)),strength:Math.pow(h,4)}}align(e,t){const s=new u(0,0);let i=0;for(const h of t){if(h===e)continue;const l=h.position.subtract(e.position).length();l<Xi&&l>0&&(s.addInPlace(new u(Math.cos(h.rotation),Math.sin(h.rotation))),i++)}let r=e.rotation,o=0;return i>0&&(s.multiplyInPlace(1/i),r=Math.atan2(s.y,s.x),o=1),{steeringVector:new u(Math.cos(r),Math.sin(r)),strength:Math.pow(o,2)}}cohere(e,t){const s=new u(0,0);let i=0;for(const h of t){if(h===e)continue;const l=h.position.subtract(e.position).length();l<Gi&&l>0&&(s.addInPlace(h.position),i++)}let r=e.rotation,o=0;return i>0&&(s.multiplyInPlace(1/i),s.subtractInPlace(e.position),r=Math.atan2(s.y,s.x),o=(1-1/i)*.5),{steeringVector:new u(Math.cos(r),Math.sin(r)),strength:Math.pow(o,2)}}moveAgents(e){for(const t of this.agents){const s=new u(Math.cos(t.rotation)*pn*e.delta,Math.sin(t.rotation)*pn*e.delta);t.position.addInPlace(s),t.position.x=bt(t.position.x,0,this.wrapper.resolution.x),t.position.y=bt(t.position.y,0,this.wrapper.resolution.y)}}render(){w.debugMode&&this.grid.debugRender(this.context);for(let e=0;e<this.agents.length;e++){const t=this.agents[e],s=this.grid.getObjectsInRange(t.position.x,t.position.y,ce),i=this.turnAwayFromBounds(t),r=this.separate(t,s),o=this.align(t,s),h=this.cohere(t,s);let a=i.steeringVector.multiply(i.strength).add(r.steeringVector.multiply(r.strength)).add(o.steeringVector.multiply(o.strength)).add(h.steeringVector.multiply(h.strength));a.length()===0?a=new u(Math.cos(t.rotation),Math.sin(t.rotation)):a=a.normalize();let c=Math.atan2(a.y,a.x)-t.rotation;c=Math.atan2(Math.sin(c),Math.cos(c));const f=bt(c,-dn*this.time.delta,dn*this.time.delta);this.newRotations[e]=(t.rotation+f+Math.PI*2)%(Math.PI*2)}for(let e=0;e<this.agents.length;e++){const t=this.agents[e];t.rotation=this.newRotations[e]}this.moveAgents(this.time),this.grid.clear();for(const e of this.agents)this.grid.add(e);for(const e of this.agents){const t=w.debugMode;t&&this.debugAgent!==e&&w.setDebugMode(!1),e.render(this.context),w.setDebugMode(t)}}}console.log("Running in production mode.");const We="/emergent-animations",Kt=[],Xn=[{title:"Basics",href:"/examples/basics",examples:[{name:"Coordinate Systems",scene:Bi.provide()}]},{title:"Functional Animations",href:"/examples/functional-animations",examples:[{name:"Simple functional",scene:Oi.provide()},{name:"Simple interpolation",scene:Di.provide()},{name:"Simple sequence",scene:Li.provide()},{name:"Complex sequence",scene:Ri.provide()}]},{title:"Frame Animations",href:"/examples/frame-animations",examples:[{name:"Simple animation",scene:Vi.provide()},{name:"Complex animation",scene:Hi.provide()}]},{title:"Rule Based Animations",href:"/examples/rule-based-animations",examples:[{name:"Game of Life",scene:Wi.provide()},{name:"Boids",scene:Qi.provide()}]}],Zi=[{href:"/",component:wi,title:"Home"},{href:"/404",component:_i,title:"404"},{href:"/thesis",component:yi,title:"Thesis"},{href:"/about",component:bi,title:"About"},{href:"/examples",component:Mi,title:"Examples"},...Xn.map(n=>({href:n.href,title:n.title,component:$i,props:{title:n.title,pages:n.examples||[]}}))],Se=Zi.reduce((n,e)=>(n[e.href]=e,n),{});let De=Se[globalThis.location.pathname.replace(We,"")]??Se["/404"];function Ji(n){globalThis.history.pushState({},"",We+n),De=Se[n]??Se["/404"],Kt.forEach(e=>e(De))}function ji(){return De}function er(n){Kt.push(n)}globalThis.addEventListener("popstate",()=>{const n=globalThis.location.pathname.replace(We,"");De=Se[n]??Se["/404"],Kt.forEach(e=>e(De))});function tr(n,e,t){e()===""&&(n.preventDefault(),n.stopPropagation(),Ji(t.href))}var nr=O("<a><!> <!></a>");function se(n,e){le(e,!0);let t=fe(e,"style",3,""),s=fe(e,"cssClass",3,""),i=fe(e,"target",3,""),r=fe(e,"rel",3,"");var o=nr();o.__click=[tr,i,e];var h=$(o);vt(h,()=>e.children??lt);var a=q(h,2);{var l=c=>{var f=Q();re(()=>Oe(f,e.href)),x(c,f)};Ht(a,c=>{e.children||c(l)})}re(()=>{Fe(o,"href",e.href),Yn(o,t()),Fe(o,"target",i()),Fe(o,"rel",r()),Xt(o,1,`link ${s()??""}`,"svelte-1iwy9kf")}),x(n,o),ae()}Rt(["click"]);var sr=O('<header class="svelte-1xgxzs1"><!> <nav class="svelte-1xgxzs1"><!> <!> <!> <!></nav></header>');function ir(n){var e=sr(),t=$(e);se(t,{href:"/",cssClass:"navbar-title",children:(a,l)=>{var c=Q("Emergent Animations");x(a,c)},$$slots:{default:!0}});var s=q(t,2),i=$(s);se(i,{cssClass:"navbar-link",href:"/",children:(a,l)=>{var c=Q("Home");x(a,c)},$$slots:{default:!0}});var r=q(i,2);se(r,{cssClass:"navbar-link",href:"/thesis",children:(a,l)=>{var c=Q("Thesis");x(a,c)},$$slots:{default:!0}});var o=q(r,2);se(o,{cssClass:"navbar-link",href:"/examples",children:(a,l)=>{var c=Q("Examples");x(a,c)},$$slots:{default:!0}});var h=q(o,2);se(h,{cssClass:"navbar-link",href:"/about",children:(a,l)=>{var c=Q("About");x(a,c)},$$slots:{default:!0}}),x(n,e)}function rr(n,e){le(e,!0);let t=V(K(ji())),s=yt(()=>{var l;return(l=M(t))==null?void 0:l.component}),i=yt(()=>{var l;return((l=M(t))==null?void 0:l.title)||"*"}),r=yt(()=>{var l;return((l=M(t))==null?void 0:l.props)||{}}),o=null;er(l=>{M(t).href!=l.href&&(o&&clearTimeout(o),document.getElementById("current-page").classList.add("fade-out"),o=setTimeout(()=>{F(t,l,!0),document.getElementById("current-page").classList.remove("fade-out")},150))});var h=Vt();Xs(l=>{re(()=>Cn.title=`Emergent Animations - ${M(i)??""}`)});var a=ct(h);ti(a,()=>M(s),(l,c)=>{c(l,ui(()=>M(r)))}),x(n,h),ae()}var or=O('<!> <main class="svelte-7hgqb0"><!></main> <footer class="svelte-7hgqb0"><span>Created by <!> using <!> ❤️</span></footer>',1);function lr(n){var e=or(),t=ct(e);ir(t);var s=q(t,2),i=$(s);rr(i,{});var r=q(s,2),o=$(r),h=q($(o));se(h,{href:"https://github.com/KissKonradUni/emergent-animations",target:"_blank",rel:"noopener noreferrer",children:(l,c)=>{var f=Q("Konrád Soma Kiss");x(l,f)},$$slots:{default:!0}});var a=q(h,2);se(a,{href:"https://svelte.dev",target:"_blank",rel:"noopener noreferrer",children:(l,c)=>{var f=Q("Svelte");x(l,f)},$$slots:{default:!0}}),x(n,e)}Us(lr,{target:document.body});
