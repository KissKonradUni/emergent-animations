(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const Ye=!1;var Ce=Array.isArray,Rn=Array.prototype.indexOf,Me=Array.from,Nn=Object.defineProperty,At=Object.getOwnPropertyDescriptor,rn=Object.getOwnPropertyDescriptors,Hn=Object.prototype,Vn=Array.prototype,Ae=Object.getPrototypeOf,je=Object.isExtensible;const oe=()=>{};function Wn(e){return e()}function ye(e){for(var t=0;t<e.length;t++)e[t]()}const Y=2,on=4,ae=8,ke=16,et=32,$t=64,Xt=128,B=256,Gt=512,q=1024,U=2048,wt=4096,J=8192,le=16384,Yn=32768,Bt=65536,an=1<<19,ln=1<<20,be=1<<21,bt=Symbol("$state"),jn=Symbol("");function un(e){return e===this.v}function Xn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function cn(e){return!Xn(e,this.v)}function Gn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Un(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Qn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Kn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Zn(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Jn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ts(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ot=!1,es=!1;function ns(){Ot=!0}const ss=1,is=2,rs=16,os=1,as=2,F=Symbol(),ls="http://www.w3.org/1999/xhtml";function hn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let m=null;function Xe(e){m=e}function us(e){return fn().get(e)}function cs(e,t){return fn().set(e,t),t}function Q(e,t=!1,n){var s=m={p:m,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Ot&&!t&&(m.l={s:null,u:null,r1:[],r2:zt(!1)}),ws(()=>{s.d=!0})}function K(e){const t=m;if(t!==null){const l=t.e;if(l!==null){var n=T,s=b;t.e=null;try{for(var i=0;i<l.length;i++){var r=l[i];Et(r.effect),ct(r.reaction),Fe(r.fn)}}finally{Et(n),ct(s)}}m=t.p,t.m=!0}return{}}function ue(){return!Ot||m!==null&&m.l===null}function fn(e){return m===null&&hn(),m.c??(m.c=new Map(hs(m)||void 0))}function hs(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function rt(e){if(typeof e!="object"||e===null||bt in e)return e;const t=Ae(e);if(t!==Hn&&t!==Vn)return e;var n=new Map,s=Ce(e),i=N(0),r=b,l=c=>{var a=b;ct(r);var o=c();return ct(a),o};return s&&n.set("length",N(e.length)),new Proxy(e,{defineProperty(c,a,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&Zn();var f=n.get(a);return f===void 0?(f=l(()=>N(o.value)),n.set(a,f)):z(f,l(()=>rt(o.value))),!0},deleteProperty(c,a){var o=n.get(a);if(o===void 0)a in c&&(n.set(a,l(()=>N(F))),we(i));else{if(s&&typeof a=="string"){var f=n.get("length"),u=Number(a);Number.isInteger(u)&&u<f.v&&z(f,u)}z(o,F),we(i)}return!0},get(c,a,o){var p;if(a===bt)return e;var f=n.get(a),u=a in c;if(f===void 0&&(!u||(p=At(c,a))!=null&&p.writable)&&(f=l(()=>N(rt(u?c[a]:F))),n.set(a,f)),f!==void 0){var d=y(f);return d===F?void 0:d}return Reflect.get(c,a,o)},getOwnPropertyDescriptor(c,a){var o=Reflect.getOwnPropertyDescriptor(c,a);if(o&&"value"in o){var f=n.get(a);f&&(o.value=y(f))}else if(o===void 0){var u=n.get(a),d=u==null?void 0:u.v;if(u!==void 0&&d!==F)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return o},has(c,a){var d;if(a===bt)return!0;var o=n.get(a),f=o!==void 0&&o.v!==F||Reflect.has(c,a);if(o!==void 0||T!==null&&(!f||(d=At(c,a))!=null&&d.writable)){o===void 0&&(o=l(()=>N(f?rt(c[a]):F)),n.set(a,o));var u=y(o);if(u===F)return!1}return f},set(c,a,o,f){var S;var u=n.get(a),d=a in c;if(s&&a==="length")for(var p=o;p<u.v;p+=1){var v=n.get(p+"");v!==void 0?z(v,F):p in c&&(v=l(()=>N(F)),n.set(p+"",v))}u===void 0?(!d||(S=At(c,a))!=null&&S.writable)&&(u=l(()=>N(void 0)),z(u,l(()=>rt(o))),n.set(a,u)):(d=u.v!==F,z(u,l(()=>rt(o))));var P=Reflect.getOwnPropertyDescriptor(c,a);if(P!=null&&P.set&&P.set.call(f,o),!d){if(s&&typeof a=="string"){var O=n.get("length"),x=Number(a);Number.isInteger(x)&&x>=O.v&&z(O,x+1)}we(i)}return!0},ownKeys(c){y(i);var a=Reflect.ownKeys(c).filter(u=>{var d=n.get(u);return d===void 0||d.v!==F});for(var[o,f]of n)f.v!==F&&!(o in c)&&a.push(o);return a},setPrototypeOf(){Jn()}})}function we(e,t=1){z(e,e.v+t)}function ce(e){var t=Y|U,n=b!==null&&(b.f&Y)!==0?b:null;return T===null||n!==null&&(n.f&B)!==0?t|=B:T.f|=ln,{ctx:m,deps:null,effects:null,equals:un,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??T}}function Ge(e){const t=ce(e);return Cn(t),t}function Z(e){const t=ce(e);return t.equals=cn,t}function dn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)tt(t[n])}}function fs(e){for(var t=e.parent;t!==null;){if((t.f&Y)===0)return t;t=t.parent}return null}function pn(e){var t,n=T;Et(fs(e));try{dn(e),t=Fn(e)}finally{Et(n)}return t}function vn(e){var t=pn(e),n=(ot||(e.f&B)!==0)&&e.deps!==null?wt:q;j(e,n),e.equals(t)||(e.v=t,e.wv=An())}const Ft=new Map;function zt(e,t){var n={f:0,v:e,reactions:null,equals:un,rv:0,wv:0};return n}function N(e,t){const n=zt(e);return Cn(n),n}function ds(e,t=!1){var s;const n=zt(e);return t||(n.equals=cn),Ot&&m!==null&&m.l!==null&&((s=m.l).s??(s.s=[])).push(n),n}function z(e,t,n=!1){b!==null&&!X&&ue()&&(b.f&(Y|ke))!==0&&!(k!=null&&k.includes(e))&&ts();let s=n?rt(t):t;return _n(e,s)}function _n(e,t){if(!e.equals(t)){var n=e.v;Rt?Ft.set(e,t):Ft.set(e,n),e.v=t,(e.f&Y)!==0&&((e.f&U)!==0&&pn(e),j(e,(e.f&B)===0?q:wt)),e.wv=An(),gn(e,U),ue()&&T!==null&&(T.f&q)!==0&&(T.f&(et|$t))===0&&(R===null?Es([e]):R.push(e))}return t}function gn(e,t){var n=e.reactions;if(n!==null)for(var s=ue(),i=n.length,r=0;r<i;r++){var l=n[r],c=l.f;(c&U)===0&&(!s&&l===T||(j(l,t),(c&(q|B))!==0&&((c&Y)!==0?gn(l,wt):de(l))))}}let ps=!1;var Ue,wn,mn,xn,yn;function vs(){if(Ue===void 0){Ue=window,wn=document,mn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;xn=At(t,"firstChild").get,yn=At(t,"nextSibling").get,je(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),je(n)&&(n.__t=void 0)}}function Lt(e=""){return document.createTextNode(e)}function Ut(e){return xn.call(e)}function he(e){return yn.call(e)}function A(e,t){return Ut(e)}function St(e,t){{var n=Ut(e);return n instanceof Comment&&n.data===""?he(n):n}}function I(e,t=1,n=!1){let s=e;for(;t--;)s=he(s);return s}function _s(e){e.textContent=""}function bn(e){T===null&&b===null&&Qn(),b!==null&&(b.f&B)!==0&&T===null&&Un(),Rt&&Gn()}function gs(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ct(e,t,n,s=!0){var i=T,r={ctx:m,deps:null,nodes_start:null,nodes_end:null,f:e|U,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(n)try{qe(r),r.f|=Yn}catch(a){throw tt(r),a}else t!==null&&de(r);var l=n&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&(ln|Xt))===0;if(!l&&s&&(i!==null&&gs(r,i),b!==null&&(b.f&Y)!==0)){var c=b;(c.effects??(c.effects=[])).push(r)}return r}function ws(e){const t=Ct(ae,null,!1);return j(t,q),t.teardown=e,t}function Te(e){bn();var t=T!==null&&(T.f&et)!==0&&m!==null&&!m.m;if(t){var n=m;(n.e??(n.e=[])).push({fn:e,effect:T,reaction:b})}else{var s=Fe(e);return s}}function ms(e){return bn(),Tn(e)}function xs(e){const t=Ct($t,e,!0);return(n={})=>new Promise(s=>{n.outro?qt(t,()=>{tt(t),s(void 0)}):(tt(t),s(void 0))})}function Fe(e){return Ct(on,e,!1)}function Tn(e){return Ct(ae,e,!0)}function _t(e,t=[],n=ce){const s=t.map(n);return Mt(()=>e(...s.map(y)))}function Mt(e,t=0){return Ct(ae|ke|t,e,!0)}function gt(e,t=!0){return Ct(ae|et,e,!0,t)}function Pn(e){var t=e.teardown;if(t!==null){const n=Rt,s=b;Qe(!0),ct(null);try{t.call(null)}finally{Qe(n),ct(s)}}}function En(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var s=n.next;(n.f&$t)!==0?n.parent=null:tt(n,t),n=s}}function ys(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&et)===0&&tt(t),t=n}}function tt(e,t=!0){var n=!1;(t||(e.f&an)!==0)&&e.nodes_start!==null&&(bs(e.nodes_start,e.nodes_end),n=!0),En(e,t&&!n),te(e,0),j(e,le);var s=e.transitions;if(s!==null)for(const r of s)r.stop();Pn(e);var i=e.parent;i!==null&&i.first!==null&&In(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function bs(e,t){for(;e!==null;){var n=e===t?null:he(e);e.remove(),e=n}}function In(e){var t=e.parent,n=e.prev,s=e.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=n))}function qt(e,t){var n=[];ze(e,n,!0),$n(n,()=>{tt(e),t&&t()})}function $n(e,t){var n=e.length;if(n>0){var s=()=>--n||t();for(var i of e)i.out(s)}else t()}function ze(e,t,n){if((e.f&J)===0){if(e.f^=J,e.transitions!==null)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var s=e.first;s!==null;){var i=s.next,r=(s.f&Bt)!==0||(s.f&et)!==0;ze(s,t,r?n:!1),s=i}}}function Qt(e){Sn(e,!0)}function Sn(e,t){if((e.f&J)!==0){e.f^=J,(e.f&q)===0&&(e.f^=q),Nt(e)&&(j(e,U),de(e));for(var n=e.first;n!==null;){var s=n.next,i=(n.f&Bt)!==0||(n.f&et)!==0;Sn(n,i?t:!1),n=s}if(e.transitions!==null)for(const r of e.transitions)(r.is_global||t)&&r.in()}}let Kt=[];function Ts(){var e=Kt;Kt=[],ye(e)}function Ps(e){Kt.length===0&&queueMicrotask(Ts),Kt.push(e)}let Wt=!1,Pe=!1,Zt=null,vt=!1,Rt=!1;function Qe(e){Rt=e}let Yt=[];let b=null,X=!1;function ct(e){b=e}let T=null;function Et(e){T=e}let k=null;function Cn(e){b!==null&&b.f&be&&(k===null?k=[e]:k.push(e))}let M=null,D=0,R=null;function Es(e){R=e}let Mn=1,Jt=0,ot=!1;function An(){return++Mn}function Nt(e){var u;var t=e.f;if((t&U)!==0)return!0;if((t&wt)!==0){var n=e.deps,s=(t&B)!==0;if(n!==null){var i,r,l=(t&Gt)!==0,c=s&&T!==null&&!ot,a=n.length;if(l||c){var o=e,f=o.parent;for(i=0;i<a;i++)r=n[i],(l||!((u=r==null?void 0:r.reactions)!=null&&u.includes(o)))&&(r.reactions??(r.reactions=[])).push(o);l&&(o.f^=Gt),c&&f!==null&&(f.f&B)===0&&(o.f^=B)}for(i=0;i<a;i++)if(r=n[i],Nt(r)&&vn(r),r.wv>e.wv)return!0}(!s||T!==null&&!ot)&&j(e,q)}return!1}function Is(e,t){for(var n=t;n!==null;){if((n.f&Xt)!==0)try{n.fn(e);return}catch{n.f^=Xt}n=n.parent}throw Wt=!1,e}function Ke(e){return(e.f&le)===0&&(e.parent===null||(e.parent.f&Xt)===0)}function fe(e,t,n,s){if(Wt){if(n===null&&(Wt=!1),Ke(t))throw e;return}if(n!==null&&(Wt=!0),Is(e,t),Ke(t))throw e}function kn(e,t,n=!0){var s=e.reactions;if(s!==null)for(var i=0;i<s.length;i++){var r=s[i];k!=null&&k.includes(e)||((r.f&Y)!==0?kn(r,t,!1):t===r&&(n?j(r,U):(r.f&q)!==0&&j(r,wt),de(r)))}}function Fn(e){var p;var t=M,n=D,s=R,i=b,r=ot,l=k,c=m,a=X,o=e.f;M=null,D=0,R=null,ot=(o&B)!==0&&(X||!vt||b===null),b=(o&(et|$t))===0?e:null,k=null,Xe(e.ctx),X=!1,Jt++,e.f|=be;try{var f=(0,e.fn)(),u=e.deps;if(M!==null){var d;if(te(e,D),u!==null&&D>0)for(u.length=D+M.length,d=0;d<M.length;d++)u[D+d]=M[d];else e.deps=u=M;if(!ot)for(d=D;d<u.length;d++)((p=u[d]).reactions??(p.reactions=[])).push(e)}else u!==null&&D<u.length&&(te(e,D),u.length=D);if(ue()&&R!==null&&!X&&u!==null&&(e.f&(Y|wt|U))===0)for(d=0;d<R.length;d++)kn(R[d],e);return i!==null&&i!==e&&(Jt++,R!==null&&(s===null?s=R:s.push(...R))),f}finally{M=t,D=n,R=s,b=i,ot=r,k=l,Xe(c),X=a,e.f^=be}}function $s(e,t){let n=t.reactions;if(n!==null){var s=Rn.call(n,e);if(s!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[s]=n[i],n.pop())}}n===null&&(t.f&Y)!==0&&(M===null||!M.includes(t))&&(j(t,wt),(t.f&(B|Gt))===0&&(t.f^=Gt),dn(t),te(t,0))}function te(e,t){var n=e.deps;if(n!==null)for(var s=t;s<n.length;s++)$s(e,n[s])}function qe(e){var t=e.f;if((t&le)===0){j(e,q);var n=T,s=m,i=vt;T=e,vt=!0;try{(t&ke)!==0?ys(e):En(e),Pn(e);var r=Fn(e);e.teardown=typeof r=="function"?r:null,e.wv=Mn;var l=e.deps,c;Ye&&es&&e.f&U}catch(a){fe(a,e,n,s||e.ctx)}finally{vt=i,T=n}}}function Ss(){try{Kn()}catch(e){if(Zt!==null)fe(e,Zt,null);else throw e}}function Cs(){var e=vt;try{var t=0;for(vt=!0;Yt.length>0;){t++>1e3&&Ss();var n=Yt,s=n.length;Yt=[];for(var i=0;i<s;i++){var r=As(n[i]);Ms(r)}Ft.clear()}}finally{Pe=!1,vt=e,Zt=null}}function Ms(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var s=e[n];if((s.f&(le|J))===0)try{Nt(s)&&(qe(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null?In(s):s.fn=null))}catch(i){fe(i,s,null,s.ctx)}}}function de(e){Pe||(Pe=!0,queueMicrotask(Cs));for(var t=Zt=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&($t|et))!==0){if((n&q)===0)return;t.f^=q}}Yt.push(t)}function As(e){for(var t=[],n=e;n!==null;){var s=n.f,i=(s&(et|$t))!==0,r=i&&(s&q)!==0;if(!r&&(s&J)===0){if((s&on)!==0)t.push(n);else if(i)n.f^=q;else try{Nt(n)&&qe(n)}catch(a){fe(a,n,null,n.ctx)}var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}return t}function y(e){var t=e.f,n=(t&Y)!==0;if(b!==null&&!X){if(!(k!=null&&k.includes(e))){var s=b.deps;e.rv<Jt&&(e.rv=Jt,M===null&&s!==null&&s[D]===e?D++:M===null?M=[e]:(!ot||!M.includes(e))&&M.push(e))}}else if(n&&e.deps===null&&e.effects===null){var i=e,r=i.parent;r!==null&&(r.f&B)===0&&(i.f^=B)}return n&&(i=e,Nt(i)&&vn(i)),Rt&&Ft.has(e)?Ft.get(e):e.v}function De(e){var t=X;try{return X=!0,e()}finally{X=t}}const ks=-7169;function j(e,t){e.f=e.f&ks|t}function Fs(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(bt in e)Ee(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&bt in n&&Ee(n)}}}function Ee(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Ee(e[s],t)}catch{}const n=Ae(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const s=rn(n);for(let i in s){const r=s[i].get;if(r)try{r.call(e)}catch{}}}}}const zs=["touchstart","touchmove"];function qs(e){return zs.includes(e)}const zn=new Set,Ie=new Set;function Be(e){for(var t=0;t<e.length;t++)zn.add(e[t]);for(var n of Ie)n(e)}function Vt(e){var S;var t=this,n=t.ownerDocument,s=e.type,i=((S=e.composedPath)==null?void 0:S.call(e))||[],r=i[0]||e.target,l=0,c=e.__root;if(c){var a=i.indexOf(c);if(a!==-1&&(t===document||t===window)){e.__root=t;return}var o=i.indexOf(t);if(o===-1)return;a<=o&&(l=a)}if(r=i[l]||e.target,r!==t){Nn(e,"currentTarget",{configurable:!0,get(){return r||n}});var f=b,u=T;ct(null),Et(null);try{for(var d,p=[];r!==null;){var v=r.assignedSlot||r.parentNode||r.host||null;try{var P=r["__"+s];if(P!=null&&(!r.disabled||e.target===r))if(Ce(P)){var[O,...x]=P;O.apply(r,[e,...x])}else P.call(r,e)}catch(E){d?p.push(E):d=E}if(e.cancelBubble||v===t||v===null)break;r=v}if(d){for(let E of p)queueMicrotask(()=>{throw E});throw d}}finally{e.__root=t,delete e.currentTarget,ct(f),Et(u)}}}function Ds(e){var t;t=document.head.appendChild(Lt());try{Mt(()=>e(t),an)}finally{}}function Bs(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function ee(e,t){var n=T;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function $(e,t){var n=(t&os)!==0,s=(t&as)!==0,i,r=!e.startsWith("<!>");return()=>{i===void 0&&(i=Bs(r?e:"<!>"+e),n||(i=Ut(i)));var l=s||mn?document.importNode(i,!0):i.cloneNode(!0);if(n){var c=Ut(l),a=l.lastChild;ee(c,a)}else ee(l,l);return l}}function W(e=""){{var t=Lt(e+"");return ee(t,t),t}}function qn(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Lt();return e.append(t,n),ee(t,n),e}function w(e,t){e!==null&&e.before(t)}function ne(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Os(e,t){return Ls(e,t)}const mt=new Map;function Ls(e,{target:t,anchor:n,props:s={},events:i,context:r,intro:l=!0}){vs();var c=new Set,a=u=>{for(var d=0;d<u.length;d++){var p=u[d];if(!c.has(p)){c.add(p);var v=qs(p);t.addEventListener(p,Vt,{passive:v});var P=mt.get(p);P===void 0?(document.addEventListener(p,Vt,{passive:v}),mt.set(p,1)):mt.set(p,P+1)}}};a(Me(zn)),Ie.add(a);var o=void 0,f=xs(()=>{var u=n??t.appendChild(Lt());return gt(()=>{if(r){Q({});var d=m;d.c=r}i&&(s.$$events=i),o=e(u,s)||{},r&&K()}),()=>{var v;for(var d of c){t.removeEventListener(d,Vt);var p=mt.get(d);--p===0?(document.removeEventListener(d,Vt),mt.delete(d)):mt.set(d,p)}Ie.delete(a),u!==n&&((v=u.parentNode)==null||v.removeChild(u))}});return Rs.set(o,f),o}let Rs=new WeakMap;function Oe(e,t,[n,s]=[0,0]){var i=e,r=null,l=null,c=F,a=n>0?Bt:0,o=!1;const f=(d,p=!0)=>{o=!0,u(p,d)},u=(d,p)=>{c!==(c=d)&&(c?(r?Qt(r):p&&(r=gt(()=>p(i))),l&&qt(l,()=>{l=null})):(l?Qt(l):p&&(l=gt(()=>p(i,[n+1,s]))),r&&qt(r,()=>{r=null})))};Mt(()=>{o=!1,t(f),o||u(null,null)},a)}function Ns(e,t){return t}function Hs(e,t,n,s){for(var i=[],r=t.length,l=0;l<r;l++)ze(t[l].e,i,!0);var c=r>0&&i.length===0&&n!==null;if(c){var a=n.parentNode;_s(a),a.append(n),s.clear(),it(e,t[0].prev,t[r-1].next)}$n(i,()=>{for(var o=0;o<r;o++){var f=t[o];c||(s.delete(f.k),it(e,f.prev,f.next)),tt(f.e,!c)}})}function Vs(e,t,n,s,i,r=null){var l=e,c={flags:t,items:new Map,first:null};{var a=e;l=a.appendChild(Lt())}var o=null,f=!1,u=Z(()=>{var d=n();return Ce(d)?d:d==null?[]:Me(d)});Mt(()=>{var d=y(u),p=d.length;f&&p===0||(f=p===0,Ws(d,c,l,i,t,s,n),r!==null&&(p===0?o?Qt(o):o=gt(()=>r(l)):o!==null&&qt(o,()=>{o=null})),y(u))})}function Ws(e,t,n,s,i,r,l){var c=e.length,a=t.items,o=t.first,f=o,u,d=null,p=[],v=[],P,O,x,S;for(S=0;S<c;S+=1){if(P=e[S],O=r(P,S),x=a.get(O),x===void 0){var E=f?f.e.nodes_start:n;d=js(E,t,d,d===null?t.first:d.next,P,O,S,s,i,l),a.set(O,d),p=[],v=[],f=d.next;continue}if(Ys(x,P,S),(x.e.f&J)!==0&&Qt(x.e),x!==f){if(u!==void 0&&u.has(x)){if(p.length<v.length){var L=v[0],st;d=L.prev;var We=p[0],_e=p[p.length-1];for(st=0;st<p.length;st+=1)Ze(p[st],L,n);for(st=0;st<v.length;st+=1)u.delete(v[st]);it(t,We.prev,_e.next),it(t,d,We),it(t,_e,L),f=L,d=_e,S-=1,p=[],v=[]}else u.delete(x),Ze(x,f,n),it(t,x.prev,x.next),it(t,x,d===null?t.first:d.next),it(t,d,x),d=x;continue}for(p=[],v=[];f!==null&&f.k!==O;)(f.e.f&J)===0&&(u??(u=new Set)).add(f),v.push(f),f=f.next;if(f===null)continue;x=f}p.push(x),d=x,f=x.next}if(f!==null||u!==void 0){for(var ge=u===void 0?[]:Me(u);f!==null;)(f.e.f&J)===0&&ge.push(f),f=f.next;var On=ge.length;if(On>0){var Ln=c===0?n:null;Hs(t,ge,Ln,a)}}T.first=t.first&&t.first.e,T.last=d&&d.e}function Ys(e,t,n,s){_n(e.v,t),e.i=n}function js(e,t,n,s,i,r,l,c,a,o){var f=(a&ss)!==0,u=(a&rs)===0,d=f?u?ds(i):zt(i):i,p=(a&is)===0?l:zt(l),v={i:p,v:d,k:r,a:null,e:null,prev:n,next:s};try{return v.e=gt(()=>c(e,d,p,o),ps),v.e.prev=n&&n.e,v.e.next=s&&s.e,n===null?t.first=v:(n.next=v,n.e.next=v.e),s!==null&&(s.prev=v,s.e.prev=v.e),v}finally{}}function Ze(e,t,n){for(var s=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,r=e.e.nodes_start;r!==s;){var l=he(r);i.before(r),r=l}}function it(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function pe(e,t,...n){var s=e,i=oe,r;Mt(()=>{i!==(i=t())&&(r&&(tt(r),r=null),r=gt(()=>i(s,...n)))},Bt)}function Xs(e,t,n){var s=e,i,r;Mt(()=>{i!==(i=t())&&(r&&(qt(r),r=null),i&&(r=gt(()=>n(s,i))))},Bt)}const Je=[...` 	
\r\f¬†\v\uFEFF`];function Gs(e,t,n){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),n){for(var i in n)if(n[i])s=s?s+" "+i:i;else if(s.length)for(var r=i.length,l=0;(l=s.indexOf(i,l))>=0;){var c=l+r;(l===0||Je.includes(s[l-1]))&&(c===s.length||Je.includes(s[c]))?s=(l===0?"":s.substring(0,l))+s.substring(c+1):l=c}}return s===""?null:s}function Us(e,t){return e==null?null:String(e)}function Le(e,t,n,s,i,r){var l=e.__className;if(l!==n||l===void 0){var c=Gs(n,s,r);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}else if(r&&i!==r)for(var a in r){var o=!!r[a];(i==null||o!==!!i[a])&&e.classList.toggle(a,o)}return r}function Dn(e,t,n,s){var i=e.__style;if(i!==t){var r=Us(t);r==null?e.removeAttribute("style"):e.style.cssText=r,e.__style=t}return s}const Qs=Symbol("is custom element"),Ks=Symbol("is html");function kt(e,t,n,s){var i=Zs(e);i[t]!==(i[t]=n)&&(t==="loading"&&(e[jn]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Js(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Zs(e){return e.__attributes??(e.__attributes={[Qs]:e.nodeName.includes("-"),[Ks]:e.namespaceURI===ls})}var tn=new Map;function Js(e){var t=tn.get(e.nodeName);if(t)return t;tn.set(e.nodeName,t=[]);for(var n,s=e,i=Element.prototype;i!==s;){n=rn(s);for(var r in n)n[r].set&&t.push(r);s=Ae(s)}return t}function en(e,t){return e===t||(e==null?void 0:e[bt])===t}function me(e={},t,n,s){return Fe(()=>{var i,r;return Tn(()=>{i=r,r=[],De(()=>{e!==n(...r)&&(t(e,...r),i&&en(n(...i),e)&&t(null,...i))})}),()=>{Ps(()=>{r&&en(n(...r),e)&&t(null,...r)})}}),e}function Re(e=!1){const t=m,n=t.l.u;if(!n)return;let s=()=>Fs(t.s);if(e){let i=0,r={};const l=ce(()=>{let c=!1;const a=t.s;for(const o in a)a[o]!==r[o]&&(r[o]=a[o],c=!0);return c&&i++,i});s=()=>y(l)}n.b.length&&ms(()=>{nn(t,s),ye(n.b)}),Te(()=>{const i=De(()=>n.m.map(Wn));return()=>{for(const r of i)typeof r=="function"&&r()}}),n.a.length&&Te(()=>{nn(t,s),ye(n.a)})}function nn(e,t){if(e.l.s)for(const n of e.l.s)y(n);t()}function pt(e,t,n,s){var i;i=e[t];var r=s,l=!0,c=()=>(l&&(l=!1,r=s),r);i===void 0&&s!==void 0&&(i=c());var a;return a=()=>{var o=e[t];return o===void 0?c():(l=!0,o)},a}function Bn(e){m===null&&hn(),Ot&&m.l!==null?ti(m).m.push(e):Te(()=>{const t=De(e);if(typeof t=="function")return t})}function ti(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const ei="5";var sn;typeof window<"u"&&((sn=window.__svelte??(window.__svelte={})).v??(sn.v=new Set)).add(ei);ns();var ni=$('<a target="_blank" rel="noopener noreferrer" class="svelte-o5z3n1"> </a>'),si=$('<section class="page svelte-o5z3n1" id="current-page"><span class="title svelte-o5z3n1"> <!></span> <!></section>');function ht(e,t){Q(t,!0);let n=pt(t,"title",3,"Some Page"),s=pt(t,"style",3,""),i=pt(t,"extra",3,null);var r=si(),l=A(r),c=A(l),a=I(c);{var o=u=>{var d=ni(),p=A(d);_t(()=>{kt(d,"href",i().href),ne(p,i().title)}),w(u,d)};Oe(a,u=>{i()&&u(o)})}var f=I(l,2);pe(f,()=>t.children??oe),_t(()=>{Dn(r,s()),ne(c,`${n()??""} `)}),w(e,r),K()}var ii=$('<p>Welcome to the website!</p> <img src="https://picsum.photos/400/300" alt="Random" class="svelte-1yc2abm">',1);function ri(e){ht(e,{title:"Home",children:(t,n)=>{var s=ii();w(t,s)},$$slots:{default:!0}})}var oi=$("<p>Page not found.</p>");function ai(e){ht(e,{title:"Error 404",children:(t,n)=>{var s=oi();w(t,s)},$$slots:{default:!0}})}var li=$('<iframe frameborder="0" title="Thesis PDF" class="svelte-gqw2wc"></iframe>');function ui(e){const t=`${Ht}/main.pdf`;ht(e,{title:"Thesis",extra:{href:t,title:"Open in a new page ‚Üí"},children:(n,s)=>{var i=li();kt(i,"src",t),w(n,i)},$$slots:{default:!0}})}var ci=$("<p>Cool.</p>");function hi(e){ht(e,{title:"About",children:(t,n)=>{var s=ci();w(t,s)},$$slots:{default:!0}})}var fi=$('<div class="list svelte-161iceo"><!> <!> <!></div>');function di(e){ht(e,{title:"Examples",children:(t,n)=>{var s=fi(),i=A(s);G(i,{href:"/examples/functional-animations",cssClass:"example-menu-item",children:(c,a)=>{var o=W("Functional Animations");w(c,o)},$$slots:{default:!0}});var r=I(i,2);G(r,{href:"/examples/frame-animations",cssClass:"example-menu-item",children:(c,a)=>{var o=W("Frame Animations");w(c,o)},$$slots:{default:!0}});var l=I(r,2);G(l,{href:"/examples/rule-based-animations",cssClass:"example-menu-item",children:(c,a)=>{var o=W("Rule Based Animations");w(c,o)},$$slots:{default:!0}}),w(t,s)},$$slots:{default:!0}})}class h{constructor(t=0,n=0){this.x=t,this.y=n}set(t,n){return this.x=t,this.y=n,this}add(t){return new h(this.x+t.x,this.y+t.y)}addInPlace(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return new h(this.x-t.x,this.y-t.y)}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this}multiply(t){return new h(this.x*t,this.y*t)}multiplyInPlace(t){return this.x*=t,this.y*=t,this}scale(t){return new h(this.x*t.x,this.y*t.y)}lengthSquared(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.lengthSquared())}normalize(){const t=this.length();return t===0?new h(0,0):new h(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}clone(){return new h(this.x,this.y)}static zero(){return new h(0,0)}static one(){return new h(1,1)}}const yt=class yt{constructor(t,n=h.zero(),s=new h(100,100),i=h.one(),r=new h(.5,.5),l=0,c=[]){this._parent=null,this._hasDefaultSize=!0,this.position=n,this.rotation=l,this._size=s,this._hasDefaultSize=s.x===100&&s.y===100,this.scale=i,this.pivot=r,this.renderFunction=t,this._children=c}get size(){return this._size}set size(t){this._size=t,this._hasDefaultSize=!1}append(...t){this._children.push(...t),t.forEach(n=>{n._parent=this})}get hasDefaultSize(){return this._hasDefaultSize}render(t,n=0){if(!(this._parent!==null&&n===0)){if(n>10){console.warn("CanvasObject: Maximum render depth exceeded, stopping rendering to prevent stack overflow.");return}if(t.save(),t.translate(this.position.x,this.position.y),t.scale(this.scale.x,this.scale.y),t.rotate(this.rotation),this.renderFunction(this,t),this._children.forEach(s=>{s.render(t,n+1)}),!yt.debugMode){t.restore();return}t.fillStyle="#00ff00",t.fillRect(-2,-2,4,4),t.strokeStyle="#0000ff",t.lineWidth=1,t.strokeRect(-this.size.x*this.pivot.x,-this.size.y*this.pivot.y,this.size.x,this.size.y),t.restore()}}createCopy(t){const n=new yt(this.renderFunction,this.position.clone(),this.size.clone(),this.scale.clone(),this.pivot.clone(),this.rotation);return t?n._children=this._children.map(s=>s.createCopy(!0)):n._children=[],n}static setDebugMode(t){yt.debugMode=t}};yt.debugMode=!1;let _=yt;class g{static ellipse(t,n=null){return(s,i)=>{i.beginPath(),i.ellipse(-s.size.x*(s.pivot.x-.5),-s.size.y*(s.pivot.y-.5),s.size.x/2,s.size.y/2,0,0,Math.PI*2),i.fillStyle=t,i.fill(),n&&(i.strokeStyle=n,i.stroke())}}static rectangle(t,n=null){return(s,i)=>{i.beginPath(),i.rect(-s.size.x*s.pivot.x,-s.size.y*s.pivot.y,s.size.x,s.size.y),i.fillStyle=t,i.fill(),n&&(i.strokeStyle=n,i.stroke())}}static roundedRectangle(t,n=null,s=10){return(i,r)=>{r.beginPath(),r.roundRect(-i.size.x*i.pivot.x,-i.size.y*i.pivot.y,i.size.x,i.size.y,s),r.fillStyle=t,r.fill(),n&&(r.strokeStyle=n,r.stroke())}}static line(t,n=1){return(s,i)=>{const r=h.one().subtract(s.pivot);i.beginPath(),i.moveTo(-s.size.x*s.pivot.x,-s.size.y*s.pivot.y),i.lineTo(s.size.x*r.x,s.size.y*r.y),i.strokeStyle=t,i.lineWidth=n,i.stroke()}}static image(t){return(n,s)=>{t.isLoaded()&&s.drawImage(t.getImage(),-n.size.x*n.pivot.x,-n.size.y*n.pivot.y,n.size.x,n.size.y)}}static sprite(t,n=()=>0){return(s,i)=>{if(!t.isLoaded())return;const r=n();t.drawFrame(i,r,-s.size.x*s.pivot.x,-s.size.y*s.pivot.y,s.size.x,s.size.y)}}static staticText(t,n="16px monospace, Consolas",s="#000",i="left",r="top",l=!1){return g.dynamicText(()=>t,n,s,i,r,l)}static dynamicText(t,n="16px monospace, Consolas",s="#000",i="left",r="top",l=!1){return(c,a)=>{c.hasDefaultSize&&(c.size=h.one());let o=[],f=0;l?(o=t().split(`
`),f=parseInt(n)):o=[t()];for(let u=0;u<o.length;u++)a.font=n,a.fillStyle=s,a.textAlign=i,a.textBaseline=r,a.fillText(o[u],0,f*u)}}static plotFunction(t,n,s={lower:-5,upper:5},i={lower:-5,upper:5},r=.1,l=()=>0,c=1){return(a,o)=>{const f=new h((a.pivot.x-.5)*a.size.x,(a.pivot.y-.5)*a.size.y),u=new h(-a.size.x/2-f.x,-a.size.y/2-f.y),d=1-s.upper/(s.upper-s.lower);if(d>=0&&d<=1){o.beginPath(),o.moveTo(u.x+a.size.x*d,u.y),o.lineTo(u.x+a.size.x*d,u.y+a.size.y),o.strokeStyle="#000",o.lineWidth=2,o.stroke(),o.font="16px monospace, Consolas",o.fillStyle="#000",o.textAlign="left",o.textBaseline="top",o.fillText(i.upper.toString(),u.x+a.size.x*d+5,u.y),o.textAlign="left",o.textBaseline="bottom",o.fillText(i.lower.toString(),u.x+a.size.x*d+5,u.y+a.size.y);for(let E=Math.ceil(i.lower);E<=Math.floor(i.upper);E+=c){if(E===0)continue;const L=u.y+a.size.y*(1-(E-i.lower)/(i.upper-i.lower));o.beginPath(),o.moveTo(u.x,L),o.lineTo(u.x+a.size.x,L),o.strokeStyle="#00000044",o.lineWidth=2,o.stroke()}}const p=i.upper/(i.upper-i.lower);if(p>=0&&p<=1){o.beginPath(),o.moveTo(u.x,u.y+a.size.y*p),o.lineTo(u.x+a.size.x,u.y+a.size.y*p),o.strokeStyle="#000",o.lineWidth=2,o.stroke(),o.fillStyle="#000",o.textAlign="left",o.textBaseline="top",o.fillText(s.lower.toString(),u.x,u.y+a.size.y*p+5),o.textAlign="right",o.textBaseline="top",o.fillText(s.upper.toString(),u.x+a.size.x,u.y+a.size.y*p+5);for(let E=Math.ceil(s.lower);E<=Math.floor(s.upper);E+=c){if(E===0)continue;const L=u.x+a.size.x*((E-s.lower)/(s.upper-s.lower));o.beginPath(),o.moveTo(L,u.y),o.lineTo(L,u.y+a.size.y),o.strokeStyle="#00000044",o.lineWidth=2,o.stroke()}}o.beginPath();const v=a.size.x/(s.upper-s.lower),P=a.size.y/(i.upper-i.lower);for(let E=s.lower;E<=s.upper;E+=r){const L=n(E);o.lineTo(u.x+(E-s.lower)*v,u.y+a.size.y-(L-i.lower)*P)}const O=n(s.upper);o.lineTo(u.x+(s.upper-s.lower)*v,u.y+a.size.y-(O-i.lower)*P),o.strokeStyle="#ff5722",o.lineWidth=4,o.stroke();const x=l(),S=n(x);d>=0&&d<=1&&(o.beginPath(),o.ellipse(u.x+a.size.x*d+x*v,u.y+a.size.y*p-S*P,5,5,0,0,Math.PI*2),o.fillStyle="#f00",o.strokeStyle="#fff",o.lineWidth=2,o.fill(),o.stroke()),o.font="20px monospace, Consolas",o.fillStyle="#fff",o.textAlign="center",o.textBaseline="bottom",o.fillText(t,u.x+a.size.x/2,u.y)}}}class nt{constructor(t,n,s){this.wrapper=t,this.context=n,this.time=s,this.objects={}}render(){}renderInOrder(...t){for(const n of t)n.render(this.context)}*sequence(){}static provide(){return(t,n,s)=>new this(t,n,s)}getFileInfo(){return"unknown"}}class pi{constructor(){this.delta=0,this.now=0}}class vi extends nt{constructor(t,n,s){super(t,n,s);const i=t.resolution;this.halfResolution=i.multiply(.5),this.objects={text:new _(g.staticText("Please provide a scene implementation.","32px Consolas, monospace","white","center","middle"),this.halfResolution,i)}}render(){this.objects.text.rotation=Math.sin(this.time.now*5)*Math.PI*.025,this.objects.text.render(this.context)}}const re=class re{constructor(t,n,s){if(this._time=new pi,this._startTime=0,this._resolution=new h(1280,720),this._resolutionScale=1,this._dpi=globalThis.devicePixelRatio||2,this._scene=null,this._glHandler=null,this._fpsData=new Float32Array(201),this._fpsAccumulative=0,this._fpsIndex=0,this._fpsBounds={lower:0,upper:60},this._topFps=60,this._bottomFps=-1,this._fpsPlot=new _(g.plotFunction("",r=>this._fpsData[(r+this._fpsIndex)%201],{lower:0,upper:200},this._fpsBounds,1,()=>200,20),new h(970,10),new h(300,65),new h(1,1),new h(0,0)),this._instanceId=re.IdCounter++,this._startTime=-1,this._canvas=t,this._wrapperElement=n,this._context=t.getContext("2d"),this._scene=s(this,this._context,this._time),this._scene===null&&(this._scene=new vi(this,this._context,this._time)),this._sequenceGenerator=this._scene.sequence(),!this._context)throw new Error("Failed to get 2D context from canvas");globalThis.requestAnimationFrame(this.onRenderFrame.bind(this));const i=()=>{this._canvas.width=this._wrapperElement.clientWidth*this._dpi*this._resolutionScale,this._canvas.height=this._wrapperElement.clientHeight*this._dpi*this._resolutionScale};globalThis.addEventListener("resize",i.bind(this)),i()}get resolution(){return this._resolution}get clientSize(){return new h(this._wrapperElement.clientWidth,this._wrapperElement.clientHeight)}onRenderFrame(t){const n=t/1e3;this._startTime<0&&(this._startTime=n),this._time.delta=n-this._startTime-this._time.now,this._time.now=n-this._startTime,this.setupTransformations(),this._scene.render(),this._sequenceGenerator.next(),this.drawDebugInfo(),globalThis.requestAnimationFrame(this.onRenderFrame.bind(this))}setupTransformations(){this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.fillStyle="#000",this._context.fillRect(0,0,this._canvas.width,this._canvas.height);const t=this._canvas.width/this._resolution.x,n=this._canvas.height/this._resolution.y,s=Math.min(t,n),i=(this._canvas.width-this._resolution.x*s)/2,r=(this._canvas.height-this._resolution.y*s)/2;this._context.setTransform(s,0,0,s,i,r),this._context.fillStyle="#444",this._context.fillRect(0,0,this._resolution.x,this._resolution.y),this._context.strokeStyle="white",this._context.strokeRect(0,0,this._resolution.x,this._resolution.y)}drawDebugInfo(){var n;if(_.debugMode===!1)return;this._context.fillStyle="#00000044",this._context.fillRect(0,0,1280,100),this._context.fillStyle="white",this._context.font="16px Consolas, monospace",this._context.textAlign="left",this._context.textBaseline="alphabetic",this._context.fillText(`(${this._instanceId}) Debug Info`,10,20),this._context.beginPath(),this._context.moveTo(10,30),this._context.lineTo(960,30),this._context.strokeStyle="white",this._context.lineWidth=1,this._context.lineCap="butt",this._context.stroke(),this._context.fillText(`Now       : ${this._time.now.toFixed(2)}s`,10,50),this._context.fillText(`Resolution: ${this._canvas.width}x${this._canvas.height}`,10,70),this._context.fillText(`Scene     : ${(n=this._scene)==null?void 0:n.getFileInfo()}`,10,90);const t=1/this._time.delta;this._context.textAlign="right",this._context.fillText(`FPS: ${t.toFixed(2).padStart(6,"0")}`,960,20),this._context.fillText(`Avg: ${(this._fpsAccumulative/200).toFixed(2).padStart(6,"0")}`,960,50),this._context.fillText(`Max: ${this._topFps.toFixed(2).padStart(6,"0")}`,960,70),this._context.fillText(`Min: ${this._bottomFps.toFixed(2).padStart(6,"0")}`,960,90),!(isNaN(t)||isFinite(t)===!1)&&(this._topFps=Math.max(this._topFps,t),this._bottomFps=this._bottomFps<0?t:Math.min(this._bottomFps,t),this._fpsAccumulative+=t,this._fpsIndex>=201&&(this._fpsAccumulative-=this._fpsData[this._fpsIndex%201]),_.debugMode=!1,this._fpsData[this._fpsIndex++%201]=t,this._fpsBounds.upper=Math.max(this._fpsBounds.upper,Math.ceil(t/10+1)*10),this._fpsPlot.render(this._context),_.debugMode=!0)}getTextSize(t){const n=this._context.measureText(t);return new h(n.actualBoundingBoxLeft+n.actualBoundingBoxRight,n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}getWebGLContext(){if(this._glHandler)return this._glHandler._glContext;const t=document.createElement("canvas");if(t.classList.add("webgl-canvas"),this._glHandler={_glCanvas:t,_glContext:t.getContext("webgl2"),_glResolution:new h(1280,720)},!this._glHandler._glContext)return console.error("WebGL context is not available."),null;const n=()=>{this._glHandler._glCanvas.width=this._wrapperElement.clientWidth,this._glHandler._glCanvas.height=this._wrapperElement.clientHeight;const s=this._wrapperElement.clientWidth/this._resolution.x,i=this._wrapperElement.clientHeight/this._resolution.y,r=Math.min(s,i),l=(this._wrapperElement.clientWidth-this._resolution.x*r)/2,c=(this._wrapperElement.clientHeight-this._resolution.y*r)/2;this._glHandler._glResolution.x=this._resolution.x*r,this._glHandler._glResolution.y=this._resolution.y*r,this._glHandler._glContext.viewport(l,c,this._resolution.x*r,this._resolution.y*r)};return globalThis.addEventListener("resize",n.bind(this)),setTimeout(n.bind(this),1),this._wrapperElement.insertBefore(this._glHandler._glCanvas,this._canvas),this._glHandler._glContext}};re.IdCounter=0;let $e=re;var _i=()=>_.setDebugMode(!_.debugMode),gi=$('<div class="canvas-wrapper svelte-2j3np0"><button class="fullscreen svelte-2j3np0"><span>‚õ∂</span></button> <button class="debugMode svelte-2j3np0"><span>üõ†Ô∏è</span></button> <canvas width="200" height="100"></canvas></div>');function at(e,t){Q(t,!0);let n=t.scene||(()=>null),s,i,r,l=N(!1);Bn(()=>{new $e(s,i,n),r.addEventListener("click",()=>{if(document.fullscreenElement){document.exitFullscreen().catch(u=>{console.error("Failed to exit fullscreen mode:",u)}),z(l,!1);return}i.requestFullscreen().catch(u=>{console.error("Failed to enter fullscreen mode:",u)}),z(l,!0)}),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||z(l,!1)})});var c=gi(),a=A(c);me(a,u=>r=u,()=>r);var o=I(a,2);o.__click=[_i];var f=I(o,2);me(f,u=>s=u,()=>s),me(c,u=>i=u,()=>i),_t(()=>Le(f,1,`canvas ${y(l)?"fullscreen":""}`,"svelte-2j3np0")),w(e,c),K()}Be(["click"]);var wi=$('<button role="tab"> </button>'),mi=$('<div class="tabs"><div class="tab-buttons svelte-12g5vdc" role="tablist"></div> <div class="tab-contents svelte-12g5vdc"><!></div></div>');function Ne(e,t){Q(t,!0);let n=rt([]),s=N(0);cs("tabs",{registerTab:a=>(n.push(a),n.length-1),activeTab:()=>y(s)});var i=mi(),r=A(i);Vs(r,21,()=>n,Ns,(a,o,f)=>{var u=wi();u.__click=()=>z(s,f,!0);let d;var p=A(u);_t(v=>{d=Le(u,1,"svelte-12g5vdc",null,d,v),ne(p,y(o).title)},[()=>({active:y(s)===f})]),w(a,u)});var l=I(r,2),c=A(l);pe(c,()=>t.children??oe),w(e,i),K()}Be(["click"]);var xi=$('<div class="tab-panel svelte-fai8lk" role="tabpanel"><!></div>');function lt(e,t){Q(t,!0);const{registerTab:n,activeTab:s}=us("tabs");let i=N(-1);Bn(()=>{z(i,n({title:t.title}),!0)});var r=qn(),l=St(r);{var c=a=>{var o=xi(),f=A(o);pe(f,()=>t.children),w(a,o)};Oe(l,a=>{y(i)===s()&&a(c)})}w(e,r),K()}class yi extends nt{getFileInfo(){return"src/rendering/scenes/SimpleFunctional.ts"}constructor(t,n,s){super(t,n,s),this.objects={xPlot:new _(g.plotFunction("f(x) = cos(Œ± + t)",i=>Math.cos(i+s.now),{lower:-1,upper:5},{lower:-2,upper:2},.1),new h(950,240),new h(300,200),new h(1,1),new h(.5,.5),0),yPlot:new _(g.plotFunction("f(y) = sin(Œ± + t)",i=>Math.sin(i+s.now),{lower:-1,upper:5},{lower:-2,upper:2},.1),new h(950,480),new h(300,200),new h(1,1),new h(.5,.5),0),pathCircle:new _(g.ellipse("transparent","#000"),new h(350,360),new h(400,400),new h(1,1),new h(.5,.5),0),circle:new _(g.ellipse("#ff5722","#ff8a50"),new h(350,360),new h(50,50),new h(1,1),new h(.5,.5),0)}}render(){this.objects.circle.position=new h(350+200*Math.cos(this.time.now),360+200*Math.sin(this.time.now)),this.context.lineWidth=2,this.renderInOrder(this.objects.pathCircle,this.objects.xPlot,this.objects.yPlot,this.objects.circle)}}class He{constructor(t){this.time=t}}class ut{static*run(t){for(t.start();!t.tick();)yield}static*runTogether(t){t.forEach(s=>s.start());let n;do n=t.map(s=>s.tick()),yield;while(n.some(s=>!s))}}class ve extends He{constructor(t,n){super(t),this.startTime=0,this.endTime=0,this.duration=0,this.finished=!0,this.duration=n}start(){this.startTime=this.time.now,this.endTime=this.startTime+this.duration,this.finished=!1}tick(){return this.finished?!0:(this.time.now>=this.endTime&&(this.finished=!0),this.finished)}}class Tt extends He{constructor(t,n,s){super(t),this.startTime=0,this.endTime=0,this.finished=!0,this.setter=n,this.options=s,this.options.easing=s.easing??(i=>i)}start(){this.startTime=this.time.now,this.endTime=this.startTime+this.options.duration,this.finished=!1,this.setter(this.options.startValue)}tick(){if(this.finished)return!0;const t=this.time.now,n=t-this.startTime,s=Math.min(n/this.options.duration,1),i=this.options.easing(s),r=this.options.startValue+(this.options.endValue-this.options.startValue)*i;return this.setter(r),t>=this.endTime&&(this.finished=!0,this.setter(this.options.endValue)),this.finished}get progress(){if(this.finished)return 1;const n=this.time.now-this.startTime;return Math.min(n/this.options.duration,1)}reverse(){const t=this.options.startValue;this.options.startValue=this.options.endValue,this.options.endValue=t}}class H{static linear(t){return t}static easeInQuad(t){return t*t}static easeOutQuad(t){return t*(2-t)}static easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t}static easeInCubic(t){return t*t*t}static easeOutCubic(t){return 1-Math.pow(1-t,3)}static easeInOutCubic(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}static easeInElastic(t){const n=2*Math.PI/3;return t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*n)}static easeOutElastic(t){const n=2*Math.PI/3;return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*n)+1}static easeInOutElastic(t){const n=2*Math.PI/4.5;return t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*n))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*n)/2+1}}class xt extends He{constructor(t,n,s,i){super(t),this.currentIndex=0,this.values=s,this.interpolator=new Tt(t,n,{startValue:s[0],endValue:s[1],duration:i.duration,easing:i.easing}),this.endsOnStart=i.loops??!1}start(){this.interpolator.start(),this.currentIndex=0,this.interpolator.options.startValue=this.values[0],this.interpolator.options.endValue=this.values[1]}tick(){return this.currentIndex>=this.values.length-(this.endsOnStart?0:1)?!0:(this.interpolator.tick()&&(this.currentIndex++,this.currentIndex<this.values.length&&(this.interpolator.options.startValue=this.values[this.currentIndex],this.interpolator.options.endValue=this.values[(this.currentIndex+1)%this.values.length],this.interpolator.start())),!1)}}class bi extends nt{getFileInfo(){return"src/rendering/scenes/SimpleInterpolation.ts"}constructor(t,n,s){super(t,n,s),this.dotPositions={ballA:0,ballB:0,ballC:0},this.objects={ballA:new _(g.ellipse("#ff5722","#ff0000"),new h(340,360),new h(50,50),new h(1,1),new h(.5,.5),0),ballB:new _(g.ellipse("#57ff22","#00ff22"),new h(640,360),new h(50,50),new h(1,1),new h(.5,.5),0),ballC:new _(g.ellipse("#2257ff","#2200ff"),new h(940,360),new h(50,50),new h(1,1),new h(.5,.5),0),easingPlotA:new _(g.plotFunction("easeInQuad: t ^ 2",H.easeInQuad,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballA),new h(340,150),new h(200,200),new h(1,1),new h(.5,.5),0),easingPlotB:new _(g.plotFunction("easeOutQuad: t * (2 - t)",H.easeOutQuad,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballB),new h(640,150),new h(200,200),new h(1,1),new h(.5,.5),0),easingPlotC:new _(g.plotFunction("easeInOutElastic: <...>",H.easeInOutElastic,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballC),new h(940,150),new h(200,200),new h(1,1),new h(.5,.5),0)},this.sequencers={ballAInterpolator:new Tt(s,i=>{this.objects.ballA.position.y=i},{startValue:360,endValue:600,duration:1,easing:i=>i*i}),ballBInterpolator:new Tt(s,i=>{this.objects.ballB.position.y=i},{startValue:360,endValue:600,duration:1,easing:i=>1-Math.pow(1-i,2)}),ballCInterpolator:new Tt(s,i=>{this.objects.ballC.position.y=i},{startValue:360,endValue:600,duration:1,easing:H.easeInOutElastic}),timer:new ve(s,.5)}}*sequence(){for(;;)yield*ut.runTogether([this.sequencers.ballAInterpolator,this.sequencers.ballBInterpolator,this.sequencers.ballCInterpolator]),yield*ut.run(this.sequencers.timer),this.sequencers.ballAInterpolator.reverse(),this.sequencers.ballBInterpolator.reverse(),this.sequencers.ballCInterpolator.reverse()}render(){this.context.strokeStyle="#222",this.context.lineWidth=16,this.context.lineCap="round",this.context.beginPath(),this.context.moveTo(340,360),this.context.lineTo(340,600),this.context.moveTo(640,360),this.context.lineTo(640,600),this.context.moveTo(940,360),this.context.lineTo(940,600),this.context.stroke(),this.context.lineWidth=1,this.dotPositions.ballA=this.sequencers.ballAInterpolator.progress,this.dotPositions.ballB=this.sequencers.ballBInterpolator.progress,this.dotPositions.ballC=this.sequencers.ballCInterpolator.progress,Object.keys(this.objects).forEach(t=>{this.objects[t].render(this.context)})}}class Ti extends nt{getFileInfo(){return"src/rendering/scenes/SimpleSequence.ts"}constructor(t,n,s){super(t,n,s),this.rectPath=[new h(160,160),new h(560,160),new h(560,560),new h(160,560)],this.polyPath=[new h(720,260),new h(920,160),new h(1120,260),new h(720,460),new h(920,560),new h(1120,460)],this.objects={circleA:new _(g.ellipse("#ff5722","#ff0000"),new h(340,360),new h(50,50),new h(1,1),new h(.5,.5),0),circleB:new _(g.ellipse("#ff5722","#ff0000"),new h(720,360),new h(50,50),new h(1,1),new h(.5,.5),0),path:new _(g.roundedRectangle("#00000000","#000",8),new h(360,360),new h(400,400))},this.sequencers={sequenceAX:new xt(this.time,i=>this.objects.circleA.position.x=i,this.rectPath.map(i=>i.x),{duration:.75,easing:H.linear,loops:!0}),sequenceAY:new xt(this.time,i=>this.objects.circleA.position.y=i,this.rectPath.map(i=>i.y),{duration:.75,easing:H.linear,loops:!0}),sequenceBX:new xt(this.time,i=>this.objects.circleB.position.x=i,this.polyPath.map(i=>i.x),{duration:.5,easing:H.easeInOutCubic,loops:!0}),sequenceBY:new xt(this.time,i=>this.objects.circleB.position.y=i,this.polyPath.map(i=>i.y),{duration:.5,easing:H.easeInOutCubic,loops:!0})}}render(){this.context.beginPath(),this.context.moveTo(this.polyPath[0].x,this.polyPath[0].y);for(let t=1;t<this.polyPath.length;t++)this.context.lineTo(this.polyPath[t].x,this.polyPath[t].y);this.context.closePath(),this.context.strokeStyle="#000",this.context.lineWidth=2,this.context.stroke(),this.renderInOrder(this.objects.path,this.objects.circleA,this.objects.circleB)}*sequence(){for(;;)yield*ut.runTogether([this.sequencers.sequenceAX,this.sequencers.sequenceAY,this.sequencers.sequenceBX,this.sequencers.sequenceBY])}}const ft=class ft{constructor(t){this.loaded=!1,this.size=new h(-1,-1);const n=Ht+t;if(this.image=ft.cache.get(n)||new Image,!ft.cache.has(n))this.image.src=n,ft.cache.set(n,this.image);else{this.loaded=!0;const s=ft.cache.get(n);this.size.set(s.width,s.height)}this.image.onload=()=>{this.loaded=!0,this.size.set(this.image.width,this.image.height)}}isLoaded(){return this.loaded}getImage(){return this.loaded||console.warn(`Image at ${this.image.src} is not loaded yet.`),this.image}};ft.cache=new Map;let se=ft;const dt=class dt extends se{constructor(t,n,s,i=n*s){super(t),this.framesX=n,this.framesY=s,this.frameCount=i}drawFrame(t,n,s,i,r,l){if(!this.isLoaded()){console.warn(`Spritesheet at ${this.image.src} is not loaded yet.`);return}const c=n%this.frameCount,a=this.image.width/this.framesX,o=this.image.height/this.framesY,f=c%this.framesX*a,u=Math.floor(c/this.framesX)*o;t.drawImage(this.image,f+dt.BIAS,u+dt.BIAS,a-dt.BIAS*2,o-dt.BIAS*2,s,i,r,l)}};dt.BIAS=.5;let Pt=dt;class Pi{constructor(t,n){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=n,this.context=this.canvas.getContext("2d")}getCanvas(){return this.canvas}getContext(){return this.context}get imageData(){return this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}set imageData(t){this.context.putImageData(t,0,0)}}class Ei extends nt{getFileInfo(){return"src/rendering/scenes/ComplexSequence.ts"}constructor(t,n,s){super(t,n,s),this.textures={wood:new se("/wood.webp")},this.objects={sign:new _(g.image(this.textures.wood),new h(0,200),new h(400,300),new h(1,1),new h(.5,0)),text:new _(g.staticText(["This whole animation is done","with the following objects:","","2 simple sequences.","A looping interpolator."].join(`
`),"20px Arial","#ffffff","center","top",!0),new h(0,100)),ropeLeft:new _(g.roundedRectangle("#000",null,5),new h(0,0),new h(10,300),new h(1,1),new h(.5,.01),Math.PI/5),ropeRight:new _(g.roundedRectangle("#000",null,5),new h(0,0),new h(10,300),new h(1,1),new h(.5,.01),-Math.PI/5),pivot:new _(()=>{},new h(640,-1e3),new h(1,1)),nail:new _(g.roundedRectangle("#888","#000",4),new h(0,8),new h(16,16),new h(1,1),new h(.5,.5),.2)},this.objects.pivot.append(this.objects.ropeLeft,this.objects.ropeRight,this.objects.sign,this.objects.nail),this.objects.sign.append(this.objects.text),this.sequencers={timer:new ve(this.time,.5),signRotation:new xt(this.time,i=>this.objects.sign.rotation=i,[0,-.05,.05,0],{duration:.25,easing:H.easeInOutQuad}),pivotY:new Tt(this.time,i=>this.objects.pivot.position.y=i,{startValue:-600,endValue:100,duration:1,easing:H.easeOutElastic}),pivotRotationStart:new xt(this.time,i=>{this.objects.pivot.rotation=i,this.objects.nail.rotation=-i+.2},[Math.PI/5,-Math.PI/5,Math.PI/10],{duration:.6666,easing:H.easeInOutQuad}),pivotRotationLoop:new Tt(this.time,i=>{this.objects.pivot.rotation=i,this.objects.nail.rotation=-i+.2},{startValue:Math.PI/10,endValue:-Math.PI/10,duration:.6666,easing:H.easeInOutQuad})}}*sequence(){for(yield*ut.run(this.sequencers.timer),yield*ut.runTogether([this.sequencers.signRotation,this.sequencers.pivotY,this.sequencers.pivotRotationStart]);;)if(yield*ut.run(this.sequencers.pivotRotationLoop),this.sequencers.pivotRotationLoop.reverse(),this.sequencers.pivotRotationLoop.options.endValue*=.5,Math.abs(this.sequencers.pivotRotationLoop.options.endValue)<.001){this.objects.pivot.rotation=0;break}}render(){this.objects.pivot.render(this.context)}}var Ii=$("<!> <!> <!> <!>",1);function $i(e,t){Q(t,!1),Re(),ht(e,{title:"Functional Animations",children:(n,s)=>{Ne(n,{children:(i,r)=>{var l=Ii(),c=St(l);lt(c,{title:"Simple functional",children:(u,d)=>{const p=Z(()=>yi.provide());at(u,{get scene(){return y(p)}})},$$slots:{default:!0}});var a=I(c,2);lt(a,{title:"Simple interpolation",children:(u,d)=>{const p=Z(()=>bi.provide());at(u,{get scene(){return y(p)}})},$$slots:{default:!0}});var o=I(a,2);lt(o,{title:"Simple sequence",children:(u,d)=>{const p=Z(()=>Ti.provide());at(u,{get scene(){return y(p)}})},$$slots:{default:!0}});var f=I(o,2);lt(f,{title:"Complex sequence",children:(u,d)=>{const p=Z(()=>Ei.provide());at(u,{get scene(){return y(p)}})},$$slots:{default:!0}}),w(i,l)},$$slots:{default:!0}})},$$slots:{default:!0}}),K()}class jt{constructor(t,n,s){this.background=new _(g.roundedRectangle("rgba(0, 0, 0, 0.5)","black",8),t,n.clone(),new h(1,1),new h(0,0)),this.foreground=new _(g.roundedRectangle("rgba(0, 255, 0, 0.5)","green",8),new h(0,0),n.clone(),new h(1,1),new h(0,0)),this.text=new _(g.dynamicText(s,"24px Consolas, monospace","white","left","middle"),new h(0,-12)),this.background.append(this.foreground,this.text)}render(t){this.background.render(t)}setProgress(t){this.foreground.size.x=this.background.size.x*t}}class Si extends nt{getFileInfo(){return"src/rendering/scenes/CatPendulum.ts"}constructor(t,n,s){super(t,n,s),this.textures={cat1:new Pt("/cat-spritesheet.webp",12,14,158),cat2:new Pt("/cat-alt-spritesheet.webp",9,8,71),cat3:new Pt("/cat-alt-02-spritesheet.webp",9,8,68)},this.objects={cat1:new _(g.sprite(this.textures.cat1,()=>Math.floor(s.now*24)),new h(0,200),new h(200,200),new h(1,1),new h(.5,0),0),cat2:new _(g.sprite(this.textures.cat2,()=>Math.floor(s.now*24)),new h(0,150),new h(200,200),new h(1,1),new h(.5,0),0),cat3:new _(g.sprite(this.textures.cat3,()=>Math.floor(s.now*24)),new h(640,100),new h(200,150),new h(1,1),new h(.5,0),0),texts:{cat1:new _(g.staticText("Cat 1: 158 frames","24px Consolas, monospace","white","center","middle")),cat2:new _(g.staticText("Cat 2: 71 frames","24px Consolas, monospace","white","center","middle")),cat3:new _(g.staticText("Cat 3: 68 frames","24px Consolas, monospace","white","center","middle"))},progressBars:{cat1:new jt(new h(50,518),new h(128,24),()=>`Cat 1: ${Math.floor(s.now*24)%158+1} / 158`),cat2:new jt(new h(50,582),new h(128,24),()=>`Cat 2: ${Math.floor(s.now*24)%71+1} / 71`),cat3:new jt(new h(50,646),new h(128,24),()=>`Cat 3: ${Math.floor(s.now*24)%68+1} / 68`)}},this.objects.cat3.append(this.objects.texts.cat3,this.objects.cat2),this.objects.cat2.append(this.objects.texts.cat2,this.objects.cat1),this.objects.cat1.append(this.objects.texts.cat1)}render(){this.objects.cat1.rotation=Math.sin(this.time.now*2)*.75,this.objects.cat2.rotation=Math.sin(this.time.now*3)*.5,this.objects.cat3.rotation=Math.sin(this.time.now*4)*.5,this.objects.progressBars.cat1.setProgress(Math.round(this.time.now*24)/158%1),this.objects.progressBars.cat2.setProgress(Math.round(this.time.now*24)/71%1),this.objects.progressBars.cat3.setProgress(Math.round(this.time.now*24)/68%1),this.renderInOrder(this.objects.cat3,this.objects.progressBars.cat1,this.objects.progressBars.cat2,this.objects.progressBars.cat3)}}class Ci extends nt{getFileInfo(){return"src/rendering/scenes/SimpleFrameAnimation.ts"}constructor(t,n,s){super(t,n,s),this.textures={cat:new Pt("/cat-spritesheet.webp",12,14,158)},this.objects={cat:new _(g.sprite(this.textures.cat,()=>Math.floor(s.now*24)),new h(1280/2,720/2),new h(256,256)),progressBar:new jt(new h(256/2,592),new h(1024,32),()=>`Frame: ${Math.floor(s.now*24)%158} / 158`)}}render(){this.objects.progressBar.setProgress(Math.round(this.time.now*24)/158%1),this.renderInOrder(this.objects.cat,this.objects.progressBar)}}var Mi=$("<!> <!>",1);function Ai(e,t){Q(t,!1),Re(),ht(e,{title:"Frame Animations",children:(n,s)=>{Ne(n,{children:(i,r)=>{var l=Mi(),c=St(l);lt(c,{title:"Simple",children:(o,f)=>{const u=Z(()=>Ci.provide());at(o,{get scene(){return y(u)}})},$$slots:{default:!0}});var a=I(c,2);lt(a,{title:"Complex",children:(o,f)=>{const u=Z(()=>Si.provide());at(o,{get scene(){return y(u)}})},$$slots:{default:!0}}),w(i,l)},$$slots:{default:!0}})},$$slots:{default:!0}}),K()}class ki extends nt{getFileInfo(){return"src/rendering/scenes/GameOfLife.ts"}constructor(t,n,s){super(t,n,s);const i=t.resolution,r=8;this.cols=Math.floor(i.x/r),this.rows=Math.floor(i.y/r),this.grid=new Pi(this.cols,this.rows),this.imageData=this.grid.imageData,this.timer=new ve(s,1/30);const l=this.imageData;for(let c=0;c<this.rows;c++)for(let a=0;a<this.cols;a++)l.data[(c*this.cols+a)*4]=0,l.data[(c*this.cols+a)*4+1]=0,l.data[(c*this.cols+a)*4+2]=0,l.data[(c*this.cols+a)*4+3]=Math.random()<.5?255:0;this.grid.imageData=l}*sequence(){for(;;)this.updateGrid(),yield*ut.run(this.timer)}render(){const t=this.context;t.fillStyle="#ff5722",t.fillRect(0,0,this.wrapper.resolution.x,this.wrapper.resolution.y),t.imageSmoothingEnabled=!1,t.drawImage(this.grid.getCanvas(),0,0,this.wrapper.resolution.x,this.wrapper.resolution.y)}updateGrid(){const t=Array.from(this.grid.imageData.data.filter((n,s)=>s%4===3)).map(n=>n>0);for(let n=0;n<t.length;n++){const s=Math.floor(n/this.cols),i=n%this.cols,r=this.countAliveNeighbors(t,s,i);t[n]?r<2||r>3?this.imageData.data[n*4+3]=0:this.imageData.data[n*4+3]=255:r===3?this.imageData.data[n*4+3]=255:this.imageData.data[n*4+3]=0}this.grid.imageData=this.imageData}countAliveNeighbors(t,n,s){const i=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];let r=0;for(const[l,c]of i){const a=n+l,o=s+c;if(a>=0&&a<this.rows&&o>=0&&o<this.cols){const f=a*this.cols+o;t[f]&&r++}}return r}}function xe(e,t,n){return e+(t-e)*n}const V=class V{constructor(){this.position=new h(Math.random()*320+480,Math.random()*180+270),this.rotation=Math.random()*2*Math.PI}render(t){t.save(),t.translate(this.position.x,this.position.y),t.rotate(this.rotation);const n=this.position.x/1280,s=this.position.y/720,i={r:xe(V.topLeftColor.r,V.bottomRightColor.r,n),g:xe(V.topLeftColor.g,V.bottomRightColor.g,s),b:xe(V.topLeftColor.b,V.bottomRightColor.b,n+s)};t.fillStyle=`rgb(${i.r}, ${i.g}, ${i.b})`,t.beginPath(),t.moveTo(10,0),t.lineTo(-10,7),t.lineTo(-5,0),t.lineTo(-10,-7),t.fill(),_.debugMode&&(t.strokeStyle="#ff0000",t.beginPath(),t.moveTo(0,0),t.lineTo(50,0),t.stroke()),t.restore()}};V.speed=250,V.topLeftColor={r:200,g:128,b:255},V.bottomRightColor={r:200,g:255,b:128};let ie=V;const C=class C extends nt{getFileInfo(){return"src/rendering/scenes/Boids.ts"}constructor(t,n,s){super(t,n,s),this.agents=Array.from({length:C.agentCount},()=>new ie),this.sequencers={timer:new ve(this.time,1/60)}}separation(t){for(const n of t){const s=new h(0,0);let i=0;for(const r of t){if(r===n)continue;const l=n.position.subtract(r.position).length();l<C.separationDistance&&l>0&&(s.addInPlace(n.position.subtract(r.position).normalize().multiplyInPlace(1/l)),i++)}if(i>0){s.multiplyInPlace(1/i);let l=Math.atan2(s.y,s.x)-n.rotation;l=Math.atan2(Math.sin(l),Math.cos(l)),n.rotation+=l*C.separationStrength}}}alignment(t){for(const n of t){let s=0,i=0;for(const r of t){if(r===n)continue;n.position.subtract(r.position).length()<C.alignmentDistance&&(s+=r.rotation,i++)}if(i>0){s/=i;let r=s-n.rotation;r=Math.atan2(Math.sin(r),Math.cos(r)),n.rotation+=r*C.alignmentStrength}}}cohesion(t){for(const n of t){const s=new h(640,360);let i=1;for(const r of t)n.position.subtract(r.position).length()<C.cohesionDistance&&(s.addInPlace(r.position),i++);if(i>0){s.multiplyInPlace(1/i);const r=s.subtract(n.position).normalize();let c=Math.atan2(r.y,r.x)-n.rotation;c=Math.atan2(Math.sin(c),Math.cos(c)),n.rotation+=c*C.cohesionStrength}}}bounds(){for(const t of this.agents)t.position.x=(t.position.x+1280)%1280,t.position.y=(t.position.y+720)%720}physics(t){for(const n of this.agents)n.position.addInPlace(new h(Math.cos(n.rotation),Math.sin(n.rotation)).multiplyInPlace(ie.speed*t))}*sequence(){for(;;)yield*ut.run(this.sequencers.timer),this.separation(this.agents),this.alignment(this.agents),this.cohesion(this.agents),this.physics(1/60),this.bounds()}render(){for(const t of this.agents)t.render(this.context)}};C.agentCount=500,C.separationDistance=40,C.separationStrength=.25,C.alignmentDistance=140,C.alignmentStrength=.3,C.cohesionDistance=200,C.cohesionStrength=.07;let Se=C;var Fi=$("<!> <!>",1);function zi(e,t){Q(t,!1),Re(),ht(e,{title:"Rule Based Animations",children:(n,s)=>{Ne(n,{children:(i,r)=>{var l=Fi(),c=St(l);lt(c,{title:"Conway's Game of Life",children:(o,f)=>{const u=Z(()=>ki.provide());at(o,{get scene(){return y(u)}})},$$slots:{default:!0}});var a=I(c,2);lt(a,{title:"Boids",children:(o,f)=>{const u=Z(()=>Se.provide());at(o,{get scene(){return y(u)}})},$$slots:{default:!0}}),w(i,l)},$$slots:{default:!0}})},$$slots:{default:!0}}),K()}console.log("Running in production mode.");const Ht="/emergent-animations",Ve=[],qi=[{href:"/",component:ri,title:"Home"},{href:"/404",component:ai,title:"404"},{href:"/thesis",component:ui,title:"Thesis"},{href:"/about",component:hi,title:"About"},{href:"/examples",component:di,title:"Examples"},{href:"/examples/functional-animations",component:$i,title:"Functional Animations"},{href:"/examples/frame-animations",component:Ai,title:"Frame Animations"},{href:"/examples/rule-based-animations",component:zi,title:"Rule Based Animations"}],It=qi.reduce((e,t)=>(e[t.href]=t,e),{});let Dt=It[globalThis.location.pathname.replace(Ht,"")]??It["/404"];function Di(e){globalThis.history.pushState({},"",Ht+e),Dt=It[e]??It["/404"],Ve.forEach(t=>t(Dt))}function Bi(){return Dt}function Oi(e){Ve.push(e)}globalThis.addEventListener("popstate",()=>{const e=globalThis.location.pathname.replace(Ht,"");Dt=It[e]??It["/404"],Ve.forEach(t=>t(Dt))});function Li(e,t,n){t()===""&&(e.preventDefault(),e.stopPropagation(),Di(n.href))}var Ri=$("<a><!> <!></a>");function G(e,t){Q(t,!0);let n=pt(t,"style",3,""),s=pt(t,"cssClass",3,""),i=pt(t,"target",3,""),r=pt(t,"rel",3,"");var l=Ri();l.__click=[Li,i,t];var c=A(l);pe(c,()=>t.children??oe);var a=I(c,2);{var o=f=>{var u=W();_t(()=>ne(u,t.href)),w(f,u)};Oe(a,f=>{t.children||f(o)})}_t(()=>{kt(l,"href",t.href),Dn(l,n()),kt(l,"target",i()),kt(l,"rel",r()),Le(l,1,`link ${s()??""}`,"svelte-1iwy9kf")}),w(e,l),K()}Be(["click"]);var Ni=$('<header class="svelte-1xgxzs1"><!> <nav class="svelte-1xgxzs1"><!> <!> <!> <!></nav></header>');function Hi(e){var t=Ni(),n=A(t);G(n,{href:"/",cssClass:"navbar-title",children:(a,o)=>{var f=W("Emergent Animations");w(a,f)},$$slots:{default:!0}});var s=I(n,2),i=A(s);G(i,{cssClass:"navbar-link",href:"/",children:(a,o)=>{var f=W("Home");w(a,f)},$$slots:{default:!0}});var r=I(i,2);G(r,{cssClass:"navbar-link",href:"/thesis",children:(a,o)=>{var f=W("Thesis");w(a,f)},$$slots:{default:!0}});var l=I(r,2);G(l,{cssClass:"navbar-link",href:"/examples",children:(a,o)=>{var f=W("Examples");w(a,f)},$$slots:{default:!0}});var c=I(l,2);G(c,{cssClass:"navbar-link",href:"/about",children:(a,o)=>{var f=W("About");w(a,f)},$$slots:{default:!0}}),w(e,t)}function Vi(e,t){Q(t,!0);let n=N(rt(Bi())),s=Ge(()=>{var a;return(a=y(n))==null?void 0:a.component}),i=Ge(()=>{var a;return((a=y(n))==null?void 0:a.title)||"*"}),r=null;Oi(a=>{y(n).href!=a.href&&(r&&clearTimeout(r),document.getElementById("current-page").classList.add("fade-out"),r=setTimeout(()=>{z(n,a,!0),document.getElementById("current-page").classList.remove("fade-out")},150))});var l=qn();Ds(a=>{_t(()=>wn.title=`Emergent Animations - ${y(i)??""}`)});var c=St(l);Xs(c,()=>y(s),(a,o)=>{o(a,{})}),w(e,l),K()}var Wi=$('<!> <main class="svelte-7hgqb0"><!></main> <footer class="svelte-7hgqb0"><span>Created by <!> using <!> ‚ù§Ô∏è</span></footer>',1);function Yi(e){var t=Wi(),n=St(t);Hi(n);var s=I(n,2),i=A(s);Vi(i,{});var r=I(s,2),l=A(r),c=I(A(l));G(c,{href:"https://github.com/KissKonradUni/emergent-animations",target:"_blank",rel:"noopener noreferrer",children:(o,f)=>{var u=W("Konr√°d Soma Kiss");w(o,u)},$$slots:{default:!0}});var a=I(c,2);G(a,{href:"https://svelte.dev",target:"_blank",rel:"noopener noreferrer",children:(o,f)=>{var u=W("Svelte");w(o,u)},$$slots:{default:!0}}),w(e,t)}Os(Yi,{target:document.body});
