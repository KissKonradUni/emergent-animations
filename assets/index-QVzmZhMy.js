(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();const Qe=!1;var Ce=Array.isArray,Gn=Array.prototype.indexOf,Ae=Array.from,Un=Object.defineProperty,ct=Object.getOwnPropertyDescriptor,Kn=Object.getOwnPropertyDescriptors,Qn=Object.prototype,Zn=Array.prototype,cn=Object.getPrototypeOf,Ze=Object.isExtensible;function zt(n){return typeof n=="function"}const le=()=>{};function Jn(n){for(var t=0;t<n.length;t++)n[t]()}const W=2,fn=4,ae=8,ze=16,J=32,Pt=64,Ut=128,D=256,Kt=512,B=1024,G=2048,gt=4096,Q=8192,ue=16384,ts=32768,Rt=65536,dn=1<<19,pn=1<<20,Te=1<<21,kt=Symbol("$state"),es=Symbol("legacy props"),ns=Symbol("");function vn(n){return n===this.v}function ss(n,t){return n!=n?t==t:n!==t||n!==null&&typeof n=="object"||typeof n=="function"}function gn(n){return!ss(n,this.v)}function is(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function rs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function os(n){throw new Error("https://svelte.dev/e/effect_orphan")}function ls(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function as(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function us(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function hs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Dt=!1,cs=!1;function fs(){Dt=!0}const ke=1,Fe=2,_n=4,ds=8,ps=16,vs=1,gs=2,$=Symbol(),_s="http://www.w3.org/1999/xhtml";function wn(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let y=null;function Je(n){y=n}function ws(n){return mn().get(n)}function ms(n,t){return mn().set(n,t),t}function rt(n,t=!1,e){var s=y={p:y,c:null,d:!1,e:null,m:!1,s:n,x:null,l:null};Dt&&!t&&(y.l={s:null,u:null,r1:[],r2:qt(!1)}),Cs(()=>{s.d=!0})}function ot(n){const t=y;if(t!==null){const a=t.e;if(a!==null){var e=M,s=b;t.e=null;try{for(var i=0;i<a.length;i++){var r=a[i];Tt(r.effect),it(r.reaction),qe(r.fn)}}finally{Tt(e),it(s)}}y=t.p,t.m=!0}return{}}function he(){return!Dt||y!==null&&y.l===null}function mn(n){return y===null&&wn(),y.c??(y.c=new Map(xs(y)||void 0))}function xs(n){let t=n.p;for(;t!==null;){const e=t.c;if(e!==null)return e;t=t.p}return null}function K(n){if(typeof n!="object"||n===null||kt in n)return n;const t=cn(n);if(t!==Qn&&t!==Zn)return n;var e=new Map,s=Ce(n),i=N(0),r=b,a=u=>{var l=b;it(r);var o=u();return it(l),o};return s&&e.set("length",N(n.length)),new Proxy(n,{defineProperty(u,l,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&as();var f=e.get(l);return f===void 0?(f=a(()=>N(o.value)),e.set(l,f)):q(f,a(()=>K(o.value))),!0},deleteProperty(u,l){var o=e.get(l);if(o===void 0)l in u&&(e.set(l,a(()=>N($))),we(i));else{if(s&&typeof l=="string"){var f=e.get("length"),c=Number(l);Number.isInteger(c)&&c<f.v&&q(f,c)}q(o,$),we(i)}return!0},get(u,l,o){var p;if(l===kt)return n;var f=e.get(l),c=l in u;if(f===void 0&&(!c||(p=ct(u,l))!=null&&p.writable)&&(f=a(()=>N(K(c?u[l]:$))),e.set(l,f)),f!==void 0){var d=T(f);return d===$?void 0:d}return Reflect.get(u,l,o)},getOwnPropertyDescriptor(u,l){var o=Reflect.getOwnPropertyDescriptor(u,l);if(o&&"value"in o){var f=e.get(l);f&&(o.value=T(f))}else if(o===void 0){var c=e.get(l),d=c==null?void 0:c.v;if(c!==void 0&&d!==$)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return o},has(u,l){var d;if(l===kt)return!0;var o=e.get(l),f=o!==void 0&&o.v!==$||Reflect.has(u,l);if(o!==void 0||M!==null&&(!f||(d=ct(u,l))!=null&&d.writable)){o===void 0&&(o=a(()=>N(f?K(u[l]):$)),e.set(l,o));var c=T(o);if(c===$)return!1}return f},set(u,l,o,f){var F;var c=e.get(l),d=l in u;if(s&&l==="length")for(var p=o;p<c.v;p+=1){var v=e.get(p+"");v!==void 0?q(v,$):p in u&&(v=a(()=>N($)),e.set(p+"",v))}c===void 0?(!d||(F=ct(u,l))!=null&&F.writable)&&(c=a(()=>N(void 0)),q(c,a(()=>K(o))),e.set(l,c)):(d=c.v!==$,q(c,a(()=>K(o))));var I=Reflect.getOwnPropertyDescriptor(u,l);if(I!=null&&I.set&&I.set.call(f,o),!d){if(s&&typeof l=="string"){var S=e.get("length"),E=Number(l);Number.isInteger(E)&&E>=S.v&&q(S,E+1)}we(i)}return!0},ownKeys(u){T(i);var l=Reflect.ownKeys(u).filter(c=>{var d=e.get(c);return d===void 0||d.v!==$});for(var[o,f]of e)f.v!==$&&!(o in u)&&l.push(o);return l},setPrototypeOf(){us()}})}function we(n,t=1){q(n,n.v+t)}function $e(n){var t=W|G,e=b!==null&&(b.f&W)!==0?b:null;return M===null||e!==null&&(e.f&D)!==0?t|=D:M.f|=pn,{ctx:y,deps:null,effects:null,equals:vn,f:t,fn:n,reactions:null,rv:0,v:null,wv:0,parent:e??M}}function me(n){const t=$e(n);return qn(t),t}function ys(n){const t=$e(n);return t.equals=gn,t}function xn(n){var t=n.effects;if(t!==null){n.effects=null;for(var e=0;e<t.length;e+=1)Z(t[e])}}function bs(n){for(var t=n.parent;t!==null;){if((t.f&W)===0)return t;t=t.parent}return null}function yn(n){var t,e=M;Tt(bs(n));try{xn(n),t=Dn(n)}finally{Tt(e)}return t}function bn(n){var t=yn(n),e=(st||(n.f&D)!==0)&&n.deps!==null?gt:B;Y(n,e),n.equals(t)||(n.v=t,n.wv=On())}const $t=new Map;function qt(n,t){var e={f:0,v:n,reactions:null,equals:vn,rv:0,wv:0};return e}function N(n,t){const e=qt(n);return qn(e),e}function Ms(n,t=!1){var s;const e=qt(n);return t||(e.equals=gn),Dt&&y!==null&&y.l!==null&&((s=y.l).s??(s.s=[])).push(e),e}function q(n,t,e=!1){b!==null&&!X&&he()&&(b.f&(W|ze))!==0&&!(k!=null&&k.includes(n))&&hs();let s=e?K(t):t;return Ie(n,s)}function Ie(n,t){if(!n.equals(t)){var e=n.v;Nt?$t.set(n,t):$t.set(n,e),n.v=t,(n.f&W)!==0&&((n.f&G)!==0&&yn(n),Y(n,(n.f&D)===0?B:gt)),n.wv=On(),Mn(n,G),he()&&M!==null&&(M.f&B)!==0&&(M.f&(J|Pt))===0&&(L===null?qs([n]):L.push(n))}return t}function Mn(n,t){var e=n.reactions;if(e!==null)for(var s=he(),i=e.length,r=0;r<i;r++){var a=e[r],u=a.f;(u&G)===0&&(!s&&a===M||(Y(a,t),(u&(B|D))!==0&&((u&W)!==0?Mn(a,gt):pe(a))))}}let Ts=!1;var tn,Tn,In,Pn,Sn;function Is(){if(tn===void 0){tn=window,Tn=document,In=/Firefox/.test(navigator.userAgent);var n=Element.prototype,t=Node.prototype,e=Text.prototype;Pn=ct(t,"firstChild").get,Sn=ct(t,"nextSibling").get,Ze(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Ze(e)&&(e.__t=void 0)}}function Lt(n=""){return document.createTextNode(n)}function Qt(n){return Pn.call(n)}function ce(n){return Sn.call(n)}function z(n,t){return Qt(n)}function fe(n,t){{var e=Qt(n);return e instanceof Comment&&e.data===""?ce(e):e}}function C(n,t=1,e=!1){let s=n;for(;t--;)s=ce(s);return s}function Ps(n){n.textContent=""}function Ss(n){M===null&&b===null&&os(),b!==null&&(b.f&D)!==0&&M===null&&rs(),Nt&&is()}function Es(n,t){var e=t.last;e===null?t.last=t.first=n:(e.next=n,n.prev=e,t.last=n)}function St(n,t,e,s=!0){var i=M,r={ctx:y,deps:null,nodes_start:null,nodes_end:null,f:n|G,first:null,fn:t,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(e)try{Oe(r),r.f|=ts}catch(l){throw Z(r),l}else t!==null&&pe(r);var a=e&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&(pn|Ut))===0;if(!a&&s&&(i!==null&&Es(r,i),b!==null&&(b.f&W)!==0)){var u=b;(u.effects??(u.effects=[])).push(r)}return r}function Cs(n){const t=St(ae,null,!1);return Y(t,B),t.teardown=n,t}function En(n){Ss();var t=M!==null&&(M.f&J)!==0&&y!==null&&!y.m;if(t){var e=y;(e.e??(e.e=[])).push({fn:n,effect:M,reaction:b})}else{var s=qe(n);return s}}function As(n){const t=St(Pt,n,!0);return(e={})=>new Promise(s=>{e.outro?Bt(t,()=>{Z(t),s(void 0)}):(Z(t),s(void 0))})}function qe(n){return St(fn,n,!1)}function zs(n){return St(ae,n,!0)}function pt(n,t=[],e=$e){const s=t.map(e);return Et(()=>n(...s.map(T)))}function Et(n,t=0){return St(ae|ze|t,n,!0)}function vt(n,t=!0){return St(ae|J,n,!0,t)}function Cn(n){var t=n.teardown;if(t!==null){const e=Nt,s=b;en(!0),it(null);try{t.call(null)}finally{en(e),it(s)}}}function An(n,t=!1){var e=n.first;for(n.first=n.last=null;e!==null;){var s=e.next;(e.f&Pt)!==0?e.parent=null:Z(e,t),e=s}}function ks(n){for(var t=n.first;t!==null;){var e=t.next;(t.f&J)===0&&Z(t),t=e}}function Z(n,t=!0){var e=!1;(t||(n.f&dn)!==0)&&n.nodes_start!==null&&(Fs(n.nodes_start,n.nodes_end),e=!0),An(n,t&&!e),ne(n,0),Y(n,ue);var s=n.transitions;if(s!==null)for(const r of s)r.stop();Cn(n);var i=n.parent;i!==null&&i.first!==null&&zn(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function Fs(n,t){for(;n!==null;){var e=n===t?null:ce(n);n.remove(),n=e}}function zn(n){var t=n.parent,e=n.prev,s=n.next;e!==null&&(e.next=s),s!==null&&(s.prev=e),t!==null&&(t.first===n&&(t.first=s),t.last===n&&(t.last=e))}function Bt(n,t){var e=[];Be(n,e,!0),kn(e,()=>{Z(n),t&&t()})}function kn(n,t){var e=n.length;if(e>0){var s=()=>--e||t();for(var i of n)i.out(s)}else t()}function Be(n,t,e){if((n.f&Q)===0){if(n.f^=Q,n.transitions!==null)for(const a of n.transitions)(a.is_global||e)&&t.push(a);for(var s=n.first;s!==null;){var i=s.next,r=(s.f&Rt)!==0||(s.f&J)!==0;Be(s,t,r?e:!1),s=i}}}function Zt(n){Fn(n,!0)}function Fn(n,t){if((n.f&Q)!==0){n.f^=Q,(n.f&B)===0&&(n.f^=B),Vt(n)&&(Y(n,G),pe(n));for(var e=n.first;e!==null;){var s=e.next,i=(e.f&Rt)!==0||(e.f&J)!==0;Fn(e,i?t:!1),e=s}if(n.transitions!==null)for(const r of n.transitions)(r.is_global||t)&&r.in()}}let Jt=[];function $s(){var n=Jt;Jt=[],Jn(n)}function $n(n){Jt.length===0&&queueMicrotask($s),Jt.push(n)}let Xt=!1,Pe=!1,te=null,ft=!1,Nt=!1;function en(n){Nt=n}let jt=[];let b=null,X=!1;function it(n){b=n}let M=null;function Tt(n){M=n}let k=null;function qn(n){b!==null&&b.f&Te&&(k===null?k=[n]:k.push(n))}let A=null,R=0,L=null;function qs(n){L=n}let Bn=1,ee=0,st=!1;function On(){return++Bn}function Vt(n){var c;var t=n.f;if((t&G)!==0)return!0;if((t&gt)!==0){var e=n.deps,s=(t&D)!==0;if(e!==null){var i,r,a=(t&Kt)!==0,u=s&&M!==null&&!st,l=e.length;if(a||u){var o=n,f=o.parent;for(i=0;i<l;i++)r=e[i],(a||!((c=r==null?void 0:r.reactions)!=null&&c.includes(o)))&&(r.reactions??(r.reactions=[])).push(o);a&&(o.f^=Kt),u&&f!==null&&(f.f&D)===0&&(o.f^=D)}for(i=0;i<l;i++)if(r=e[i],Vt(r)&&bn(r),r.wv>n.wv)return!0}(!s||M!==null&&!st)&&Y(n,B)}return!1}function Bs(n,t){for(var e=t;e!==null;){if((e.f&Ut)!==0)try{e.fn(n);return}catch{e.f^=Ut}e=e.parent}throw Xt=!1,n}function nn(n){return(n.f&ue)===0&&(n.parent===null||(n.parent.f&Ut)===0)}function de(n,t,e,s){if(Xt){if(e===null&&(Xt=!1),nn(t))throw n;return}if(e!==null&&(Xt=!0),Bs(n,t),nn(t))throw n}function Rn(n,t,e=!0){var s=n.reactions;if(s!==null)for(var i=0;i<s.length;i++){var r=s[i];k!=null&&k.includes(n)||((r.f&W)!==0?Rn(r,t,!1):t===r&&(e?Y(r,G):(r.f&B)!==0&&Y(r,gt),pe(r)))}}function Dn(n){var p;var t=A,e=R,s=L,i=b,r=st,a=k,u=y,l=X,o=n.f;A=null,R=0,L=null,st=(o&D)!==0&&(X||!ft||b===null),b=(o&(J|Pt))===0?n:null,k=null,Je(n.ctx),X=!1,ee++,n.f|=Te;try{var f=(0,n.fn)(),c=n.deps;if(A!==null){var d;if(ne(n,R),c!==null&&R>0)for(c.length=R+A.length,d=0;d<A.length;d++)c[R+d]=A[d];else n.deps=c=A;if(!st)for(d=R;d<c.length;d++)((p=c[d]).reactions??(p.reactions=[])).push(n)}else c!==null&&R<c.length&&(ne(n,R),c.length=R);if(he()&&L!==null&&!X&&c!==null&&(n.f&(W|gt|G))===0)for(d=0;d<L.length;d++)Rn(L[d],n);return i!==null&&i!==n&&(ee++,L!==null&&(s===null?s=L:s.push(...L))),f}finally{A=t,R=e,L=s,b=i,st=r,k=a,Je(u),X=l,n.f^=Te}}function Os(n,t){let e=t.reactions;if(e!==null){var s=Gn.call(e,n);if(s!==-1){var i=e.length-1;i===0?e=t.reactions=null:(e[s]=e[i],e.pop())}}e===null&&(t.f&W)!==0&&(A===null||!A.includes(t))&&(Y(t,gt),(t.f&(D|Kt))===0&&(t.f^=Kt),xn(t),ne(t,0))}function ne(n,t){var e=n.deps;if(e!==null)for(var s=t;s<e.length;s++)Os(n,e[s])}function Oe(n){var t=n.f;if((t&ue)===0){Y(n,B);var e=M,s=y,i=ft;M=n,ft=!0;try{(t&ze)!==0?ks(n):An(n),Cn(n);var r=Dn(n);n.teardown=typeof r=="function"?r:null,n.wv=Bn;var a=n.deps,u;Qe&&cs&&n.f&G}catch(l){de(l,n,e,s||n.ctx)}finally{ft=i,M=e}}}function Rs(){try{ls()}catch(n){if(te!==null)de(n,te,null);else throw n}}function Ds(){var n=ft;try{var t=0;for(ft=!0;jt.length>0;){t++>1e3&&Rs();var e=jt,s=e.length;jt=[];for(var i=0;i<s;i++){var r=Ns(e[i]);Ls(r)}$t.clear()}}finally{Pe=!1,ft=n,te=null}}function Ls(n){var t=n.length;if(t!==0)for(var e=0;e<t;e++){var s=n[e];if((s.f&(ue|Q))===0)try{Vt(s)&&(Oe(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null?zn(s):s.fn=null))}catch(i){de(i,s,null,s.ctx)}}}function pe(n){Pe||(Pe=!0,queueMicrotask(Ds));for(var t=te=n;t.parent!==null;){t=t.parent;var e=t.f;if((e&(Pt|J))!==0){if((e&B)===0)return;t.f^=B}}jt.push(t)}function Ns(n){for(var t=[],e=n;e!==null;){var s=e.f,i=(s&(J|Pt))!==0,r=i&&(s&B)!==0;if(!r&&(s&Q)===0){if((s&fn)!==0)t.push(e);else if(i)e.f^=B;else try{Vt(e)&&Oe(e)}catch(l){de(l,e,null,e.ctx)}var a=e.first;if(a!==null){e=a;continue}}var u=e.parent;for(e=e.next;e===null&&u!==null;)e=u.next,u=u.parent}return t}function T(n){var t=n.f,e=(t&W)!==0;if(b!==null&&!X){if(!(k!=null&&k.includes(n))){var s=b.deps;n.rv<ee&&(n.rv=ee,A===null&&s!==null&&s[R]===n?R++:A===null?A=[n]:(!st||!A.includes(n))&&A.push(n))}}else if(e&&n.deps===null&&n.effects===null){var i=n,r=i.parent;r!==null&&(r.f&D)===0&&(i.f^=D)}return e&&(i=n,Vt(i)&&bn(i)),Nt&&$t.has(n)?$t.get(n):n.v}function Ln(n){var t=X;try{return X=!0,n()}finally{X=t}}const Vs=-7169;function Y(n,t){n.f=n.f&Vs|t}const Hs=["touchstart","touchmove"];function Ws(n){return Hs.includes(n)}const Nn=new Set,Se=new Set;function Re(n){for(var t=0;t<n.length;t++)Nn.add(n[t]);for(var e of Se)e(n)}function Yt(n){var F;var t=this,e=t.ownerDocument,s=n.type,i=((F=n.composedPath)==null?void 0:F.call(n))||[],r=i[0]||n.target,a=0,u=n.__root;if(u){var l=i.indexOf(u);if(l!==-1&&(t===document||t===window)){n.__root=t;return}var o=i.indexOf(t);if(o===-1)return;l<=o&&(a=l)}if(r=i[a]||n.target,r!==t){Un(n,"currentTarget",{configurable:!0,get(){return r||e}});var f=b,c=M;it(null),Tt(null);try{for(var d,p=[];r!==null;){var v=r.assignedSlot||r.parentNode||r.host||null;try{var I=r["__"+s];if(I!=null&&(!r.disabled||n.target===r))if(Ce(I)){var[S,...E]=I;S.apply(r,[n,...E])}else I.call(r,n)}catch(x){d?p.push(x):d=x}if(n.cancelBubble||v===t||v===null)break;r=v}if(d){for(let x of p)queueMicrotask(()=>{throw x});throw d}}finally{n.__root=t,delete n.currentTarget,it(f),Tt(c)}}}function Ys(n){var t;t=document.head.appendChild(Lt());try{Et(()=>n(t),dn)}finally{}}function Xs(n){var t=document.createElement("template");return t.innerHTML=n,t.content}function se(n,t){var e=M;e.nodes_start===null&&(e.nodes_start=n,e.nodes_end=t)}function O(n,t){var e=(t&vs)!==0,s=(t&gs)!==0,i,r=!n.startsWith("<!>");return()=>{i===void 0&&(i=Xs(r?n:"<!>"+n),e||(i=Qt(i)));var a=s||In?document.importNode(i,!0):i.cloneNode(!0);if(e){var u=Qt(a),l=a.lastChild;se(u,l)}else se(a,a);return a}}function H(n=""){{var t=Lt(n+"");return se(t,t),t}}function De(){var n=document.createDocumentFragment(),t=document.createComment(""),e=Lt();return n.append(t,e),se(t,e),n}function m(n,t){n!==null&&n.before(t)}function ie(n,t){var e=t==null?"":typeof t=="object"?t+"":t;e!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=e,n.nodeValue=e+"")}function js(n,t){return Gs(n,t)}const _t=new Map;function Gs(n,{target:t,anchor:e,props:s={},events:i,context:r,intro:a=!0}){Is();var u=new Set,l=c=>{for(var d=0;d<c.length;d++){var p=c[d];if(!u.has(p)){u.add(p);var v=Ws(p);t.addEventListener(p,Yt,{passive:v});var I=_t.get(p);I===void 0?(document.addEventListener(p,Yt,{passive:v}),_t.set(p,1)):_t.set(p,I+1)}}};l(Ae(Nn)),Se.add(l);var o=void 0,f=As(()=>{var c=e??t.appendChild(Lt());return vt(()=>{if(r){rt({});var d=y;d.c=r}i&&(s.$$events=i),o=n(c,s)||{},r&&ot()}),()=>{var v;for(var d of u){t.removeEventListener(d,Yt);var p=_t.get(d);--p===0?(document.removeEventListener(d,Yt),_t.delete(d)):_t.set(d,p)}Se.delete(l),c!==e&&((v=c.parentNode)==null||v.removeChild(c))}});return Us.set(o,f),o}let Us=new WeakMap;function Le(n,t,[e,s]=[0,0]){var i=n,r=null,a=null,u=$,l=e>0?Rt:0,o=!1;const f=(d,p=!0)=>{o=!0,c(p,d)},c=(d,p)=>{u!==(u=d)&&(u?(r?Zt(r):p&&(r=vt(()=>p(i))),a&&Bt(a,()=>{a=null})):(a?Zt(a):p&&(a=vt(()=>p(i,[e+1,s]))),r&&Bt(r,()=>{r=null})))};Et(()=>{o=!1,t(f),o||c(null,null)},l)}function Vn(n,t){return t}function Ks(n,t,e,s){for(var i=[],r=t.length,a=0;a<r;a++)Be(t[a].e,i,!0);var u=r>0&&i.length===0&&e!==null;if(u){var l=e.parentNode;Ps(l),l.append(e),s.clear(),nt(n,t[0].prev,t[r-1].next)}kn(i,()=>{for(var o=0;o<r;o++){var f=t[o];u||(s.delete(f.k),nt(n,f.prev,f.next)),Z(f.e,!u)}})}function Hn(n,t,e,s,i,r=null){var a=n,u={flags:t,items:new Map,first:null},l=(t&_n)!==0;if(l){var o=n;a=o.appendChild(Lt())}var f=null,c=!1,d=ys(()=>{var p=e();return Ce(p)?p:p==null?[]:Ae(p)});Et(()=>{var p=T(d),v=p.length;c&&v===0||(c=v===0,Qs(p,u,a,i,t,s,e),r!==null&&(v===0?f?Zt(f):f=vt(()=>r(a)):f!==null&&Bt(f,()=>{f=null})),T(d))})}function Qs(n,t,e,s,i,r,a){var Xe,je,Ge,Ue;var u=(i&ds)!==0,l=(i&(ke|Fe))!==0,o=n.length,f=t.items,c=t.first,d=c,p,v=null,I,S=[],E=[],F,x,_,P;if(u)for(P=0;P<o;P+=1)F=n[P],x=r(F,P),_=f.get(x),_!==void 0&&((Xe=_.a)==null||Xe.measure(),(I??(I=new Set)).add(_));for(P=0;P<o;P+=1){if(F=n[P],x=r(F,P),_=f.get(x),_===void 0){var Xn=d?d.e.nodes_start:e;v=Js(Xn,t,v,v===null?t.first:v.next,F,x,P,s,i,a),f.set(x,v),S=[],E=[],d=v.next;continue}if(l&&Zs(_,F,P,i),(_.e.f&Q)!==0&&(Zt(_.e),u&&((je=_.a)==null||je.unfix(),(I??(I=new Set)).delete(_))),_!==d){if(p!==void 0&&p.has(_)){if(S.length<E.length){var Wt=E[0],et;v=Wt.prev;var Ye=S[0],ge=S[S.length-1];for(et=0;et<S.length;et+=1)sn(S[et],Wt,e);for(et=0;et<E.length;et+=1)p.delete(E[et]);nt(t,Ye.prev,ge.next),nt(t,v,Ye),nt(t,ge,Wt),d=Wt,v=ge,P-=1,S=[],E=[]}else p.delete(_),sn(_,d,e),nt(t,_.prev,_.next),nt(t,_,v===null?t.first:v.next),nt(t,v,_),v=_;continue}for(S=[],E=[];d!==null&&d.k!==x;)(d.e.f&Q)===0&&(p??(p=new Set)).add(d),E.push(d),d=d.next;if(d===null)continue;_=d}S.push(_),v=_,d=_.next}if(d!==null||p!==void 0){for(var At=p===void 0?[]:Ae(p);d!==null;)(d.e.f&Q)===0&&At.push(d),d=d.next;var _e=At.length;if(_e>0){var jn=(i&_n)!==0&&o===0?e:null;if(u){for(P=0;P<_e;P+=1)(Ge=At[P].a)==null||Ge.measure();for(P=0;P<_e;P+=1)(Ue=At[P].a)==null||Ue.fix()}Ks(t,At,jn,f)}}u&&$n(()=>{var Ke;if(I!==void 0)for(_ of I)(Ke=_.a)==null||Ke.apply()}),M.first=t.first&&t.first.e,M.last=v&&v.e}function Zs(n,t,e,s){(s&ke)!==0&&Ie(n.v,t),(s&Fe)!==0?Ie(n.i,e):n.i=e}function Js(n,t,e,s,i,r,a,u,l,o){var f=(l&ke)!==0,c=(l&ps)===0,d=f?c?Ms(i):qt(i):i,p=(l&Fe)===0?a:qt(a),v={i:p,v:d,k:r,a:null,e:null,prev:e,next:s};try{return v.e=vt(()=>u(n,d,p,o),Ts),v.e.prev=e&&e.e,v.e.next=s&&s.e,e===null?t.first=v:(e.next=v,e.e.next=v.e),s!==null&&(s.prev=v,s.e.prev=v.e),v}finally{}}function sn(n,t,e){for(var s=n.next?n.next.e.nodes_start:e,i=t?t.e.nodes_start:e,r=n.e.nodes_start;r!==s;){var a=ce(r);i.before(r),r=a}}function nt(n,t,e){t===null?n.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function ve(n,t,...e){var s=n,i=le,r;Et(()=>{i!==(i=t())&&(r&&(Z(r),r=null),r=vt(()=>i(s,...e)))},Rt)}function ti(n,t,e){var s=n,i,r;Et(()=>{i!==(i=t())&&(r&&(Bt(r),r=null),i&&(r=vt(()=>e(s,i))))},Rt)}const rn=[...` 	
\r\f \v\uFEFF`];function ei(n,t,e){var s=n==null?"":""+n;if(t&&(s=s?s+" "+t:t),e){for(var i in e)if(e[i])s=s?s+" "+i:i;else if(s.length)for(var r=i.length,a=0;(a=s.indexOf(i,a))>=0;){var u=a+r;(a===0||rn.includes(s[a-1]))&&(u===s.length||rn.includes(s[u]))?s=(a===0?"":s.substring(0,a))+s.substring(u+1):a=u}}return s===""?null:s}function ni(n,t){return n==null?null:String(n)}function Ne(n,t,e,s,i,r){var a=n.__className;if(a!==e||a===void 0){var u=ei(e,s,r);u==null?n.removeAttribute("class"):n.className=u,n.__className=e}else if(r&&i!==r)for(var l in r){var o=!!r[l];(i==null||o!==!!i[l])&&n.classList.toggle(l,o)}return r}function Wn(n,t,e,s){var i=n.__style;if(i!==t){var r=ni(t);r==null?n.removeAttribute("style"):n.style.cssText=r,n.__style=t}return s}const si=Symbol("is custom element"),ii=Symbol("is html");function Ft(n,t,e,s){var i=ri(n);i[t]!==(i[t]=e)&&(t==="loading"&&(n[ns]=e),e==null?n.removeAttribute(t):typeof e!="string"&&oi(n).includes(t)?n[t]=e:n.setAttribute(t,e))}function ri(n){return n.__attributes??(n.__attributes={[si]:n.nodeName.includes("-"),[ii]:n.namespaceURI===_s})}var on=new Map;function oi(n){var t=on.get(n.nodeName);if(t)return t;on.set(n.nodeName,t=[]);for(var e,s=n,i=Element.prototype;i!==s;){e=Kn(s);for(var r in e)e[r].set&&t.push(r);s=cn(s)}return t}function ln(n,t){return n===t||(n==null?void 0:n[kt])===t}function xe(n={},t,e,s){return qe(()=>{var i,r;return zs(()=>{i=r,r=[],Ln(()=>{n!==e(...r)&&(t(n,...r),i&&ln(e(...i),n)&&t(null,...i))})}),()=>{$n(()=>{r&&ln(e(...r),n)&&t(null,...r)})}}),n}const li={get(n,t){let e=n.props.length;for(;e--;){let s=n.props[e];if(zt(s)&&(s=s()),typeof s=="object"&&s!==null&&t in s)return s[t]}},set(n,t,e){let s=n.props.length;for(;s--;){let i=n.props[s];zt(i)&&(i=i());const r=ct(i,t);if(r&&r.set)return r.set(e),!0}return!1},getOwnPropertyDescriptor(n,t){let e=n.props.length;for(;e--;){let s=n.props[e];if(zt(s)&&(s=s()),typeof s=="object"&&s!==null&&t in s){const i=ct(s,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(n,t){if(t===kt||t===es)return!1;for(let e of n.props)if(zt(e)&&(e=e()),e!=null&&t in e)return!0;return!1},ownKeys(n){const t=[];for(let e of n.props)if(zt(e)&&(e=e()),!!e){for(const s in e)t.includes(s)||t.push(s);for(const s of Object.getOwnPropertySymbols(e))t.includes(s)||t.push(s)}return t}};function ai(...n){return new Proxy({props:n},li)}function ut(n,t,e,s){var i;i=n[t];var r=s,a=!0,u=()=>(a&&(a=!1,r=s),r);i===void 0&&s!==void 0&&(i=u());var l;return l=()=>{var o=n[t];return o===void 0?u():(a=!0,o)},l}function Yn(n){y===null&&wn(),Dt&&y.l!==null?ui(y).m.push(n):En(()=>{const t=Ln(n);if(typeof t=="function")return t})}function ui(n){var t=n.l;return t.u??(t.u={a:[],b:[],m:[]})}const hi="5";var hn;typeof window<"u"&&((hn=window.__svelte??(window.__svelte={})).v??(hn.v=new Set)).add(hi);fs();var ci=O('<a target="_blank" rel="noopener noreferrer" class="svelte-o5z3n1"> </a>'),fi=O('<section class="page svelte-o5z3n1" id="current-page"><span class="title svelte-o5z3n1"> <!></span> <!></section>');function Ct(n,t){rt(t,!0);let e=ut(t,"title",3,"Some Page"),s=ut(t,"style",3,""),i=ut(t,"extra",3,null);var r=fi(),a=z(r),u=z(a),l=C(u);{var o=c=>{var d=ci(),p=z(d);pt(()=>{Ft(d,"href",i().href),ie(p,i().title)}),m(c,d)};Le(l,c=>{i()&&c(o)})}var f=C(a,2);ve(f,()=>t.children??le),pt(()=>{Wn(r,s()),ie(u,`${e()??""} `)}),m(n,r),ot()}var di=O('<p>Welcome to the website!</p> <img src="https://picsum.photos/400/300" alt="Random" class="svelte-1yc2abm">',1);function pi(n){Ct(n,{title:"Home",children:(t,e)=>{var s=di();m(t,s)},$$slots:{default:!0}})}var vi=O("<p>Page not found.</p>");function gi(n){Ct(n,{title:"Error 404",children:(t,e)=>{var s=vi();m(t,s)},$$slots:{default:!0}})}var _i=O('<iframe frameborder="0" title="Thesis PDF" class="svelte-gqw2wc"></iframe>');function wi(n){const t=`${Ht}/main.pdf`;Ct(n,{title:"Thesis",extra:{href:t,title:"Open in a new page →"},children:(e,s)=>{var i=_i();Ft(i,"src",t),m(e,i)},$$slots:{default:!0}})}var mi=O("<p>Cool.</p>");function xi(n){Ct(n,{title:"About",children:(t,e)=>{var s=mi();m(t,s)},$$slots:{default:!0}})}var yi=O('<div class="list svelte-161iceo"><!> <!> <!></div>');function bi(n){Ct(n,{title:"Examples",children:(t,e)=>{var s=yi(),i=z(s);j(i,{href:"/examples/functional-animations",cssClass:"example-menu-item",children:(u,l)=>{var o=H("Functional Animations");m(u,o)},$$slots:{default:!0}});var r=C(i,2);j(r,{href:"/examples/frame-animations",cssClass:"example-menu-item",children:(u,l)=>{var o=H("Frame Animations");m(u,o)},$$slots:{default:!0}});var a=C(r,2);j(a,{href:"/examples/rule-based-animations",cssClass:"example-menu-item",children:(u,l)=>{var o=H("Rule Based Animations");m(u,o)},$$slots:{default:!0}}),m(t,s)},$$slots:{default:!0}})}class h{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}add(t){return new h(this.x+t.x,this.y+t.y)}addInPlace(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return new h(this.x-t.x,this.y-t.y)}subtractInPlace(t){return this.x-=t.x,this.y-=t.y,this}multiply(t){return new h(this.x*t,this.y*t)}multiplyInPlace(t){return this.x*=t,this.y*=t,this}scale(t){return new h(this.x*t.x,this.y*t.y)}lengthSquared(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.lengthSquared())}normalize(){const t=this.length();return t===0?new h(0,0):new h(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}clone(){return new h(this.x,this.y)}static zero(){return new h(0,0)}static one(){return new h(1,1)}}const yt=class yt{constructor(t,e=h.zero(),s=new h(100,100),i=h.one(),r=new h(.5,.5),a=0,u=[]){this._parent=null,this._hasDefaultSize=!0,this.position=e,this.rotation=a,this._size=s,this._hasDefaultSize=s.x===100&&s.y===100,this.scale=i,this.pivot=r,this.renderFunction=t,this._children=u}get size(){return this._size}set size(t){this._size=t,this._hasDefaultSize=!1}append(...t){this._children.push(...t),t.forEach(e=>{e._parent=this})}get hasDefaultSize(){return this._hasDefaultSize}render(t,e=0){if(!(this._parent!==null&&e===0)){if(e>10){console.warn("CanvasObject: Maximum render depth exceeded, stopping rendering to prevent stack overflow.");return}if(t.save(),t.translate(this.position.x,this.position.y),t.scale(this.scale.x,this.scale.y),t.rotate(this.rotation),this.renderFunction(this,t),this._children.forEach(s=>{s.render(t,e+1)}),!yt.debugMode){t.restore();return}t.fillStyle="#00ff00",t.fillRect(-2,-2,4,4),t.strokeStyle="#0000ff",t.lineWidth=1,t.strokeRect(-this.size.x*this.pivot.x,-this.size.y*this.pivot.y,this.size.x,this.size.y),t.restore()}}createCopy(t){const e=new yt(this.renderFunction,this.position.clone(),this.size.clone(),this.scale.clone(),this.pivot.clone(),this.rotation);return t?e._children=this._children.map(s=>s.createCopy(!0)):e._children=[],e}static setDebugMode(t){yt.debugMode=t}};yt.debugMode=!1;let g=yt;class w{static ellipse(t,e=null){return(s,i)=>{i.beginPath(),i.ellipse(-s.size.x*(s.pivot.x-.5),-s.size.y*(s.pivot.y-.5),s.size.x/2,s.size.y/2,0,0,Math.PI*2),i.fillStyle=t,i.fill(),e&&(i.strokeStyle=e,i.stroke())}}static rectangle(t,e=null){return(s,i)=>{i.beginPath(),i.rect(-s.size.x*s.pivot.x,-s.size.y*s.pivot.y,s.size.x,s.size.y),i.fillStyle=t,i.fill(),e&&(i.strokeStyle=e,i.stroke())}}static roundedRectangle(t,e=null,s=10){return(i,r)=>{r.beginPath(),r.roundRect(-i.size.x*i.pivot.x,-i.size.y*i.pivot.y,i.size.x,i.size.y,s),r.fillStyle=t,r.fill(),e&&(r.strokeStyle=e,r.stroke())}}static line(t,e=1){return(s,i)=>{const r=h.one().subtract(s.pivot);i.beginPath(),i.moveTo(-s.size.x*s.pivot.x,-s.size.y*s.pivot.y),i.lineTo(s.size.x*r.x,s.size.y*r.y),i.strokeStyle=t,i.lineWidth=e,i.stroke()}}static image(t){return(e,s)=>{t.isLoaded()&&s.drawImage(t.getImage(),-e.size.x*e.pivot.x,-e.size.y*e.pivot.y,e.size.x,e.size.y)}}static sprite(t,e=()=>0){return(s,i)=>{if(!t.isLoaded())return;const r=e();t.drawFrame(i,r,-s.size.x*s.pivot.x,-s.size.y*s.pivot.y,s.size.x,s.size.y)}}static staticText(t,e="16px monospace, Consolas",s="#000",i="left",r="top",a=!1){return w.dynamicText(()=>t,e,s,i,r,a)}static dynamicText(t,e="16px monospace, Consolas",s="#000",i="left",r="top",a=!1){return(u,l)=>{u.hasDefaultSize&&(u.size=h.one());let o=[],f=0;a?(o=t().split(`
`),f=parseInt(e)):o=[t()];for(let c=0;c<o.length;c++)l.font=e,l.fillStyle=s,l.textAlign=i,l.textBaseline=r,l.fillText(o[c],0,f*c)}}static plotFunction(t,e,s={lower:-5,upper:5},i={lower:-5,upper:5},r=.1,a=()=>0,u=1){return(l,o)=>{const f=new h((l.pivot.x-.5)*l.size.x,(l.pivot.y-.5)*l.size.y),c=new h(-l.size.x/2-f.x,-l.size.y/2-f.y),d=1-s.upper/(s.upper-s.lower);if(d>=0&&d<=1){o.beginPath(),o.moveTo(c.x+l.size.x*d,c.y),o.lineTo(c.x+l.size.x*d,c.y+l.size.y),o.strokeStyle="#000",o.lineWidth=2,o.stroke(),o.font="16px monospace, Consolas",o.fillStyle="#000",o.textAlign="left",o.textBaseline="top",o.fillText(i.upper.toString(),c.x+l.size.x*d+5,c.y),o.textAlign="left",o.textBaseline="bottom",o.fillText(i.lower.toString(),c.x+l.size.x*d+5,c.y+l.size.y);for(let x=Math.ceil(i.lower);x<=Math.floor(i.upper);x+=u){if(x===0)continue;const _=c.y+l.size.y*(1-(x-i.lower)/(i.upper-i.lower));o.beginPath(),o.moveTo(c.x,_),o.lineTo(c.x+l.size.x,_),o.strokeStyle="#00000044",o.lineWidth=2,o.stroke()}}const p=i.upper/(i.upper-i.lower);if(p>=0&&p<=1){o.beginPath(),o.moveTo(c.x,c.y+l.size.y*p),o.lineTo(c.x+l.size.x,c.y+l.size.y*p),o.strokeStyle="#000",o.lineWidth=2,o.stroke(),o.fillStyle="#000",o.textAlign="left",o.textBaseline="top",o.fillText(s.lower.toString(),c.x,c.y+l.size.y*p+5),o.textAlign="right",o.textBaseline="top",o.fillText(s.upper.toString(),c.x+l.size.x,c.y+l.size.y*p+5);for(let x=Math.ceil(s.lower);x<=Math.floor(s.upper);x+=u){if(x===0)continue;const _=c.x+l.size.x*((x-s.lower)/(s.upper-s.lower));o.beginPath(),o.moveTo(_,c.y),o.lineTo(_,c.y+l.size.y),o.strokeStyle="#00000044",o.lineWidth=2,o.stroke()}}o.beginPath();const v=l.size.x/(s.upper-s.lower),I=l.size.y/(i.upper-i.lower);for(let x=s.lower;x<=s.upper;x+=r){const _=e(x);o.lineTo(c.x+(x-s.lower)*v,c.y+l.size.y-(_-i.lower)*I)}const S=e(s.upper);o.lineTo(c.x+(s.upper-s.lower)*v,c.y+l.size.y-(S-i.lower)*I),o.strokeStyle="#ff5722",o.lineWidth=4,o.stroke();const E=a(),F=e(E);d>=0&&d<=1&&(o.beginPath(),o.ellipse(c.x+l.size.x*d+E*v,c.y+l.size.y*p-F*I,5,5,0,0,Math.PI*2),o.fillStyle="#f00",o.strokeStyle="#fff",o.lineWidth=2,o.fill(),o.stroke()),o.font="20px monospace, Consolas",o.fillStyle="#fff",o.textAlign="center",o.textBaseline="bottom",o.fillText(t,c.x+l.size.x/2,c.y)}}}class tt{constructor(t,e,s){this.wrapper=t,this.context=e,this.time=s,this.objects={}}render(){}renderInOrder(...t){for(const e of t)e.render(this.context)}*sequence(){}static provide(){return(t,e,s)=>new this(t,e,s)}getFileInfo(){return"unknown"}}class Mi{constructor(){this.delta=0,this.now=0}}class Ti extends tt{constructor(t,e,s){super(t,e,s);const i=t.resolution;this.halfResolution=i.multiply(.5),this.objects={text:new g(w.staticText("Please provide a scene implementation.","32px Consolas, monospace","white","center","middle"),this.halfResolution,i)}}render(){this.objects.text.rotation=Math.sin(this.time.now*5)*Math.PI*.025,this.objects.text.render(this.context)}}const oe=class oe{constructor(t,e,s){if(this._time=new Mi,this._startTime=0,this._resolution=new h(1280,720),this._resolutionScale=1,this._dpi=globalThis.devicePixelRatio||2,this._scene=null,this._glHandler=null,this._fpsData=new Float32Array(201),this._fpsAccumulative=0,this._fpsIndex=0,this._fpsBounds={lower:0,upper:60},this._topFps=60,this._bottomFps=-1,this._fpsPlot=new g(w.plotFunction("",r=>this._fpsData[(r+this._fpsIndex)%201],{lower:0,upper:200},this._fpsBounds,1,()=>200,20),new h(970,10),new h(300,65),new h(1,1),new h(0,0)),this._instanceId=oe.IdCounter++,this._startTime=-1,this._canvas=t,this._wrapperElement=e,this._context=t.getContext("2d"),this._scene=s(this,this._context,this._time),this._scene===null&&(this._scene=new Ti(this,this._context,this._time)),this._sequenceGenerator=this._scene.sequence(),!this._context)throw new Error("Failed to get 2D context from canvas");globalThis.requestAnimationFrame(this.onRenderFrame.bind(this));const i=()=>{this._canvas.width=this._wrapperElement.clientWidth*this._dpi*this._resolutionScale,this._canvas.height=this._wrapperElement.clientHeight*this._dpi*this._resolutionScale};globalThis.addEventListener("resize",i.bind(this)),i()}get resolution(){return this._resolution}get clientSize(){return new h(this._wrapperElement.clientWidth,this._wrapperElement.clientHeight)}onRenderFrame(t){const e=t/1e3;this._startTime<0&&(this._startTime=e),this._time.delta=e-this._startTime-this._time.now,this._time.now=e-this._startTime,this.setupTransformations(),this._scene.render(),this._sequenceGenerator.next(),this.drawDebugInfo(),globalThis.requestAnimationFrame(this.onRenderFrame.bind(this))}setupTransformations(){this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.fillStyle="#000",this._context.fillRect(0,0,this._canvas.width,this._canvas.height);const t=this._canvas.width/this._resolution.x,e=this._canvas.height/this._resolution.y,s=Math.min(t,e),i=(this._canvas.width-this._resolution.x*s)/2,r=(this._canvas.height-this._resolution.y*s)/2;this._context.setTransform(s,0,0,s,i,r),this._context.fillStyle="#444",this._context.fillRect(0,0,this._resolution.x,this._resolution.y),this._context.strokeStyle="white",this._context.strokeRect(0,0,this._resolution.x,this._resolution.y)}drawDebugInfo(){var e;if(g.debugMode===!1)return;this._context.fillStyle="#00000044",this._context.fillRect(0,0,1280,100),this._context.fillStyle="white",this._context.font="16px Consolas, monospace",this._context.textAlign="left",this._context.textBaseline="alphabetic",this._context.fillText(`(${this._instanceId}) Debug Info`,10,20),this._context.beginPath(),this._context.moveTo(10,30),this._context.lineTo(960,30),this._context.strokeStyle="white",this._context.lineWidth=1,this._context.lineCap="butt",this._context.stroke(),this._context.fillText(`Now       : ${this._time.now.toFixed(2)}s`,10,50),this._context.fillText(`Resolution: ${this._canvas.width}x${this._canvas.height}`,10,70),this._context.fillText(`Scene     : ${(e=this._scene)==null?void 0:e.getFileInfo()}`,10,90);const t=1/this._time.delta;this._context.textAlign="right",this._context.fillText(`FPS: ${t.toFixed(2).padStart(6,"0")}`,960,20),this._context.fillText(`Avg: ${(this._fpsAccumulative/200).toFixed(2).padStart(6,"0")}`,960,50),this._context.fillText(`Max: ${this._topFps.toFixed(2).padStart(6,"0")}`,960,70),this._context.fillText(`Min: ${this._bottomFps.toFixed(2).padStart(6,"0")}`,960,90),!(isNaN(t)||isFinite(t)===!1)&&(this._topFps=Math.max(this._topFps,t),this._bottomFps=this._bottomFps<0?t:Math.min(this._bottomFps,t),this._fpsAccumulative+=t,this._fpsIndex>=201&&(this._fpsAccumulative-=this._fpsData[this._fpsIndex%201]),g.debugMode=!1,this._fpsData[this._fpsIndex++%201]=t,this._fpsBounds.upper=Math.max(this._fpsBounds.upper,Math.ceil(t/10+1)*10),this._fpsPlot.render(this._context),g.debugMode=!0)}getTextSize(t){const e=this._context.measureText(t);return new h(e.actualBoundingBoxLeft+e.actualBoundingBoxRight,e.actualBoundingBoxAscent+e.actualBoundingBoxDescent)}getWebGLContext(){if(this._glHandler)return this._glHandler._glContext;const t=document.createElement("canvas");if(t.classList.add("webgl-canvas"),this._glHandler={_glCanvas:t,_glContext:t.getContext("webgl2"),_glResolution:new h(1280,720)},!this._glHandler._glContext)return console.error("WebGL context is not available."),null;const e=()=>{this._glHandler._glCanvas.width=this._wrapperElement.clientWidth,this._glHandler._glCanvas.height=this._wrapperElement.clientHeight;const s=this._wrapperElement.clientWidth/this._resolution.x,i=this._wrapperElement.clientHeight/this._resolution.y,r=Math.min(s,i),a=(this._wrapperElement.clientWidth-this._resolution.x*r)/2,u=(this._wrapperElement.clientHeight-this._resolution.y*r)/2;this._glHandler._glResolution.x=this._resolution.x*r,this._glHandler._glResolution.y=this._resolution.y*r,this._glHandler._glContext.viewport(a,u,this._resolution.x*r,this._resolution.y*r)};return globalThis.addEventListener("resize",e.bind(this)),setTimeout(e.bind(this),1),this._wrapperElement.insertBefore(this._glHandler._glCanvas,this._canvas),this._glHandler._glContext}};oe.IdCounter=0;let Ee=oe;var Ii=()=>g.setDebugMode(!g.debugMode),Pi=O('<div class="canvas-wrapper svelte-2j3np0"><button class="fullscreen svelte-2j3np0"><span>⛶</span></button> <button class="debugMode svelte-2j3np0"><span>🛠️</span></button> <canvas width="200" height="100"></canvas></div>');function Si(n,t){rt(t,!0);let e=t.scene||(()=>null),s,i,r,a=N(!1);Yn(()=>{new Ee(s,i,e),r.addEventListener("click",()=>{if(document.fullscreenElement){document.exitFullscreen().catch(c=>{console.error("Failed to exit fullscreen mode:",c)}),q(a,!1);return}i.requestFullscreen().catch(c=>{console.error("Failed to enter fullscreen mode:",c)}),q(a,!0)}),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||q(a,!1)})});var u=Pi(),l=z(u);xe(l,c=>r=c,()=>r);var o=C(l,2);o.__click=[Ii];var f=C(o,2);xe(f,c=>s=c,()=>s),xe(u,c=>i=c,()=>i),pt(()=>Ne(f,1,`canvas ${T(a)?"fullscreen":""}`,"svelte-2j3np0")),m(n,u),ot()}Re(["click"]);var Ei=O('<button role="tab"> </button>'),Ci=O('<div class="tabs"><div class="tab-buttons svelte-12g5vdc" role="tablist"></div> <div class="tab-contents svelte-12g5vdc"><!></div></div>');function Ai(n,t){rt(t,!0);let e=K([]),s=N(K(parseInt(new URL(window.location.href).searchParams.get("tab")||"0",10)));ms("tabs",{registerTab:l=>(e.push(l),e.length-1),activeTab:()=>T(s)}),En(()=>{const l=new URL(window.location.href);l.searchParams.set("tab",T(s).toString()),window.history.replaceState({},"",l.toString())});var i=Ci(),r=z(i);Hn(r,21,()=>e,Vn,(l,o,f)=>{var c=Ei();c.__click=()=>q(s,f,!0);let d;var p=z(c);pt(v=>{d=Ne(c,1,"svelte-12g5vdc",null,d,v),ie(p,T(o).title)},[()=>({active:T(s)===f})]),m(l,c)});var a=C(r,2),u=z(a);ve(u,()=>t.children??le),m(n,i),ot()}Re(["click"]);var zi=O('<div class="tab-panel svelte-fai8lk" role="tabpanel"><!></div>');function ki(n,t){rt(t,!0);const{registerTab:e,activeTab:s}=ws("tabs");let i=N(-1);Yn(()=>{q(i,e({title:t.title}),!0)});var r=De(),a=fe(r);{var u=l=>{var o=zi(),f=z(o);ve(f,()=>t.children),m(l,o)};Le(a,l=>{T(i)===s()&&l(u)})}m(n,r),ot()}function Fi(n,t){rt(t,!0),Ct(n,{get title(){return t.title},children:(e,s)=>{Ai(e,{children:(i,r)=>{var a=De(),u=fe(a);Hn(u,17,()=>t.pages,Vn,(l,o)=>{ki(l,{get title(){return T(o).name},children:(f,c)=>{Si(f,{get scene(){return T(o).scene}})},$$slots:{default:!0}})}),m(i,a)},$$slots:{default:!0}})},$$slots:{default:!0}}),ot()}class $i extends tt{getFileInfo(){return"src/rendering/scenes/SimpleFunctional.ts"}constructor(t,e,s){super(t,e,s),this.objects={xPlot:new g(w.plotFunction("f(x) = cos(α + t)",i=>Math.cos(i+s.now),{lower:-1,upper:5},{lower:-2,upper:2},.1),new h(950,240),new h(300,200),new h(1,1),new h(.5,.5),0),yPlot:new g(w.plotFunction("f(y) = sin(α + t)",i=>Math.sin(i+s.now),{lower:-1,upper:5},{lower:-2,upper:2},.1),new h(950,480),new h(300,200),new h(1,1),new h(.5,.5),0),pathCircle:new g(w.ellipse("transparent","#000"),new h(350,360),new h(400,400),new h(1,1),new h(.5,.5),0),circle:new g(w.ellipse("#ff5722","#ff8a50"),new h(350,360),new h(50,50),new h(1,1),new h(.5,.5),0)}}render(){this.objects.circle.position=new h(350+200*Math.cos(this.time.now),360+200*Math.sin(this.time.now)),this.context.lineWidth=2,this.renderInOrder(this.objects.pathCircle,this.objects.xPlot,this.objects.yPlot,this.objects.circle)}}class Ve{constructor(t){this.time=t}}class dt{static*run(t){for(t.start();!t.tick();)yield}static*runTogether(t){t.forEach(s=>s.start());let e;do e=t.map(s=>s.tick()),yield;while(e.some(s=>!s))}}class He extends Ve{constructor(t,e){super(t),this.startTime=0,this.endTime=0,this.duration=0,this.finished=!0,this.duration=e}start(){this.startTime=this.time.now,this.endTime=this.startTime+this.duration,this.finished=!1}tick(){return this.finished?!0:(this.time.now>=this.endTime&&(this.finished=!0),this.finished)}}class bt extends Ve{constructor(t,e,s){super(t),this.startTime=0,this.endTime=0,this.finished=!0,this.setter=e,this.options=s,this.options.easing=s.easing??(i=>i)}start(){this.startTime=this.time.now,this.endTime=this.startTime+this.options.duration,this.finished=!1,this.setter(this.options.startValue)}tick(){if(this.finished)return!0;const t=this.time.now,e=t-this.startTime,s=Math.min(e/this.options.duration,1),i=this.options.easing(s),r=this.options.startValue+(this.options.endValue-this.options.startValue)*i;return this.setter(r),t>=this.endTime&&(this.finished=!0,this.setter(this.options.endValue)),this.finished}get progress(){if(this.finished)return 1;const e=this.time.now-this.startTime;return Math.min(e/this.options.duration,1)}reverse(){const t=this.options.startValue;this.options.startValue=this.options.endValue,this.options.endValue=t}}class V{static linear(t){return t}static easeInQuad(t){return t*t}static easeOutQuad(t){return t*(2-t)}static easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t}static easeInCubic(t){return t*t*t}static easeOutCubic(t){return 1-Math.pow(1-t,3)}static easeInOutCubic(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}static easeInElastic(t){const e=2*Math.PI/3;return t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*e)}static easeOutElastic(t){const e=2*Math.PI/3;return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*e)+1}static easeInOutElastic(t){const e=2*Math.PI/4.5;return t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1}}class xt extends Ve{constructor(t,e,s,i){super(t),this.currentIndex=0,this.values=s,this.interpolator=new bt(t,e,{startValue:s[0],endValue:s[1],duration:i.duration,easing:i.easing}),this.endsOnStart=i.loops??!1}start(){this.interpolator.start(),this.currentIndex=0,this.interpolator.options.startValue=this.values[0],this.interpolator.options.endValue=this.values[1]}tick(){return this.currentIndex>=this.values.length-(this.endsOnStart?0:1)?!0:(this.interpolator.tick()&&(this.currentIndex++,this.currentIndex<this.values.length&&(this.interpolator.options.startValue=this.values[this.currentIndex],this.interpolator.options.endValue=this.values[(this.currentIndex+1)%this.values.length],this.interpolator.start())),!1)}}class qi extends tt{getFileInfo(){return"src/rendering/scenes/SimpleInterpolation.ts"}constructor(t,e,s){super(t,e,s),this.dotPositions={ballA:0,ballB:0,ballC:0},this.objects={ballA:new g(w.ellipse("#ff5722","#ff0000"),new h(340,360),new h(50,50),new h(1,1),new h(.5,.5),0),ballB:new g(w.ellipse("#57ff22","#00ff22"),new h(640,360),new h(50,50),new h(1,1),new h(.5,.5),0),ballC:new g(w.ellipse("#2257ff","#2200ff"),new h(940,360),new h(50,50),new h(1,1),new h(.5,.5),0),easingPlotA:new g(w.plotFunction("easeInQuad: t ^ 2",V.easeInQuad,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballA),new h(340,150),new h(200,200),new h(1,1),new h(.5,.5),0),easingPlotB:new g(w.plotFunction("easeOutQuad: t * (2 - t)",V.easeOutQuad,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballB),new h(640,150),new h(200,200),new h(1,1),new h(.5,.5),0),easingPlotC:new g(w.plotFunction("easeInOutElastic: <...>",V.easeInOutElastic,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballC),new h(940,150),new h(200,200),new h(1,1),new h(.5,.5),0)},this.sequencers={ballAInterpolator:new bt(s,i=>{this.objects.ballA.position.y=i},{startValue:360,endValue:600,duration:1,easing:i=>i*i}),ballBInterpolator:new bt(s,i=>{this.objects.ballB.position.y=i},{startValue:360,endValue:600,duration:1,easing:i=>1-Math.pow(1-i,2)}),ballCInterpolator:new bt(s,i=>{this.objects.ballC.position.y=i},{startValue:360,endValue:600,duration:1,easing:V.easeInOutElastic}),timer:new He(s,.5)}}*sequence(){for(;;)yield*dt.runTogether([this.sequencers.ballAInterpolator,this.sequencers.ballBInterpolator,this.sequencers.ballCInterpolator]),yield*dt.run(this.sequencers.timer),this.sequencers.ballAInterpolator.reverse(),this.sequencers.ballBInterpolator.reverse(),this.sequencers.ballCInterpolator.reverse()}render(){this.context.strokeStyle="#222",this.context.lineWidth=16,this.context.lineCap="round",this.context.beginPath(),this.context.moveTo(340,360),this.context.lineTo(340,600),this.context.moveTo(640,360),this.context.lineTo(640,600),this.context.moveTo(940,360),this.context.lineTo(940,600),this.context.stroke(),this.context.lineWidth=1,this.dotPositions.ballA=this.sequencers.ballAInterpolator.progress,this.dotPositions.ballB=this.sequencers.ballBInterpolator.progress,this.dotPositions.ballC=this.sequencers.ballCInterpolator.progress,Object.keys(this.objects).forEach(t=>{this.objects[t].render(this.context)})}}class Bi extends tt{getFileInfo(){return"src/rendering/scenes/SimpleSequence.ts"}constructor(t,e,s){super(t,e,s),this.rectPath=[new h(160,160),new h(560,160),new h(560,560),new h(160,560)],this.polyPath=[new h(720,260),new h(920,160),new h(1120,260),new h(720,460),new h(920,560),new h(1120,460)],this.objects={circleA:new g(w.ellipse("#ff5722","#ff0000"),new h(340,360),new h(50,50),new h(1,1),new h(.5,.5),0),circleB:new g(w.ellipse("#ff5722","#ff0000"),new h(720,360),new h(50,50),new h(1,1),new h(.5,.5),0),path:new g(w.roundedRectangle("#00000000","#000",8),new h(360,360),new h(400,400))},this.sequencers={sequenceAX:new xt(this.time,i=>this.objects.circleA.position.x=i,this.rectPath.map(i=>i.x),{duration:.75,easing:V.linear,loops:!0}),sequenceAY:new xt(this.time,i=>this.objects.circleA.position.y=i,this.rectPath.map(i=>i.y),{duration:.75,easing:V.linear,loops:!0}),sequenceBX:new xt(this.time,i=>this.objects.circleB.position.x=i,this.polyPath.map(i=>i.x),{duration:.5,easing:V.easeInOutCubic,loops:!0}),sequenceBY:new xt(this.time,i=>this.objects.circleB.position.y=i,this.polyPath.map(i=>i.y),{duration:.5,easing:V.easeInOutCubic,loops:!0})}}render(){this.context.beginPath(),this.context.moveTo(this.polyPath[0].x,this.polyPath[0].y);for(let t=1;t<this.polyPath.length;t++)this.context.lineTo(this.polyPath[t].x,this.polyPath[t].y);this.context.closePath(),this.context.strokeStyle="#000",this.context.lineWidth=2,this.context.stroke(),this.renderInOrder(this.objects.path,this.objects.circleA,this.objects.circleB)}*sequence(){for(;;)yield*dt.runTogether([this.sequencers.sequenceAX,this.sequencers.sequenceAY,this.sequencers.sequenceBX,this.sequencers.sequenceBY])}}const lt=class lt{constructor(t){this.loaded=!1,this.size=new h(-1,-1);const e=Ht+t;if(this.image=lt.cache.get(e)||new Image,!lt.cache.has(e))this.image.src=e,lt.cache.set(e,this.image);else{this.loaded=!0;const s=lt.cache.get(e);this.size.set(s.width,s.height)}this.image.onload=()=>{this.loaded=!0,this.size.set(this.image.width,this.image.height)}}isLoaded(){return this.loaded}getImage(){return this.loaded||console.warn(`Image at ${this.image.src} is not loaded yet.`),this.image}};lt.cache=new Map;let re=lt;const at=class at extends re{constructor(t,e,s,i=e*s){super(t),this.framesX=e,this.framesY=s,this.frameCount=i}drawFrame(t,e,s,i,r,a){if(!this.isLoaded()){console.warn(`Spritesheet at ${this.image.src} is not loaded yet.`);return}const u=e%this.frameCount,l=this.image.width/this.framesX,o=this.image.height/this.framesY,f=u%this.framesX*l,c=Math.floor(u/this.framesX)*o;t.drawImage(this.image,f+at.BIAS,c+at.BIAS,l-at.BIAS*2,o-at.BIAS*2,s,i,r,a)}};at.BIAS=.5;let Mt=at;class Oi{constructor(t,e){this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=e,this.context=this.canvas.getContext("2d")}getCanvas(){return this.canvas}getContext(){return this.context}get imageData(){return this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}set imageData(t){this.context.putImageData(t,0,0)}}class Ri extends tt{getFileInfo(){return"src/rendering/scenes/ComplexSequence.ts"}constructor(t,e,s){super(t,e,s),this.textures={wood:new re("/wood.webp")},this.objects={sign:new g(w.image(this.textures.wood),new h(0,200),new h(400,300),new h(1,1),new h(.5,0)),text:new g(w.staticText(["This whole animation is done","with the following objects:","","2 simple sequences.","A looping interpolator."].join(`
`),"20px Arial","#ffffff","center","top",!0),new h(0,100)),ropeLeft:new g(w.roundedRectangle("#000",null,5),new h(0,0),new h(10,300),new h(1,1),new h(.5,.01),Math.PI/5),ropeRight:new g(w.roundedRectangle("#000",null,5),new h(0,0),new h(10,300),new h(1,1),new h(.5,.01),-Math.PI/5),pivot:new g(()=>{},new h(640,-1e3),new h(1,1)),nail:new g(w.roundedRectangle("#888","#000",4),new h(0,8),new h(16,16),new h(1,1),new h(.5,.5),.2)},this.objects.pivot.append(this.objects.ropeLeft,this.objects.ropeRight,this.objects.sign,this.objects.nail),this.objects.sign.append(this.objects.text),this.sequencers={timer:new He(this.time,.5),signRotation:new xt(this.time,i=>this.objects.sign.rotation=i,[0,-.05,.05,0],{duration:.25,easing:V.easeInOutQuad}),pivotY:new bt(this.time,i=>this.objects.pivot.position.y=i,{startValue:-600,endValue:100,duration:1,easing:V.easeOutElastic}),pivotRotationStart:new xt(this.time,i=>{this.objects.pivot.rotation=i,this.objects.nail.rotation=-i+.2},[Math.PI/5,-Math.PI/5,Math.PI/10],{duration:.6666,easing:V.easeInOutQuad}),pivotRotationLoop:new bt(this.time,i=>{this.objects.pivot.rotation=i,this.objects.nail.rotation=-i+.2},{startValue:Math.PI/10,endValue:-Math.PI/10,duration:.6666,easing:V.easeInOutQuad})}}*sequence(){for(yield*dt.run(this.sequencers.timer),yield*dt.runTogether([this.sequencers.signRotation,this.sequencers.pivotY,this.sequencers.pivotRotationStart]);;)if(yield*dt.run(this.sequencers.pivotRotationLoop),this.sequencers.pivotRotationLoop.reverse(),this.sequencers.pivotRotationLoop.options.endValue*=.5,Math.abs(this.sequencers.pivotRotationLoop.options.endValue)<.001){this.objects.pivot.rotation=0;break}}render(){this.objects.pivot.render(this.context)}}class Gt{constructor(t,e,s){this.background=new g(w.roundedRectangle("rgba(0, 0, 0, 0.5)","black",8),t,e.clone(),new h(1,1),new h(0,0)),this.foreground=new g(w.roundedRectangle("rgba(0, 255, 0, 0.5)","green",8),new h(0,0),e.clone(),new h(1,1),new h(0,0)),this.text=new g(w.dynamicText(s,"24px Consolas, monospace","white","left","middle"),new h(0,-12)),this.background.append(this.foreground,this.text)}render(t){this.background.render(t)}setProgress(t){this.foreground.size.x=this.background.size.x*t}}class Di extends tt{getFileInfo(){return"src/rendering/scenes/SimpleFrameAnimation.ts"}constructor(t,e,s){super(t,e,s),this.textures={cat:new Mt("/cat-spritesheet.webp",12,14,158)},this.objects={cat:new g(w.sprite(this.textures.cat,()=>Math.floor(s.now*24)),new h(1280/2,720/2),new h(256,256)),progressBar:new Gt(new h(256/2,592),new h(1024,32),()=>`Frame: ${Math.floor(s.now*24)%158} / 158`)}}render(){this.objects.progressBar.setProgress(Math.round(this.time.now*24)/158%1),this.renderInOrder(this.objects.cat,this.objects.progressBar)}}class Li extends tt{getFileInfo(){return"src/rendering/scenes/CatPendulum.ts"}constructor(t,e,s){super(t,e,s),this.textures={cat1:new Mt("/cat-spritesheet.webp",12,14,158),cat2:new Mt("/cat-alt-spritesheet.webp",9,8,71),cat3:new Mt("/cat-alt-02-spritesheet.webp",9,8,68)},this.objects={cat1:new g(w.sprite(this.textures.cat1,()=>Math.floor(s.now*24)),new h(0,200),new h(200,200),new h(1,1),new h(.5,0),0),cat2:new g(w.sprite(this.textures.cat2,()=>Math.floor(s.now*24)),new h(0,150),new h(200,200),new h(1,1),new h(.5,0),0),cat3:new g(w.sprite(this.textures.cat3,()=>Math.floor(s.now*24)),new h(640,100),new h(200,150),new h(1,1),new h(.5,0),0),texts:{cat1:new g(w.staticText("Cat 1: 158 frames","24px Consolas, monospace","white","center","middle")),cat2:new g(w.staticText("Cat 2: 71 frames","24px Consolas, monospace","white","center","middle")),cat3:new g(w.staticText("Cat 3: 68 frames","24px Consolas, monospace","white","center","middle"))},progressBars:{cat1:new Gt(new h(50,518),new h(128,24),()=>`Cat 1: ${Math.floor(s.now*24)%158+1} / 158`),cat2:new Gt(new h(50,582),new h(128,24),()=>`Cat 2: ${Math.floor(s.now*24)%71+1} / 71`),cat3:new Gt(new h(50,646),new h(128,24),()=>`Cat 3: ${Math.floor(s.now*24)%68+1} / 68`)}},this.objects.cat3.append(this.objects.texts.cat3,this.objects.cat2),this.objects.cat2.append(this.objects.texts.cat2,this.objects.cat1),this.objects.cat1.append(this.objects.texts.cat1)}render(){this.objects.cat1.rotation=Math.sin(this.time.now*2)*.75,this.objects.cat2.rotation=Math.sin(this.time.now*3)*.5,this.objects.cat3.rotation=Math.sin(this.time.now*4)*.5,this.objects.progressBars.cat1.setProgress(Math.round(this.time.now*24)/158%1),this.objects.progressBars.cat2.setProgress(Math.round(this.time.now*24)/71%1),this.objects.progressBars.cat3.setProgress(Math.round(this.time.now*24)/68%1),this.renderInOrder(this.objects.cat3,this.objects.progressBars.cat1,this.objects.progressBars.cat2,this.objects.progressBars.cat3)}}class Ni extends tt{getFileInfo(){return"src/rendering/scenes/GameOfLife.ts"}constructor(t,e,s){super(t,e,s);const i=t.resolution,r=8;this.cols=Math.floor(i.x/r),this.rows=Math.floor(i.y/r),this.grid=new Oi(this.cols,this.rows),this.imageData=this.grid.imageData,this.timer=new He(s,1/30);const a=this.imageData;for(let u=0;u<this.rows;u++)for(let l=0;l<this.cols;l++)a.data[(u*this.cols+l)*4]=0,a.data[(u*this.cols+l)*4+1]=0,a.data[(u*this.cols+l)*4+2]=0,a.data[(u*this.cols+l)*4+3]=Math.random()<.5?255:0;this.grid.imageData=a}*sequence(){for(;;)this.updateGrid(),yield*dt.run(this.timer)}render(){const t=this.context;t.fillStyle="#ff5722",t.fillRect(0,0,this.wrapper.resolution.x,this.wrapper.resolution.y),t.imageSmoothingEnabled=!1,t.drawImage(this.grid.getCanvas(),0,0,this.wrapper.resolution.x,this.wrapper.resolution.y)}updateGrid(){const t=Array.from(this.grid.imageData.data.filter((e,s)=>s%4===3)).map(e=>e>0);for(let e=0;e<t.length;e++){const s=Math.floor(e/this.cols),i=e%this.cols,r=this.countAliveNeighbors(t,s,i);t[e]?r<2||r>3?this.imageData.data[e*4+3]=0:this.imageData.data[e*4+3]=255:r===3?this.imageData.data[e*4+3]=255:this.imageData.data[e*4+3]=0}this.grid.imageData=this.imageData}countAliveNeighbors(t,e,s){const i=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];let r=0;for(const[a,u]of i){const l=e+a,o=s+u;if(l>=0&&l<this.rows&&o>=0&&o<this.cols){const f=l*this.cols+o;t[f]&&r++}}return r}}function ye(n,t,e){return Math.max(t,Math.min(e,n))}function wt(n,t,e){return n+(t-n)*e}function Vi(n,t,e){const s=(i,r=(i+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}const be={r:200,g:128,b:255},Me={r:200,g:255,b:128},mt=500,an=Math.PI*4,un=300,ht=100,Hi=40,Wi=60,U=200;function Yi(n,t){return(e,s)=>{const i=e.position.x/n.x,r=e.position.y/n.y,a={r:wt(be.r,Me.r,i),g:wt(be.g,Me.g,r),b:wt(be.b,Me.b,i+r)},u=Vi(e.rotation/Math.PI*360,1,1),l={r:wt(a.r,u[0]*256,.25),g:wt(a.g,u[1]*256,.25),b:wt(a.b,u[2]*256,.25)};if(s.fillStyle=`rgb(${l.r}, ${l.g}, ${l.b})`,s.beginPath(),s.moveTo(10,0),s.lineTo(-10,7),s.lineTo(-5,0),s.lineTo(-10,-7),s.fill(),g.debugMode){s.save(),s.rotate(-e.rotation);const o=t.getObjectsInRange(e.position.x,e.position.y,ht);s.strokeStyle="#ff0000";for(const f of o){if(f===e)continue;const c=f.position.subtract(e.position);c.length()>ht||(s.beginPath(),s.moveTo(0,0),s.lineTo(c.x,c.y),s.stroke())}s.restore(),s.strokeStyle="#00ff00",s.lineWidth=2,s.beginPath(),s.moveTo(0,0),s.lineTo(50,0),s.arc(0,0,ht,0,Math.PI*2),s.stroke()}}}class Xi{constructor(t,e){this.grid=[],this.resolution=e,this.cellCount=t,this.cellSize=new h(e.x/t,e.y/t);for(let s=0;s<t;s++){this.grid[s]=[];for(let i=0;i<t;i++)this.grid[s][i]=[]}}add(t){const e=Math.floor(t.position.x/(this.resolution.x/this.cellCount)),s=Math.floor(t.position.y/(this.resolution.y/this.cellCount));e>=0&&e<this.cellCount&&s>=0&&s<this.cellCount&&this.grid[s][e].push(t)}getObjectsInCell(t,e){return t<0||t>=this.cellCount||e<0||e>=this.cellCount?[]:this.grid[e][t]||[]}getObjectsInRange(t,e,s){const i=[],r=Math.max(0,Math.floor((t-s)/this.cellSize.x)),a=Math.min(this.cellCount-1,Math.ceil((t+s)/this.cellSize.x)),u=Math.max(0,Math.floor((e-s)/this.cellSize.y)),l=Math.min(this.cellCount-1,Math.ceil((e+s)/this.cellSize.y));for(let o=u;o<=l;o++)for(let f=r;f<=a;f++)i.push(...this.grid[o][f]);return i}clear(){for(let t=0;t<this.cellCount;t++)for(let e=0;e<this.cellCount;e++)this.grid[t][e]=[]}debugRender(t){const e=this.resolution.x/this.cellCount,s=this.resolution.y/this.cellCount;t.strokeStyle="#000000",t.lineWidth=1,t.beginPath();for(let i=1;i<this.cellCount;i++)t.moveTo(i*e,0),t.lineTo(i*e,this.resolution.y),t.moveTo(0,i*s),t.lineTo(this.resolution.x,i*s);t.stroke()}}class ji extends tt{getFileInfo(){return"src/rendering/scenes/Boids.ts"}constructor(t,e,s){super(t,e,s),this.newRotations=new Float32Array(mt),this.debugAgent=null,this.grid=new Xi(Math.ceil(Math.sqrt(mt)),t.resolution);const i=Math.ceil(Math.sqrt(mt*t.resolution.x/t.resolution.y)),r=Math.ceil(mt/i),a=t.resolution.x/i;console.log(`Boids grid: ${i} x ${r} (${mt} agents)`);const u=Yi(t.resolution,this.grid);this.agents=Array.from({length:mt},(l,o)=>{const f=new g(u,new h(o%i*(t.resolution.x/i)+a/2,Math.floor(o/i)*(t.resolution.y/r)+a/2),new h(20,20),h.one(),new h(.5,.5),Math.random()*Math.PI*2);return this.grid.add(f),f}),this.debugAgent=this.agents[Math.floor(Math.random()*this.agents.length)]}turnAwayFromBounds(t){const e=this.wrapper.resolution,s=t.position;let i=t.rotation,r=0;return s.x<U?(i=0,r+=U-s.x):s.x>e.x-U&&(i=Math.PI,r+=s.x-(e.x-U)),s.y<U?(i=Math.PI/2,r+=U-s.y):s.y>e.y-U&&(i=-Math.PI/2,r+=s.y-(e.y-U)),{rotation:i,steeringVector:new h(Math.cos(i),Math.sin(i)),strength:Math.pow(r/U,2)}}separate(t,e){const s=new h(0,0);let i=1/0,r=0;for(const l of e){if(l===t)continue;const o=t.position.subtract(l.position),f=o.length();f<ht&&f>0&&(f<i&&(i=f),s.addInPlace(o.normalize().multiply(1/f)),r++)}let a=0,u=0;return r>0&&(a=Math.atan2(s.y,s.x),u=Math.max(0,ht-i)/ht),{rotation:a,steeringVector:new h(Math.cos(a),Math.sin(a)),strength:Math.pow(u,4)}}align(t,e){const s=new h(0,0);let i=0;for(const u of e){if(u===t)continue;const o=u.position.subtract(t.position).length();o<Hi&&o>0&&(s.addInPlace(new h(Math.cos(u.rotation),Math.sin(u.rotation))),i++)}let r=t.rotation,a=0;return i>0&&(s.multiplyInPlace(1/i),r=Math.atan2(s.y,s.x),a=1),{rotation:r,steeringVector:new h(Math.cos(r),Math.sin(r)),strength:Math.pow(a,2)}}cohere(t,e){const s=new h(0,0);let i=0;for(const u of e){if(u===t)continue;const o=u.position.subtract(t.position).length();o<Wi&&o>0&&(s.addInPlace(u.position),i++)}let r=t.rotation,a=0;return i>0&&(s.multiplyInPlace(1/i),s.subtractInPlace(t.position),r=Math.atan2(s.y,s.x),a=(1-1/i)*.5),{rotation:r,steeringVector:new h(Math.cos(r),Math.sin(r)),strength:Math.pow(a,2)}}moveAgents(t){for(const e of this.agents){const s=new h(Math.cos(e.rotation)*un*t.delta,Math.sin(e.rotation)*un*t.delta);e.position.addInPlace(s),e.position.x=ye(e.position.x,0,this.wrapper.resolution.x),e.position.y=ye(e.position.y,0,this.wrapper.resolution.y)}}render(){g.debugMode&&this.grid.debugRender(this.context);for(let t=0;t<this.agents.length;t++){const e=this.agents[t],s=this.grid.getObjectsInRange(e.position.x,e.position.y,ht),i=this.turnAwayFromBounds(e),r=this.separate(e,s),a=this.align(e,s),u=this.cohere(e,s);let l=i.steeringVector.multiply(i.strength).add(r.steeringVector.multiply(r.strength)).add(a.steeringVector.multiply(a.strength)).add(u.steeringVector.multiply(u.strength));l.length()===0?l=new h(Math.cos(e.rotation),Math.sin(e.rotation)):l=l.normalize();let f=Math.atan2(l.y,l.x)-e.rotation;f=Math.atan2(Math.sin(f),Math.cos(f));const c=ye(f,-an*this.time.delta,an*this.time.delta);this.newRotations[t]=(e.rotation+c+Math.PI*2)%(Math.PI*2)}for(let t=0;t<this.agents.length;t++){const e=this.agents[t];e.rotation=this.newRotations[t]}this.moveAgents(this.time),this.grid.clear();for(const t of this.agents)this.grid.add(t);for(const t of this.agents){const e=g.debugMode;e&&this.debugAgent!==t&&g.setDebugMode(!1),t.render(this.context),g.setDebugMode(e)}}}console.log("Running in production mode.");const Ht="/emergent-animations",We=[],Gi=[{title:"Functional Animations",href:"/examples/functional-animations",examples:[{name:"Simple functional",scene:$i.provide()},{name:"Simple interpolation",scene:qi.provide()},{name:"Simple sequence",scene:Bi.provide()},{name:"Complex sequence",scene:Ri.provide()}]},{title:"Frame Animations",href:"/examples/frame-animations",examples:[{name:"Simple animation",scene:Di.provide()},{name:"Complex animation",scene:Li.provide()}]},{title:"Rule Based Animations",href:"/examples/rule-based-animations",examples:[{name:"Game of Life",scene:Ni.provide()},{name:"Boids",scene:ji.provide()}]}],Ui=[{href:"/",component:pi,title:"Home"},{href:"/404",component:gi,title:"404"},{href:"/thesis",component:wi,title:"Thesis"},{href:"/about",component:xi,title:"About"},{href:"/examples",component:bi,title:"Examples"},...Gi.map(n=>({href:n.href,title:n.title,component:Fi,props:{title:n.title,pages:n.examples||[]}}))],It=Ui.reduce((n,t)=>(n[t.href]=t,n),{});let Ot=It[globalThis.location.pathname.replace(Ht,"")]??It["/404"];function Ki(n){globalThis.history.pushState({},"",Ht+n),Ot=It[n]??It["/404"],We.forEach(t=>t(Ot))}function Qi(){return Ot}function Zi(n){We.push(n)}globalThis.addEventListener("popstate",()=>{const n=globalThis.location.pathname.replace(Ht,"");Ot=It[n]??It["/404"],We.forEach(t=>t(Ot))});function Ji(n,t,e){t()===""&&(n.preventDefault(),n.stopPropagation(),Ki(e.href))}var tr=O("<a><!> <!></a>");function j(n,t){rt(t,!0);let e=ut(t,"style",3,""),s=ut(t,"cssClass",3,""),i=ut(t,"target",3,""),r=ut(t,"rel",3,"");var a=tr();a.__click=[Ji,i,t];var u=z(a);ve(u,()=>t.children??le);var l=C(u,2);{var o=f=>{var c=H();pt(()=>ie(c,t.href)),m(f,c)};Le(l,f=>{t.children||f(o)})}pt(()=>{Ft(a,"href",t.href),Wn(a,e()),Ft(a,"target",i()),Ft(a,"rel",r()),Ne(a,1,`link ${s()??""}`,"svelte-1iwy9kf")}),m(n,a),ot()}Re(["click"]);var er=O('<header class="svelte-1xgxzs1"><!> <nav class="svelte-1xgxzs1"><!> <!> <!> <!></nav></header>');function nr(n){var t=er(),e=z(t);j(e,{href:"/",cssClass:"navbar-title",children:(l,o)=>{var f=H("Emergent Animations");m(l,f)},$$slots:{default:!0}});var s=C(e,2),i=z(s);j(i,{cssClass:"navbar-link",href:"/",children:(l,o)=>{var f=H("Home");m(l,f)},$$slots:{default:!0}});var r=C(i,2);j(r,{cssClass:"navbar-link",href:"/thesis",children:(l,o)=>{var f=H("Thesis");m(l,f)},$$slots:{default:!0}});var a=C(r,2);j(a,{cssClass:"navbar-link",href:"/examples",children:(l,o)=>{var f=H("Examples");m(l,f)},$$slots:{default:!0}});var u=C(a,2);j(u,{cssClass:"navbar-link",href:"/about",children:(l,o)=>{var f=H("About");m(l,f)},$$slots:{default:!0}}),m(n,t)}function sr(n,t){rt(t,!0);let e=N(K(Qi())),s=me(()=>{var o;return(o=T(e))==null?void 0:o.component}),i=me(()=>{var o;return((o=T(e))==null?void 0:o.title)||"*"}),r=me(()=>{var o;return((o=T(e))==null?void 0:o.props)||{}}),a=null;Zi(o=>{T(e).href!=o.href&&(a&&clearTimeout(a),document.getElementById("current-page").classList.add("fade-out"),a=setTimeout(()=>{q(e,o,!0),document.getElementById("current-page").classList.remove("fade-out")},150))});var u=De();Ys(o=>{pt(()=>Tn.title=`Emergent Animations - ${T(i)??""}`)});var l=fe(u);ti(l,()=>T(s),(o,f)=>{f(o,ai(()=>T(r)))}),m(n,u),ot()}var ir=O('<!> <main class="svelte-7hgqb0"><!></main> <footer class="svelte-7hgqb0"><span>Created by <!> using <!> ❤️</span></footer>',1);function rr(n){var t=ir(),e=fe(t);nr(e);var s=C(e,2),i=z(s);sr(i,{});var r=C(s,2),a=z(r),u=C(z(a));j(u,{href:"https://github.com/KissKonradUni/emergent-animations",target:"_blank",rel:"noopener noreferrer",children:(o,f)=>{var c=H("Konrád Soma Kiss");m(o,c)},$$slots:{default:!0}});var l=C(u,2);j(l,{href:"https://svelte.dev",target:"_blank",rel:"noopener noreferrer",children:(o,f)=>{var c=H("Svelte");m(o,c)},$$slots:{default:!0}}),m(n,t)}js(rr,{target:document.body});
