(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();const jt=!1;var zt=Array.isArray,Us=Array.prototype.indexOf,At=Array.from,Ks=Object.defineProperty,de=Object.getOwnPropertyDescriptor,Qs=Object.getOwnPropertyDescriptors,Zs=Object.prototype,Js=Array.prototype,cs=Object.getPrototypeOf,es=Object.isExtensible;function Ae(s){return typeof s=="function"}const lt=()=>{};function js(s){for(var e=0;e<s.length;e++)s[e]()}const H=2,ds=4,at=8,kt=16,ee=32,Pe=64,Qe=128,N=256,Ze=512,$=1024,X=2048,ge=4096,Z=8192,ut=16384,en=32768,Le=65536,ps=1<<19,vs=1<<20,St=1<<21,ke=Symbol("$state"),tn=Symbol("legacy props"),sn=Symbol("");function ws(s){return s===this.v}function nn(s,e){return s!=s?e==e:s!==e||s!==null&&typeof s=="object"||typeof s=="function"}function gs(s){return!nn(s,this.v)}function rn(s){throw new Error("https://svelte.dev/e/effect_in_teardown")}function on(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ln(s){throw new Error("https://svelte.dev/e/effect_orphan")}function an(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function un(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function hn(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function fn(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ne=!1,cn=!1;function dn(){Ne=!0}const Ft=1,qt=2,_s=4,pn=8,vn=16,wn=1,gn=2,k=Symbol(),_n="http://www.w3.org/1999/xhtml";function ms(s){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let y=null;function ts(s){y=s}function mn(s){return ys().get(s)}function yn(s,e){return ys().set(s,e),e}function le(s,e=!1,t){var n=y={p:y,c:null,d:!1,e:null,m:!1,s,x:null,l:null};Ne&&!e&&(y.l={s:null,u:null,r1:[],r2:Be(!1)}),zn(()=>{n.d=!0})}function ae(s){const e=y;if(e!==null){const o=e.e;if(o!==null){var t=T,n=b;e.e=null;try{for(var i=0;i<o.length;i++){var r=o[i];Me(r.effect),oe(r.reaction),$t(r.fn)}}finally{Me(t),oe(n)}}y=e.p,e.m=!0}return{}}function ht(){return!Ne||y!==null&&y.l===null}function ys(s){return y===null&&ms(),y.c??(y.c=new Map(xn(y)||void 0))}function xn(s){let e=s.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}function K(s){if(typeof s!="object"||s===null||ke in s)return s;const e=cs(s);if(e!==Zs&&e!==Js)return s;var t=new Map,n=zt(s),i=V(0),r=b,o=h=>{var a=b;oe(r);var l=h();return oe(a),l};return n&&t.set("length",V(s.length)),new Proxy(s,{defineProperty(h,a,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&un();var c=t.get(a);return c===void 0?(c=o(()=>V(l.value)),t.set(a,c)):F(c,o(()=>K(l.value))),!0},deleteProperty(h,a){var l=t.get(a);if(l===void 0)a in h&&(t.set(a,o(()=>V(k))),mt(i));else{if(n&&typeof a=="string"){var c=t.get("length"),f=Number(a);Number.isInteger(f)&&f<c.v&&F(c,f)}F(l,k),mt(i)}return!0},get(h,a,l){var p;if(a===ke)return s;var c=t.get(a),f=a in h;if(c===void 0&&(!f||(p=de(h,a))!=null&&p.writable)&&(c=o(()=>V(K(f?h[a]:k))),t.set(a,c)),c!==void 0){var d=M(c);return d===k?void 0:d}return Reflect.get(h,a,l)},getOwnPropertyDescriptor(h,a){var l=Reflect.getOwnPropertyDescriptor(h,a);if(l&&"value"in l){var c=t.get(a);c&&(l.value=M(c))}else if(l===void 0){var f=t.get(a),d=f==null?void 0:f.v;if(f!==void 0&&d!==k)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return l},has(h,a){var d;if(a===ke)return!0;var l=t.get(a),c=l!==void 0&&l.v!==k||Reflect.has(h,a);if(l!==void 0||T!==null&&(!c||(d=de(h,a))!=null&&d.writable)){l===void 0&&(l=o(()=>V(c?K(h[a]):k)),t.set(a,l));var f=M(l);if(f===k)return!1}return c},set(h,a,l,c){var A;var f=t.get(a),d=a in h;if(n&&a==="length")for(var p=l;p<f.v;p+=1){var v=t.get(p+"");v!==void 0?F(v,k):p in h&&(v=o(()=>V(k)),t.set(p+"",v))}f===void 0?(!d||(A=de(h,a))!=null&&A.writable)&&(f=o(()=>V(void 0)),F(f,o(()=>K(l))),t.set(a,f)):(d=f.v!==k,F(f,o(()=>K(l))));var S=Reflect.getOwnPropertyDescriptor(h,a);if(S!=null&&S.set&&S.set.call(c,l),!d){if(n&&typeof a=="string"){var I=t.get("length"),C=Number(a);Number.isInteger(C)&&C>=I.v&&F(I,C+1)}mt(i)}return!0},ownKeys(h){M(i);var a=Reflect.ownKeys(h).filter(f=>{var d=t.get(f);return d===void 0||d.v!==k});for(var[l,c]of t)c.v!==k&&!(l in h)&&a.push(l);return a},setPrototypeOf(){hn()}})}function mt(s,e=1){F(s,s.v+e)}function Bt(s){var e=H|X,t=b!==null&&(b.f&H)!==0?b:null;return T===null||t!==null&&(t.f&N)!==0?e|=N:T.f|=vs,{ctx:y,deps:null,effects:null,equals:ws,f:e,fn:s,reactions:null,rv:0,v:null,wv:0,parent:t??T}}function yt(s){const e=Bt(s);return $s(e),e}function bn(s){const e=Bt(s);return e.equals=gs,e}function xs(s){var e=s.effects;if(e!==null){s.effects=null;for(var t=0;t<e.length;t+=1)j(e[t])}}function Tn(s){for(var e=s.parent;e!==null;){if((e.f&H)===0)return e;e=e.parent}return null}function bs(s){var e,t=T;Me(Tn(s));try{xs(s),e=Ns(s)}finally{Me(t)}return e}function Ts(s){var e=bs(s),t=(ie||(s.f&N)!==0)&&s.deps!==null?ge:$;W(s,t),s.equals(e)||(s.v=e,s.wv=Ds())}const qe=new Map;function Be(s,e){var t={f:0,v:s,reactions:null,equals:ws,rv:0,wv:0};return t}function V(s,e){const t=Be(s);return $s(t),t}function Mn(s,e=!1){var n;const t=Be(s);return e||(t.equals=gs),Ne&&y!==null&&y.l!==null&&((n=y.l).s??(n.s=[])).push(t),t}function F(s,e,t=!1){b!==null&&!Y&&ht()&&(b.f&(H|kt))!==0&&!(z!=null&&z.includes(s))&&fn();let n=t?K(e):e;return Pt(s,n)}function Pt(s,e){if(!s.equals(e)){var t=s.v;Ve?qe.set(s,e):qe.set(s,t),s.v=e,(s.f&H)!==0&&((s.f&X)!==0&&bs(s),W(s,(s.f&N)===0?$:ge)),s.wv=Ds(),Ms(s,X),ht()&&T!==null&&(T.f&$)!==0&&(T.f&(ee|Pe))===0&&(R===null?$n([s]):R.push(s))}return e}function Ms(s,e){var t=s.reactions;if(t!==null)for(var n=ht(),i=t.length,r=0;r<i;r++){var o=t[r],h=o.f;(h&X)===0&&(!n&&o===T||(W(o,e),(h&($|N))!==0&&((h&H)!==0?Ms(o,ge):pt(o))))}}let Sn=!1;var ss,Ss,Ps,Is,Cs;function Pn(){if(ss===void 0){ss=window,Ss=document,Ps=/Firefox/.test(navigator.userAgent);var s=Element.prototype,e=Node.prototype,t=Text.prototype;Is=de(e,"firstChild").get,Cs=de(e,"nextSibling").get,es(s)&&(s.__click=void 0,s.__className=void 0,s.__attributes=null,s.__style=void 0,s.__e=void 0),es(t)&&(t.__t=void 0)}}function Re(s=""){return document.createTextNode(s)}function Je(s){return Is.call(s)}function ft(s){return Cs.call(s)}function B(s,e){return Je(s)}function ct(s,e){{var t=Je(s);return t instanceof Comment&&t.data===""?ft(t):t}}function q(s,e=1,t=!1){let n=s;for(;e--;)n=ft(n);return n}function In(s){s.textContent=""}function Cn(s){T===null&&b===null&&ln(),b!==null&&(b.f&N)!==0&&T===null&&on(),Ve&&rn()}function En(s,e){var t=e.last;t===null?e.last=e.first=s:(t.next=s,s.prev=t,e.last=s)}function Ie(s,e,t,n=!0){var i=T,r={ctx:y,deps:null,nodes_start:null,nodes_end:null,f:s|X,first:null,fn:e,last:null,next:null,parent:i,prev:null,teardown:null,transitions:null,wv:0};if(t)try{Dt(r),r.f|=en}catch(a){throw j(r),a}else e!==null&&pt(r);var o=t&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&(vs|Qe))===0;if(!o&&n&&(i!==null&&En(r,i),b!==null&&(b.f&H)!==0)){var h=b;(h.effects??(h.effects=[])).push(r)}return r}function zn(s){const e=Ie(at,null,!1);return W(e,$),e.teardown=s,e}function Es(s){Cn();var e=T!==null&&(T.f&ee)!==0&&y!==null&&!y.m;if(e){var t=y;(t.e??(t.e=[])).push({fn:s,effect:T,reaction:b})}else{var n=$t(s);return n}}function An(s){const e=Ie(Pe,s,!0);return(t={})=>new Promise(n=>{t.outro?$e(e,()=>{j(e),n(void 0)}):(j(e),n(void 0))})}function $t(s){return Ie(ds,s,!1)}function kn(s){return Ie(at,s,!0)}function re(s,e=[],t=Bt){const n=e.map(t);return Ce(()=>s(...n.map(M)))}function Ce(s,e=0){return Ie(at|kt|e,s,!0)}function we(s,e=!0){return Ie(at|ee,s,!0,e)}function zs(s){var e=s.teardown;if(e!==null){const t=Ve,n=b;ns(!0),oe(null);try{e.call(null)}finally{ns(t),oe(n)}}}function As(s,e=!1){var t=s.first;for(s.first=s.last=null;t!==null;){var n=t.next;(t.f&Pe)!==0?t.parent=null:j(t,e),t=n}}function Fn(s){for(var e=s.first;e!==null;){var t=e.next;(e.f&ee)===0&&j(e),e=t}}function j(s,e=!0){var t=!1;(e||(s.f&ps)!==0)&&s.nodes_start!==null&&(qn(s.nodes_start,s.nodes_end),t=!0),As(s,e&&!t),nt(s,0),W(s,ut);var n=s.transitions;if(n!==null)for(const r of n)r.stop();zs(s);var i=s.parent;i!==null&&i.first!==null&&ks(s),s.next=s.prev=s.teardown=s.ctx=s.deps=s.fn=s.nodes_start=s.nodes_end=null}function qn(s,e){for(;s!==null;){var t=s===e?null:ft(s);s.remove(),s=t}}function ks(s){var e=s.parent,t=s.prev,n=s.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===s&&(e.first=n),e.last===s&&(e.last=t))}function $e(s,e){var t=[];Ot(s,t,!0),Fs(t,()=>{j(s),e&&e()})}function Fs(s,e){var t=s.length;if(t>0){var n=()=>--t||e();for(var i of s)i.out(n)}else e()}function Ot(s,e,t){if((s.f&Z)===0){if(s.f^=Z,s.transitions!==null)for(const o of s.transitions)(o.is_global||t)&&e.push(o);for(var n=s.first;n!==null;){var i=n.next,r=(n.f&Le)!==0||(n.f&ee)!==0;Ot(n,e,r?t:!1),n=i}}}function je(s){qs(s,!0)}function qs(s,e){if((s.f&Z)!==0){s.f^=Z,(s.f&$)===0&&(s.f^=$),He(s)&&(W(s,X),pt(s));for(var t=s.first;t!==null;){var n=t.next,i=(t.f&Le)!==0||(t.f&ee)!==0;qs(t,i?e:!1),t=n}if(s.transitions!==null)for(const r of s.transitions)(r.is_global||e)&&r.in()}}let et=[];function Bn(){var s=et;et=[],js(s)}function Bs(s){et.length===0&&queueMicrotask(Bn),et.push(s)}let Ge=!1,It=!1,tt=null,pe=!1,Ve=!1;function ns(s){Ve=s}let Ue=[];let b=null,Y=!1;function oe(s){b=s}let T=null;function Me(s){T=s}let z=null;function $s(s){b!==null&&b.f&St&&(z===null?z=[s]:z.push(s))}let E=null,D=0,R=null;function $n(s){R=s}let Os=1,st=0,ie=!1;function Ds(){return++Os}function He(s){var f;var e=s.f;if((e&X)!==0)return!0;if((e&ge)!==0){var t=s.deps,n=(e&N)!==0;if(t!==null){var i,r,o=(e&Ze)!==0,h=n&&T!==null&&!ie,a=t.length;if(o||h){var l=s,c=l.parent;for(i=0;i<a;i++)r=t[i],(o||!((f=r==null?void 0:r.reactions)!=null&&f.includes(l)))&&(r.reactions??(r.reactions=[])).push(l);o&&(l.f^=Ze),h&&c!==null&&(c.f&N)===0&&(l.f^=N)}for(i=0;i<a;i++)if(r=t[i],He(r)&&Ts(r),r.wv>s.wv)return!0}(!n||T!==null&&!ie)&&W(s,$)}return!1}function On(s,e){for(var t=e;t!==null;){if((t.f&Qe)!==0)try{t.fn(s);return}catch{t.f^=Qe}t=t.parent}throw Ge=!1,s}function is(s){return(s.f&ut)===0&&(s.parent===null||(s.parent.f&Qe)===0)}function dt(s,e,t,n){if(Ge){if(t===null&&(Ge=!1),is(e))throw s;return}if(t!==null&&(Ge=!0),On(s,e),is(e))throw s}function Ls(s,e,t=!0){var n=s.reactions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];z!=null&&z.includes(s)||((r.f&H)!==0?Ls(r,e,!1):e===r&&(t?W(r,X):(r.f&$)!==0&&W(r,ge),pt(r)))}}function Ns(s){var p;var e=E,t=D,n=R,i=b,r=ie,o=z,h=y,a=Y,l=s.f;E=null,D=0,R=null,ie=(l&N)!==0&&(Y||!pe||b===null),b=(l&(ee|Pe))===0?s:null,z=null,ts(s.ctx),Y=!1,st++,s.f|=St;try{var c=(0,s.fn)(),f=s.deps;if(E!==null){var d;if(nt(s,D),f!==null&&D>0)for(f.length=D+E.length,d=0;d<E.length;d++)f[D+d]=E[d];else s.deps=f=E;if(!ie)for(d=D;d<f.length;d++)((p=f[d]).reactions??(p.reactions=[])).push(s)}else f!==null&&D<f.length&&(nt(s,D),f.length=D);if(ht()&&R!==null&&!Y&&f!==null&&(s.f&(H|ge|X))===0)for(d=0;d<R.length;d++)Ls(R[d],s);return i!==null&&i!==s&&(st++,R!==null&&(n===null?n=R:n.push(...R))),c}finally{E=e,D=t,R=n,b=i,ie=r,z=o,ts(h),Y=a,s.f^=St}}function Dn(s,e){let t=e.reactions;if(t!==null){var n=Us.call(t,s);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}t===null&&(e.f&H)!==0&&(E===null||!E.includes(e))&&(W(e,ge),(e.f&(N|Ze))===0&&(e.f^=Ze),xs(e),nt(e,0))}function nt(s,e){var t=s.deps;if(t!==null)for(var n=e;n<t.length;n++)Dn(s,t[n])}function Dt(s){var e=s.f;if((e&ut)===0){W(s,$);var t=T,n=y,i=pe;T=s,pe=!0;try{(e&kt)!==0?Fn(s):As(s),zs(s);var r=Ns(s);s.teardown=typeof r=="function"?r:null,s.wv=Os;var o=s.deps,h;jt&&cn&&s.f&X}catch(a){dt(a,s,t,n||s.ctx)}finally{pe=i,T=t}}}function Ln(){try{an()}catch(s){if(tt!==null)dt(s,tt,null);else throw s}}function Nn(){var s=pe;try{var e=0;for(pe=!0;Ue.length>0;){e++>1e3&&Ln();var t=Ue,n=t.length;Ue=[];for(var i=0;i<n;i++){var r=Vn(t[i]);Rn(r)}qe.clear()}}finally{It=!1,pe=s,tt=null}}function Rn(s){var e=s.length;if(e!==0)for(var t=0;t<e;t++){var n=s[t];if((n.f&(ut|Z))===0)try{He(n)&&(Dt(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?ks(n):n.fn=null))}catch(i){dt(i,n,null,n.ctx)}}}function pt(s){It||(It=!0,queueMicrotask(Nn));for(var e=tt=s;e.parent!==null;){e=e.parent;var t=e.f;if((t&(Pe|ee))!==0){if((t&$)===0)return;e.f^=$}}Ue.push(e)}function Vn(s){for(var e=[],t=s;t!==null;){var n=t.f,i=(n&(ee|Pe))!==0,r=i&&(n&$)!==0;if(!r&&(n&Z)===0){if((n&ds)!==0)e.push(t);else if(i)t.f^=$;else try{He(t)&&Dt(t)}catch(a){dt(a,t,null,t.ctx)}var o=t.first;if(o!==null){t=o;continue}}var h=t.parent;for(t=t.next;t===null&&h!==null;)t=h.next,h=h.parent}return e}function M(s){var e=s.f,t=(e&H)!==0;if(b!==null&&!Y){if(!(z!=null&&z.includes(s))){var n=b.deps;s.rv<st&&(s.rv=st,E===null&&n!==null&&n[D]===s?D++:E===null?E=[s]:(!ie||!E.includes(s))&&E.push(s))}}else if(t&&s.deps===null&&s.effects===null){var i=s,r=i.parent;r!==null&&(r.f&N)===0&&(i.f^=N)}return t&&(i=s,He(i)&&Ts(i)),Ve&&qe.has(s)?qe.get(s):s.v}function Rs(s){var e=Y;try{return Y=!0,s()}finally{Y=e}}const Hn=-7169;function W(s,e){s.f=s.f&Hn|e}const Wn=["touchstart","touchmove"];function Yn(s){return Wn.includes(s)}const Vs=new Set,Ct=new Set;function Lt(s){for(var e=0;e<s.length;e++)Vs.add(s[e]);for(var t of Ct)t(s)}function Xe(s){var A;var e=this,t=e.ownerDocument,n=s.type,i=((A=s.composedPath)==null?void 0:A.call(s))||[],r=i[0]||s.target,o=0,h=s.__root;if(h){var a=i.indexOf(h);if(a!==-1&&(e===document||e===window)){s.__root=e;return}var l=i.indexOf(e);if(l===-1)return;a<=l&&(o=a)}if(r=i[o]||s.target,r!==e){Ks(s,"currentTarget",{configurable:!0,get(){return r||t}});var c=b,f=T;oe(null),Me(null);try{for(var d,p=[];r!==null;){var v=r.assignedSlot||r.parentNode||r.host||null;try{var S=r["__"+n];if(S!=null&&(!r.disabled||s.target===r))if(zt(S)){var[I,...C]=S;I.apply(r,[s,...C])}else S.call(r,s)}catch(m){d?p.push(m):d=m}if(s.cancelBubble||v===e||v===null)break;r=v}if(d){for(let m of p)queueMicrotask(()=>{throw m});throw d}}finally{s.__root=e,delete s.currentTarget,oe(c),Me(f)}}}function Xn(s){var e;e=document.head.appendChild(Re());try{Ce(()=>s(e),ps)}finally{}}function Gn(s){var e=document.createElement("template");return e.innerHTML=s,e.content}function it(s,e){var t=T;t.nodes_start===null&&(t.nodes_start=s,t.nodes_end=e)}function O(s,e){var t=(e&wn)!==0,n=(e&gn)!==0,i,r=!s.startsWith("<!>");return()=>{i===void 0&&(i=Gn(r?s:"<!>"+s),t||(i=Je(i)));var o=n||Ps?document.importNode(i,!0):i.cloneNode(!0);if(t){var h=Je(o),a=o.lastChild;it(h,a)}else it(o,o);return o}}function Q(s=""){{var e=Re(s+"");return it(e,e),e}}function Nt(){var s=document.createDocumentFragment(),e=document.createComment(""),t=Re();return s.append(e,t),it(e,t),s}function x(s,e){s!==null&&s.before(e)}function Oe(s,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(s.__t??(s.__t=s.nodeValue))&&(s.__t=t,s.nodeValue=t+"")}function Un(s,e){return Kn(s,e)}const _e=new Map;function Kn(s,{target:e,anchor:t,props:n={},events:i,context:r,intro:o=!0}){Pn();var h=new Set,a=f=>{for(var d=0;d<f.length;d++){var p=f[d];if(!h.has(p)){h.add(p);var v=Yn(p);e.addEventListener(p,Xe,{passive:v});var S=_e.get(p);S===void 0?(document.addEventListener(p,Xe,{passive:v}),_e.set(p,1)):_e.set(p,S+1)}}};a(At(Vs)),Ct.add(a);var l=void 0,c=An(()=>{var f=t??e.appendChild(Re());return we(()=>{if(r){le({});var d=y;d.c=r}i&&(n.$$events=i),l=s(f,n)||{},r&&ae()}),()=>{var v;for(var d of h){e.removeEventListener(d,Xe);var p=_e.get(d);--p===0?(document.removeEventListener(d,Xe),_e.delete(d)):_e.set(d,p)}Ct.delete(a),f!==t&&((v=f.parentNode)==null||v.removeChild(f))}});return Qn.set(l,c),l}let Qn=new WeakMap;function Rt(s,e,[t,n]=[0,0]){var i=s,r=null,o=null,h=k,a=t>0?Le:0,l=!1;const c=(d,p=!0)=>{l=!0,f(p,d)},f=(d,p)=>{h!==(h=d)&&(h?(r?je(r):p&&(r=we(()=>p(i))),o&&$e(o,()=>{o=null})):(o?je(o):p&&(o=we(()=>p(i,[t+1,n]))),r&&$e(r,()=>{r=null})))};Ce(()=>{l=!1,e(c),l||f(null,null)},a)}function Vt(s,e){return e}function Zn(s,e,t,n){for(var i=[],r=e.length,o=0;o<r;o++)Ot(e[o].e,i,!0);var h=r>0&&i.length===0&&t!==null;if(h){var a=t.parentNode;In(a),a.append(t),n.clear(),se(s,e[0].prev,e[r-1].next)}Fs(i,()=>{for(var l=0;l<r;l++){var c=e[l];h||(n.delete(c.k),se(s,c.prev,c.next)),j(c.e,!h)}})}function Ht(s,e,t,n,i,r=null){var o=s,h={flags:e,items:new Map,first:null},a=(e&_s)!==0;if(a){var l=s;o=l.appendChild(Re())}var c=null,f=!1,d=bn(()=>{var p=t();return zt(p)?p:p==null?[]:At(p)});Ce(()=>{var p=M(d),v=p.length;f&&v===0||(f=v===0,Jn(p,h,o,i,e,n,t),r!==null&&(v===0?c?je(c):c=we(()=>r(o)):c!==null&&$e(c,()=>{c=null})),M(d))})}function Jn(s,e,t,n,i,r,o){var Ut,Kt,Qt,Zt;var h=(i&pn)!==0,a=(i&(Ft|qt))!==0,l=s.length,c=e.items,f=e.first,d=f,p,v=null,S,I=[],C=[],A,m,_,P;if(h)for(P=0;P<l;P+=1)A=s[P],m=r(A,P),_=c.get(m),_!==void 0&&((Ut=_.a)==null||Ut.measure(),(S??(S=new Set)).add(_));for(P=0;P<l;P+=1){if(A=s[P],m=r(A,P),_=c.get(m),_===void 0){var Xs=d?d.e.nodes_start:t;v=ei(Xs,e,v,v===null?e.first:v.next,A,m,P,n,i,o),c.set(m,v),I=[],C=[],d=v.next;continue}if(a&&jn(_,A,P,i),(_.e.f&Z)!==0&&(je(_.e),h&&((Kt=_.a)==null||Kt.unfix(),(S??(S=new Set)).delete(_))),_!==d){if(p!==void 0&&p.has(_)){if(I.length<C.length){var Ye=C[0],te;v=Ye.prev;var Gt=I[0],gt=I[I.length-1];for(te=0;te<I.length;te+=1)rs(I[te],Ye,t);for(te=0;te<C.length;te+=1)p.delete(C[te]);se(e,Gt.prev,gt.next),se(e,v,Gt),se(e,gt,Ye),d=Ye,v=gt,P-=1,I=[],C=[]}else p.delete(_),rs(_,d,t),se(e,_.prev,_.next),se(e,_,v===null?e.first:v.next),se(e,v,_),v=_;continue}for(I=[],C=[];d!==null&&d.k!==m;)(d.e.f&Z)===0&&(p??(p=new Set)).add(d),C.push(d),d=d.next;if(d===null)continue;_=d}I.push(_),v=_,d=_.next}if(d!==null||p!==void 0){for(var ze=p===void 0?[]:At(p);d!==null;)(d.e.f&Z)===0&&ze.push(d),d=d.next;var _t=ze.length;if(_t>0){var Gs=(i&_s)!==0&&l===0?t:null;if(h){for(P=0;P<_t;P+=1)(Qt=ze[P].a)==null||Qt.measure();for(P=0;P<_t;P+=1)(Zt=ze[P].a)==null||Zt.fix()}Zn(e,ze,Gs,c)}}h&&Bs(()=>{var Jt;if(S!==void 0)for(_ of S)(Jt=_.a)==null||Jt.apply()}),T.first=e.first&&e.first.e,T.last=v&&v.e}function jn(s,e,t,n){(n&Ft)!==0&&Pt(s.v,e),(n&qt)!==0?Pt(s.i,t):s.i=t}function ei(s,e,t,n,i,r,o,h,a,l){var c=(a&Ft)!==0,f=(a&vn)===0,d=c?f?Mn(i):Be(i):i,p=(a&qt)===0?o:Be(o),v={i:p,v:d,k:r,a:null,e:null,prev:t,next:n};try{return v.e=we(()=>h(s,d,p,l),Sn),v.e.prev=t&&t.e,v.e.next=n&&n.e,t===null?e.first=v:(t.next=v,t.e.next=v.e),n!==null&&(n.prev=v,n.e.prev=v.e),v}finally{}}function rs(s,e,t){for(var n=s.next?s.next.e.nodes_start:t,i=e?e.e.nodes_start:t,r=s.e.nodes_start;r!==n;){var o=ft(r);i.before(r),r=o}}function se(s,e,t){e===null?s.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function vt(s,e,...t){var n=s,i=lt,r;Ce(()=>{i!==(i=e())&&(r&&(j(r),r=null),r=we(()=>i(n,...t)))},Le)}function ti(s,e,t){var n=s,i,r;Ce(()=>{i!==(i=e())&&(r&&($e(r),r=null),i&&(r=we(()=>t(n,i))))},Le)}const os=[...` 	
\r\f \v\uFEFF`];function si(s,e,t){var n=s==null?"":""+s;if(e&&(n=n?n+" "+e:e),t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var r=i.length,o=0;(o=n.indexOf(i,o))>=0;){var h=o+r;(o===0||os.includes(n[o-1]))&&(h===n.length||os.includes(n[h]))?n=(o===0?"":n.substring(0,o))+n.substring(h+1):o=h}}return n===""?null:n}function ni(s,e){return s==null?null:String(s)}function Wt(s,e,t,n,i,r){var o=s.__className;if(o!==t||o===void 0){var h=si(t,n,r);h==null?s.removeAttribute("class"):s.className=h,s.__className=t}else if(r&&i!==r)for(var a in r){var l=!!r[a];(i==null||l!==!!i[a])&&s.classList.toggle(a,l)}return r}function Hs(s,e,t,n){var i=s.__style;if(i!==e){var r=ni(e);r==null?s.removeAttribute("style"):s.style.cssText=r,s.__style=e}return n}const ii=Symbol("is custom element"),ri=Symbol("is html");function Fe(s,e,t,n){var i=oi(s);i[e]!==(i[e]=t)&&(e==="loading"&&(s[sn]=t),t==null?s.removeAttribute(e):typeof t!="string"&&li(s).includes(e)?s[e]=t:s.setAttribute(e,t))}function oi(s){return s.__attributes??(s.__attributes={[ii]:s.nodeName.includes("-"),[ri]:s.namespaceURI===_n})}var ls=new Map;function li(s){var e=ls.get(s.nodeName);if(e)return e;ls.set(s.nodeName,e=[]);for(var t,n=s,i=Element.prototype;i!==n;){t=Qs(n);for(var r in t)t[r].set&&e.push(r);n=cs(n)}return e}function as(s,e){return s===e||(s==null?void 0:s[ke])===e}function xt(s={},e,t,n){return $t(()=>{var i,r;return kn(()=>{i=r,r=[],Rs(()=>{s!==t(...r)&&(e(s,...r),i&&as(t(...i),s)&&e(null,...i))})}),()=>{Bs(()=>{r&&as(t(...r),s)&&e(null,...r)})}}),s}const ai={get(s,e){let t=s.props.length;for(;t--;){let n=s.props[t];if(Ae(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n)return n[e]}},set(s,e,t){let n=s.props.length;for(;n--;){let i=s.props[n];Ae(i)&&(i=i());const r=de(i,e);if(r&&r.set)return r.set(t),!0}return!1},getOwnPropertyDescriptor(s,e){let t=s.props.length;for(;t--;){let n=s.props[t];if(Ae(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n){const i=de(n,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(s,e){if(e===ke||e===tn)return!1;for(let t of s.props)if(Ae(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(s){const e=[];for(let t of s.props)if(Ae(t)&&(t=t()),!!t){for(const n in t)e.includes(n)||e.push(n);for(const n of Object.getOwnPropertySymbols(t))e.includes(n)||e.push(n)}return e}};function ui(...s){return new Proxy({props:s},ai)}function fe(s,e,t,n){var i;i=s[e];var r=n,o=!0,h=()=>(o&&(o=!1,r=n),r);i===void 0&&n!==void 0&&(i=h());var a;return a=()=>{var l=s[e];return l===void 0?h():(o=!0,l)},a}function Ws(s){y===null&&ms(),Ne&&y.l!==null?hi(y).m.push(s):Es(()=>{const e=Rs(s);if(typeof e=="function")return e})}function hi(s){var e=s.l;return e.u??(e.u={a:[],b:[],m:[]})}const fi="5";var fs;typeof window<"u"&&((fs=window.__svelte??(window.__svelte={})).v??(fs.v=new Set)).add(fi);dn();var ci=O('<a target="_blank" rel="noopener noreferrer" class="svelte-o5z3n1"> </a>'),di=O('<section class="page svelte-o5z3n1" id="current-page"><span class="title svelte-o5z3n1"> <!></span> <!></section>');function Ee(s,e){le(e,!0);let t=fe(e,"title",3,"Some Page"),n=fe(e,"style",3,""),i=fe(e,"extra",3,null);var r=di(),o=B(r),h=B(o),a=q(h);{var l=f=>{var d=ci(),p=B(d);re(()=>{Fe(d,"href",i().href),Oe(p,i().title)}),x(f,d)};Rt(a,f=>{i()&&f(l)})}var c=q(o,2);vt(c,()=>e.children??lt),re(()=>{Hs(r,n()),Oe(h,`${t()??""} `)}),x(s,r),ae()}var pi=O('<p>Welcome to the website!</p> <img src="https://picsum.photos/400/300" alt="Random" class="svelte-1yc2abm">',1);function vi(s){Ee(s,{title:"Home",children:(e,t)=>{var n=pi();x(e,n)},$$slots:{default:!0}})}var wi=O("<p>Page not found.</p>");function gi(s){Ee(s,{title:"Error 404",children:(e,t)=>{var n=wi();x(e,n)},$$slots:{default:!0}})}var _i=O('<iframe frameborder="0" title="Thesis PDF" class="svelte-gqw2wc"></iframe>');function mi(s){const e=`${We}/main.pdf`;Ee(s,{title:"Thesis",extra:{href:e,title:"Open in a new page →"},children:(t,n)=>{var i=_i();Fe(i,"src",e),x(t,i)},$$slots:{default:!0}})}var yi=O("<p>Cool.</p>");function xi(s){Ee(s,{title:"About",children:(e,t)=>{var n=yi();x(e,n)},$$slots:{default:!0}})}var bi=O('<div class="list svelte-161iceo"></div>');function Ti(s){Ee(s,{title:"Examples",children:(e,t)=>{var n=bi();Ht(n,5,()=>Ys,Vt,(i,r)=>{ne(i,{get href(){return M(r).href},cssClass:"example-menu-item",children:(o,h)=>{var a=Q();re(()=>Oe(a,M(r).title)),x(o,a)},$$slots:{default:!0}})}),x(e,n)},$$slots:{default:!0}})}class u{constructor(e=0,t=0){this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}add(e){return new u(this.x+e.x,this.y+e.y)}addInPlace(e){return this.x+=e.x,this.y+=e.y,this}subtract(e){return new u(this.x-e.x,this.y-e.y)}subtractInPlace(e){return this.x-=e.x,this.y-=e.y,this}multiply(e){return new u(this.x*e,this.y*e)}multiplyInPlace(e){return this.x*=e,this.y*=e,this}scale(e){return new u(this.x*e.x,this.y*e.y)}lengthSquared(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.lengthSquared())}normalize(){const e=this.length();return e===0?new u(0,0):new u(this.x/e,this.y/e)}dot(e){return this.x*e.x+this.y*e.y}clone(){return new u(this.x,this.y)}static zero(){return new u(0,0)}static one(){return new u(1,1)}}const be=class be{constructor(e,t=u.zero(),n=new u(100,100),i=u.one(),r=new u(.5,.5),o=0,h=[]){this._parent=null,this._hasDefaultSize=!0,this.position=t,this.rotation=o,this._size=n,this._hasDefaultSize=n.x===100&&n.y===100,this.scale=i,this.pivot=r,this.renderFunction=e,this._children=h}get size(){return this._size}set size(e){this._size=e,this._hasDefaultSize=!1}append(...e){this._children.push(...e),e.forEach(t=>{t._parent=this})}get hasDefaultSize(){return this._hasDefaultSize}render(e,t=0){if(!(this._parent!==null&&t===0)){if(t>10){console.warn("CanvasObject: Maximum render depth exceeded, stopping rendering to prevent stack overflow.");return}if(e.save(),e.translate(this.position.x,this.position.y),e.scale(this.scale.x,this.scale.y),e.rotate(this.rotation),this.renderFunction(this,e),this._children.forEach(n=>{n.render(e,t+1)}),!be.debugMode){e.restore();return}e.fillStyle="#00ff00",e.fillRect(-2,-2,4,4),e.strokeStyle="#0000ff",e.lineWidth=1,e.strokeRect(-this.size.x*this.pivot.x,-this.size.y*this.pivot.y,this.size.x,this.size.y),e.restore()}}createCopy(e){const t=new be(this.renderFunction,this.position.clone(),this.size.clone(),this.scale.clone(),this.pivot.clone(),this.rotation);return e?t._children=this._children.map(n=>n.createCopy(!0)):t._children=[],t}static setDebugMode(e){be.debugMode=e}};be.debugMode=!1;let w=be;class g{static ellipse(e,t=null){return(n,i)=>{i.beginPath(),i.ellipse(-n.size.x*(n.pivot.x-.5),-n.size.y*(n.pivot.y-.5),n.size.x/2,n.size.y/2,0,0,Math.PI*2),i.fillStyle=e,i.fill(),t&&(i.strokeStyle=t,i.stroke())}}static rectangle(e,t=null){return(n,i)=>{i.beginPath(),i.rect(-n.size.x*n.pivot.x,-n.size.y*n.pivot.y,n.size.x,n.size.y),i.fillStyle=e,i.fill(),t&&(i.strokeStyle=t,i.stroke())}}static roundedRectangle(e,t=null,n=10){return(i,r)=>{r.beginPath(),r.roundRect(-i.size.x*i.pivot.x,-i.size.y*i.pivot.y,i.size.x,i.size.y,n),r.fillStyle=e,r.fill(),t&&(r.strokeStyle=t,r.stroke())}}static line(e,t=1){return(n,i)=>{const r=u.one().subtract(n.pivot);i.beginPath(),i.moveTo(-n.size.x*n.pivot.x,-n.size.y*n.pivot.y),i.lineTo(n.size.x*r.x,n.size.y*r.y),i.strokeStyle=e,i.lineWidth=t,i.stroke()}}static image(e){return(t,n)=>{e.isLoaded()&&n.drawImage(e.getImage(),-t.size.x*t.pivot.x,-t.size.y*t.pivot.y,t.size.x,t.size.y)}}static sprite(e,t=()=>0){return(n,i)=>{if(!e.isLoaded())return;const r=t();e.drawFrame(i,r,-n.size.x*n.pivot.x,-n.size.y*n.pivot.y,n.size.x,n.size.y)}}static staticText(e,t="16px monospace, Consolas",n="#000",i="left",r="top",o=!1){return g.dynamicText(()=>e,t,n,i,r,o)}static dynamicText(e,t="16px monospace, Consolas",n="#000",i="left",r="top",o=!1){return(h,a)=>{h.hasDefaultSize&&(h.size=u.one());let l=[],c=0;o?(l=e().split(`
`),c=parseInt(t)):l=[e()];for(let f=0;f<l.length;f++)a.font=t,a.fillStyle=n,a.textAlign=i,a.textBaseline=r,a.fillText(l[f],0,c*f)}}static plotFunction(e,t,n={lower:-5,upper:5},i={lower:-5,upper:5},r=.1,o=()=>0,h=1){return(a,l)=>{const c=new u((a.pivot.x-.5)*a.size.x,(a.pivot.y-.5)*a.size.y),f=new u(-a.size.x/2-c.x,-a.size.y/2-c.y),d=1-n.upper/(n.upper-n.lower);if(d>=0&&d<=1){l.beginPath(),l.moveTo(f.x+a.size.x*d,f.y),l.lineTo(f.x+a.size.x*d,f.y+a.size.y),l.strokeStyle="#000",l.lineWidth=2,l.stroke(),l.font="16px monospace, Consolas",l.fillStyle="#000",l.textAlign="left",l.textBaseline="top",l.fillText(i.upper.toString(),f.x+a.size.x*d+5,f.y),l.textAlign="left",l.textBaseline="bottom",l.fillText(i.lower.toString(),f.x+a.size.x*d+5,f.y+a.size.y);for(let m=Math.ceil(i.lower);m<=Math.floor(i.upper);m+=h){if(m===0)continue;const _=f.y+a.size.y*(1-(m-i.lower)/(i.upper-i.lower));l.beginPath(),l.moveTo(f.x,_),l.lineTo(f.x+a.size.x,_),l.strokeStyle="#00000044",l.lineWidth=2,l.stroke()}}const p=i.upper/(i.upper-i.lower);if(p>=0&&p<=1){l.beginPath(),l.moveTo(f.x,f.y+a.size.y*p),l.lineTo(f.x+a.size.x,f.y+a.size.y*p),l.strokeStyle="#000",l.lineWidth=2,l.stroke(),l.fillStyle="#000",l.textAlign="left",l.textBaseline="top",l.fillText(n.lower.toString(),f.x,f.y+a.size.y*p+5),l.textAlign="right",l.textBaseline="top",l.fillText(n.upper.toString(),f.x+a.size.x,f.y+a.size.y*p+5);for(let m=Math.ceil(n.lower);m<=Math.floor(n.upper);m+=h){if(m===0)continue;const _=f.x+a.size.x*((m-n.lower)/(n.upper-n.lower));l.beginPath(),l.moveTo(_,f.y),l.lineTo(_,f.y+a.size.y),l.strokeStyle="#00000044",l.lineWidth=2,l.stroke()}}l.beginPath();const v=a.size.x/(n.upper-n.lower),S=a.size.y/(i.upper-i.lower);for(let m=n.lower;m<=n.upper;m+=r){const _=t(m);l.lineTo(f.x+(m-n.lower)*v,f.y+a.size.y-(_-i.lower)*S)}const I=t(n.upper);l.lineTo(f.x+(n.upper-n.lower)*v,f.y+a.size.y-(I-i.lower)*S),l.strokeStyle="#ff5722",l.lineWidth=4,l.stroke();const C=o(),A=t(C);d>=0&&d<=1&&(l.beginPath(),l.ellipse(f.x+a.size.x*d+C*v,f.y+a.size.y*p-A*S,5,5,0,0,Math.PI*2),l.fillStyle="#f00",l.strokeStyle="#fff",l.lineWidth=2,l.fill(),l.stroke()),l.font="20px monospace, Consolas",l.fillStyle="#fff",l.textAlign="center",l.textBaseline="bottom",l.fillText(e,f.x+a.size.x/2,f.y)}}static axes(e,t,n,i=!0){return(r,o)=>{const h=new u(r.pivot.x*r.size.x,r.pivot.y*r.size.y);o.save(),o.translate(-h.x,-h.y);const a=e.x<0&&e.y>0?-e.x/(e.y-e.x):0;let l=t.x<0&&t.y>0?-t.x/(t.y-t.x):0;i&&(l=1-l);const c=new u(r.size.x/(e.y-e.x)*n,r.size.y/(t.y-t.x)*n),f=a*r.size.x,d=l*r.size.y;o.strokeStyle="#00000088",o.lineWidth=1,o.beginPath();for(let p=Math.ceil(e.x/n)*c.x;p<=r.size.x-f+.1;p+=c.x)o.moveTo(p+f,0),o.lineTo(p+f,r.size.y);for(let p=Math.ceil(-t.y/n)*c.y;p<=r.size.y-d+.1;p+=c.y)o.moveTo(0,p+d),o.lineTo(r.size.x,p+d);o.stroke(),o.strokeStyle="#f00",o.fillStyle="#f00",o.lineWidth=2,o.beginPath(),o.moveTo(0,l*r.size.y),o.lineTo(r.size.x-20,l*r.size.y),o.stroke(),o.beginPath(),o.lineTo(r.size.x-20,l*r.size.y+5),o.lineTo(r.size.x-20,l*r.size.y-5),o.lineTo(r.size.x,l*r.size.y),o.fill(),o.font="16px monospace, Consolas",o.textAlign="left",o.textBaseline="top",o.fillText(e.x.toString(),5,l*r.size.y+5),o.textAlign="right",o.fillText(e.y.toString(),r.size.x-5,l*r.size.y+5),o.fillStyle="#fff",o.textAlign="left",o.textBaseline="bottom",o.fillText(`${Math.min(Math.max(e.x,0),e.y).toString()};${Math.min(Math.max(t.x,0),t.y).toString()}`,a*r.size.x+5,l*r.size.y-5),o.strokeStyle="#0f0",o.fillStyle="#0f0",o.beginPath(),i?(o.moveTo(a*r.size.x,r.size.y-20),o.lineTo(a*r.size.x,0),o.stroke(),o.beginPath(),o.lineTo(a*r.size.x+5,20),o.lineTo(a*r.size.x-5,20),o.lineTo(a*r.size.x,0)):(o.moveTo(a*r.size.x,0),o.lineTo(a*r.size.x,r.size.y-20),o.stroke(),o.beginPath(),o.lineTo(a*r.size.x+5,r.size.y-20),o.lineTo(a*r.size.x-5,r.size.y-20),o.lineTo(a*r.size.x,r.size.y)),o.fill(),o.textAlign="right",o.textBaseline="top",o.fillText(i?t.y.toString():t.x.toString(),a*r.size.x-5,5),o.textBaseline="bottom",o.fillText(i?t.x.toString():t.y.toString(),a*r.size.x-5,r.size.y-5),o.restore()}}}class G{constructor(e,t,n){this.wrapper=e,this.context=t,this.time=n,this.objects={}}render(){}renderInOrder(...e){for(const t of e)t.render(this.context)}*sequence(){}static provide(){return(e,t,n)=>new this(e,t,n)}getFileInfo(){return"unknown"}}class Mi{constructor(){this.delta=0,this.now=0}}class Si extends G{constructor(e,t,n){super(e,t,n);const i=e.resolution;this.halfResolution=i.multiply(.5),this.objects={text:new w(g.staticText("Please provide a scene implementation.","32px Consolas, monospace","white","center","middle"),this.halfResolution,i)}}render(){this.objects.text.rotation=Math.sin(this.time.now*5)*Math.PI*.025,this.objects.text.render(this.context)}}const ot=class ot{constructor(e,t,n){if(this._time=new Mi,this._startTime=0,this._resolution=new u(1280,720),this._resolutionScale=1,this._dpi=globalThis.devicePixelRatio||2,this.backgroundColor="#444",this._scene=null,this._glHandler=null,this._fpsData=new Float32Array(201),this._fpsAccumulative=0,this._fpsIndex=0,this._fpsBounds={lower:0,upper:60},this._topFps=60,this._bottomFps=-1,this._fpsPlot=new w(g.plotFunction("",r=>this._fpsData[(r+this._fpsIndex)%201],{lower:0,upper:200},this._fpsBounds,1,()=>200,20),new u(970,10),new u(300,65),new u(1,1),new u(0,0)),this._instanceId=ot.IdCounter++,this._startTime=-1,this._canvas=e,this._wrapperElement=t,this._context=e.getContext("2d"),this._scene=n(this,this._context,this._time),this._scene===null&&(this._scene=new Si(this,this._context,this._time)),this._sequenceGenerator=this._scene.sequence(),!this._context)throw new Error("Failed to get 2D context from canvas");globalThis.requestAnimationFrame(this.onRenderFrame.bind(this));const i=()=>{this._canvas.width=this._wrapperElement.clientWidth*this._dpi*this._resolutionScale,this._canvas.height=this._wrapperElement.clientHeight*this._dpi*this._resolutionScale};globalThis.addEventListener("resize",i.bind(this)),i()}get resolution(){return this._resolution}get clientSize(){return new u(this._wrapperElement.clientWidth,this._wrapperElement.clientHeight)}onRenderFrame(e){const t=e/1e3;this._startTime<0&&(this._startTime=t),this._time.delta=t-this._startTime-this._time.now,this._time.now=t-this._startTime,this.setupTransformations(),this._scene.render(),this._sequenceGenerator.next(),this.drawDebugInfo(),globalThis.requestAnimationFrame(this.onRenderFrame.bind(this))}setupTransformations(){this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.fillStyle="#000",this._context.fillRect(0,0,this._canvas.width,this._canvas.height);const e=this._canvas.width/this._resolution.x,t=this._canvas.height/this._resolution.y,n=Math.min(e,t),i=(this._canvas.width-this._resolution.x*n)/2,r=(this._canvas.height-this._resolution.y*n)/2;this._context.setTransform(n,0,0,n,i,r),this._context.fillStyle=this.backgroundColor,this._context.fillRect(0,0,this._resolution.x,this._resolution.y),this._context.strokeStyle="white",this._context.strokeRect(0,0,this._resolution.x,this._resolution.y)}drawDebugInfo(){var t;if(w.debugMode===!1)return;this._context.fillStyle="#00000044",this._context.fillRect(0,0,1280,100),this._context.fillStyle="white",this._context.font="16px Consolas, monospace",this._context.textAlign="left",this._context.textBaseline="alphabetic",this._context.fillText(`(${this._instanceId}) Debug Info`,10,20),this._context.beginPath(),this._context.moveTo(10,30),this._context.lineTo(960,30),this._context.strokeStyle="white",this._context.lineWidth=1,this._context.lineCap="butt",this._context.stroke(),this._context.fillText(`Now       : ${this._time.now.toFixed(2)}s`,10,50),this._context.fillText(`Resolution: ${this._canvas.width}x${this._canvas.height}`,10,70),this._context.fillText(`Scene     : ${(t=this._scene)==null?void 0:t.getFileInfo()}`,10,90);const e=1/this._time.delta;this._context.textAlign="right",this._context.fillText(`FPS: ${e.toFixed(2).padStart(6,"0")}`,960,20),this._context.fillText(`Avg: ${(this._fpsAccumulative/200).toFixed(2).padStart(6,"0")}`,960,50),this._context.fillText(`Max: ${this._topFps.toFixed(2).padStart(6,"0")}`,960,70),this._context.fillText(`Min: ${this._bottomFps.toFixed(2).padStart(6,"0")}`,960,90),!(isNaN(e)||isFinite(e)===!1)&&(this._topFps=Math.max(this._topFps,e),this._bottomFps=this._bottomFps<0?e:Math.min(this._bottomFps,e),this._fpsAccumulative+=e,this._fpsIndex>=201&&(this._fpsAccumulative-=this._fpsData[this._fpsIndex%201]),w.debugMode=!1,this._fpsData[this._fpsIndex++%201]=e,this._fpsBounds.upper=Math.max(this._fpsBounds.upper,Math.ceil(e/10+1)*10),this._fpsPlot.render(this._context),w.debugMode=!0)}getTextSize(e){const t=this._context.measureText(e);return new u(t.actualBoundingBoxLeft+t.actualBoundingBoxRight,t.actualBoundingBoxAscent+t.actualBoundingBoxDescent)}getWebGLContext(){if(this._glHandler)return this._glHandler._glContext;const e=document.createElement("canvas");if(e.classList.add("webgl-canvas"),this._glHandler={_glCanvas:e,_glContext:e.getContext("webgl2"),_glResolution:new u(1280,720)},!this._glHandler._glContext)return console.error("WebGL context is not available."),null;const t=()=>{this._glHandler._glCanvas.width=this._wrapperElement.clientWidth,this._glHandler._glCanvas.height=this._wrapperElement.clientHeight;const n=this._wrapperElement.clientWidth/this._resolution.x,i=this._wrapperElement.clientHeight/this._resolution.y,r=Math.min(n,i),o=(this._wrapperElement.clientWidth-this._resolution.x*r)/2,h=(this._wrapperElement.clientHeight-this._resolution.y*r)/2;this._glHandler._glResolution.x=this._resolution.x*r,this._glHandler._glResolution.y=this._resolution.y*r,this._glHandler._glContext.viewport(o,h,this._resolution.x*r,this._resolution.y*r)};return globalThis.addEventListener("resize",t.bind(this)),setTimeout(t.bind(this),1),this._wrapperElement.insertBefore(this._glHandler._glCanvas,this._canvas),this._glHandler._glContext}};ot.IdCounter=0;let Et=ot;var Pi=()=>w.setDebugMode(!w.debugMode),Ii=O('<div class="canvas-wrapper svelte-2j3np0"><button class="fullscreen svelte-2j3np0"><span>⛶</span></button> <button class="debugMode svelte-2j3np0"><span>🛠️</span></button> <canvas width="200" height="100"></canvas></div>');function Ci(s,e){le(e,!0);let t=e.scene||(()=>null),n,i,r,o=V(!1);Ws(()=>{new Et(n,i,t),r.addEventListener("click",()=>{if(document.fullscreenElement){document.exitFullscreen().catch(f=>{console.error("Failed to exit fullscreen mode:",f)}),F(o,!1);return}i.requestFullscreen().catch(f=>{console.error("Failed to enter fullscreen mode:",f)}),F(o,!0)}),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||F(o,!1)})});var h=Ii(),a=B(h);xt(a,f=>r=f,()=>r);var l=q(a,2);l.__click=[Pi];var c=q(l,2);xt(c,f=>n=f,()=>n),xt(h,f=>i=f,()=>i),re(()=>Wt(c,1,`canvas ${M(o)?"fullscreen":""}`,"svelte-2j3np0")),x(s,h),ae()}Lt(["click"]);var Ei=O('<button role="tab"> </button>'),zi=O('<div class="tabs"><div class="tab-buttons svelte-1491n74" role="tablist"></div> <div class="tab-contents svelte-1491n74"><!></div></div>');function Ai(s,e){le(e,!0);let t=K([]),n=V(K(parseInt(new URL(window.location.href).searchParams.get("tab")||"0",10)));yn("tabs",{registerTab:a=>(t.push(a),t.length-1),activeTab:()=>M(n)}),Es(()=>{const a=new URL(window.location.href);a.searchParams.set("tab",M(n).toString()),window.history.replaceState({},"",a.toString())});var i=zi(),r=B(i);Ht(r,21,()=>t,Vt,(a,l,c)=>{var f=Ei();f.__click=()=>F(n,c,!0);let d;var p=B(f);re(v=>{d=Wt(f,1,"svelte-1491n74",null,d,v),Oe(p,M(l).title)},[()=>({active:M(n)===c})]),x(a,f)});var o=q(r,2),h=B(o);vt(h,()=>e.children??lt),x(s,i),ae()}Lt(["click"]);var ki=O('<div class="tab-panel svelte-fai8lk" role="tabpanel"><!></div>');function Fi(s,e){le(e,!0);const{registerTab:t,activeTab:n}=mn("tabs");let i=V(-1);Ws(()=>{F(i,t({title:e.title}),!0)});var r=Nt(),o=ct(r);{var h=a=>{var l=ki(),c=B(l);vt(c,()=>e.children),x(a,l)};Rt(o,a=>{M(i)===n()&&a(h)})}x(s,r),ae()}function qi(s,e){le(e,!0),Ee(s,{get title(){return e.title},children:(t,n)=>{Ai(t,{children:(i,r)=>{var o=Nt(),h=ct(o);Ht(h,17,()=>e.pages,Vt,(a,l)=>{Fi(a,{get title(){return M(l).name},children:(c,f)=>{Ci(c,{get scene(){return M(l).scene}})},$$slots:{default:!0}})}),x(i,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),ae()}class Yt{constructor(e){this.time=e}}class J{static*run(e){for(e.start();!e.tick();)yield}static*runTogether(e){e.forEach(n=>n.start());let t;do t=e.map(n=>n.tick()),yield;while(t.some(n=>!n))}}class wt extends Yt{constructor(e,t){super(e),this.startTime=0,this.endTime=0,this.duration=0,this.finished=!0,this.duration=t}start(){this.startTime=this.time.now,this.endTime=this.startTime+this.duration,this.finished=!1}tick(){return this.finished?!0:(this.time.now>=this.endTime&&(this.finished=!0),this.finished)}}class ve extends Yt{constructor(e,t,n){super(e),this.startTime=0,this.endTime=0,this.finished=!0,this.setter=t,this.options=n,this.options.easing=n.easing??(i=>i)}start(){this.startTime=this.time.now,this.endTime=this.startTime+this.options.duration,this.finished=!1,this.setter(this.options.startValue)}tick(){if(this.finished)return!0;const e=this.time.now,t=e-this.startTime,n=Math.min(t/this.options.duration,1),i=this.options.easing(n),r=this.options.startValue+(this.options.endValue-this.options.startValue)*i;return this.setter(r),e>=this.endTime&&(this.finished=!0,this.setter(this.options.endValue)),this.finished}get progress(){if(this.finished)return 1;const t=this.time.now-this.startTime;return Math.min(t/this.options.duration,1)}reverse(){const e=this.options.startValue;this.options.startValue=this.options.endValue,this.options.endValue=e}}class L{static linear(e){return e}static easeInQuad(e){return e*e}static easeOutQuad(e){return e*(2-e)}static easeInOutQuad(e){return e<.5?2*e*e:-1+(4-2*e)*e}static easeInCubic(e){return e*e*e}static easeOutCubic(e){return 1-Math.pow(1-e,3)}static easeInOutCubic(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}static easeInElastic(e){const t=2*Math.PI/3;return e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*t)}static easeOutElastic(e){const t=2*Math.PI/3;return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*t)+1}static easeInOutElastic(e){const t=2*Math.PI/4.5;return e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*t))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*t)/2+1}}class xe extends Yt{constructor(e,t,n,i){super(e),this.currentIndex=0,this.values=n,this.interpolator=new ve(e,t,{startValue:n[0],endValue:n[1],duration:i.duration,easing:i.easing}),this.endsOnStart=i.loops??!1}start(){this.interpolator.start(),this.currentIndex=0,this.interpolator.options.startValue=this.values[0],this.interpolator.options.endValue=this.values[1]}tick(){return this.currentIndex>=this.values.length-(this.endsOnStart?0:1)?!0:(this.interpolator.tick()&&(this.currentIndex++,this.currentIndex<this.values.length&&(this.interpolator.options.startValue=this.values[this.currentIndex],this.interpolator.options.endValue=this.values[(this.currentIndex+1)%this.values.length],this.interpolator.start())),!1)}}class Bi extends G{getFileInfo(){return"src/rendering/scenes/basics/CoordinateSystems.ts"}constructor(e,t,n){super(e,t,n),this.objects={screenSpace:new w(g.axes(new u(0,1280),new u(0,720),80,!1),new u(40,40),new u(1200,640),new u(1,1),new u(0,0)),ball:new w(g.ellipse("#888","#000"),new u(340,290),new u(50,50)),hat:new w(g.rectangle("#f00","#000"),new u(0,-30),new u(25,25)),localSpace:new w(g.axes(new u(-100,100),new u(-100,100),20,!1),new u(0,0),new u(200,200))},this.objects.ball.append(this.objects.hat),this.objects.ball.append(this.objects.localSpace),this.sequencers={timer:new wt(n,1),interpolator:new ve(n,i=>this.objects.ball.position.x=i,{startValue:320,endValue:960,duration:.5,easing:L.easeInOutCubic})}}*sequence(){for(;;)yield*J.run(this.sequencers.interpolator),this.sequencers.interpolator.reverse(),yield*J.run(this.sequencers.timer)}render(){this.objects.screenSpace.render(this.context),this.objects.ball.render(this.context),this.context.fillStyle="#fff",this.context.font="20px Arial",this.context.textAlign="center",this.context.textBaseline="top",this.context.fillText(`Ball Position: (${this.objects.ball.position.x.toFixed(2)}, ${this.objects.ball.position.y.toFixed(2)})`,this.wrapper.resolution.x/2,this.wrapper.resolution.y-30)}}class $i extends G{getFileInfo(){return"src/rendering/scenes/SimpleFunctional.ts"}constructor(e,t,n){super(e,t,n),this.objects={xPlot:new w(g.plotFunction("f(x, α, t) = cos(α + t)",i=>Math.cos(i+n.now),{lower:-1,upper:5},{lower:-2,upper:2},.1),new u(950,240),new u(300,200),new u(1,1),new u(.5,.5),0),yPlot:new w(g.plotFunction("f(y, α, t) = sin(α + t)",i=>Math.sin(i+n.now),{lower:-1,upper:5},{lower:-2,upper:2},.1),new u(950,480),new u(300,200),new u(1,1),new u(.5,.5),0),pathCircle:new w(g.ellipse("transparent","#000"),new u(350,360),new u(400,400),new u(1,1),new u(.5,.5),0),circle:new w(g.ellipse("#ff5722","#ff8a50"),new u(350,360),new u(50,50),new u(1,1),new u(.5,.5),0)}}render(){this.objects.circle.position=new u(350+200*Math.cos(this.time.now),360+200*Math.sin(this.time.now)),this.context.lineWidth=2,this.renderInOrder(this.objects.pathCircle,this.objects.xPlot,this.objects.yPlot,this.objects.circle)}}class Oi extends G{getFileInfo(){return"src/rendering/scenes/SimpleInterpolation.ts"}constructor(e,t,n){super(e,t,n),this.dotPositions={ballA:0,ballB:0,ballC:0},this.objects={ballA:new w(g.ellipse("#ff5722","#ff0000"),new u(340,360),new u(50,50),new u(1,1),new u(.5,.5),0),ballB:new w(g.ellipse("#57ff22","#00ff22"),new u(640,360),new u(50,50),new u(1,1),new u(.5,.5),0),ballC:new w(g.ellipse("#2257ff","#2200ff"),new u(940,360),new u(50,50),new u(1,1),new u(.5,.5),0),easingPlotA:new w(g.plotFunction("easeInQuad: t ^ 2",L.easeInQuad,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballA),new u(340,150),new u(200,200),new u(1,1),new u(.5,.5),0),easingPlotB:new w(g.plotFunction("easeOutQuad: t * (2 - t)",L.easeOutQuad,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballB),new u(640,150),new u(200,200),new u(1,1),new u(.5,.5),0),easingPlotC:new w(g.plotFunction("easeInOutElastic: <...>",L.easeInOutElastic,{lower:0,upper:1},{lower:0,upper:1},.01,()=>this.dotPositions.ballC),new u(940,150),new u(200,200),new u(1,1),new u(.5,.5),0)},this.sequencers={ballAInterpolator:new ve(n,i=>{this.objects.ballA.position.y=i},{startValue:360,endValue:600,duration:1,easing:i=>i*i}),ballBInterpolator:new ve(n,i=>{this.objects.ballB.position.y=i},{startValue:360,endValue:600,duration:1,easing:i=>1-Math.pow(1-i,2)}),ballCInterpolator:new ve(n,i=>{this.objects.ballC.position.y=i},{startValue:360,endValue:600,duration:1,easing:L.easeInOutElastic}),timer:new wt(n,.5)}}*sequence(){for(;;)yield*J.runTogether([this.sequencers.ballAInterpolator,this.sequencers.ballBInterpolator,this.sequencers.ballCInterpolator]),yield*J.run(this.sequencers.timer),this.sequencers.ballAInterpolator.reverse(),this.sequencers.ballBInterpolator.reverse(),this.sequencers.ballCInterpolator.reverse()}render(){this.context.strokeStyle="#222",this.context.lineWidth=16,this.context.lineCap="round",this.context.beginPath(),this.context.moveTo(340,360),this.context.lineTo(340,600),this.context.moveTo(640,360),this.context.lineTo(640,600),this.context.moveTo(940,360),this.context.lineTo(940,600),this.context.stroke(),this.context.lineWidth=1,this.dotPositions.ballA=this.sequencers.ballAInterpolator.progress,this.dotPositions.ballB=this.sequencers.ballBInterpolator.progress,this.dotPositions.ballC=this.sequencers.ballCInterpolator.progress,Object.keys(this.objects).forEach(e=>{this.objects[e].render(this.context)})}}class Di extends G{getFileInfo(){return"src/rendering/scenes/SimpleSequence.ts"}constructor(e,t,n){super(e,t,n),this.rectPath=[new u(160,160),new u(560,160),new u(560,560),new u(160,560)],this.polyPath=[new u(720,260),new u(920,160),new u(1120,260),new u(720,460),new u(920,560),new u(1120,460)],this.objects={circleA:new w(g.ellipse("#ff5722","#ff0000"),new u(340,360),new u(50,50),new u(1,1),new u(.5,.5),0),circleB:new w(g.ellipse("#ff5722","#ff0000"),new u(720,360),new u(50,50),new u(1,1),new u(.5,.5),0),path:new w(g.roundedRectangle("#00000000","#000",8),new u(360,360),new u(400,400))},this.sequencers={sequenceAX:new xe(this.time,i=>this.objects.circleA.position.x=i,this.rectPath.map(i=>i.x),{duration:.75,easing:L.linear,loops:!0}),sequenceAY:new xe(this.time,i=>this.objects.circleA.position.y=i,this.rectPath.map(i=>i.y),{duration:.75,easing:L.linear,loops:!0}),sequenceBX:new xe(this.time,i=>this.objects.circleB.position.x=i,this.polyPath.map(i=>i.x),{duration:.5,easing:L.easeInOutCubic,loops:!0}),sequenceBY:new xe(this.time,i=>this.objects.circleB.position.y=i,this.polyPath.map(i=>i.y),{duration:.5,easing:L.easeInOutCubic,loops:!0})}}render(){this.context.beginPath(),this.context.moveTo(this.polyPath[0].x,this.polyPath[0].y);for(let e=1;e<this.polyPath.length;e++)this.context.lineTo(this.polyPath[e].x,this.polyPath[e].y);this.context.closePath(),this.context.strokeStyle="#000",this.context.lineWidth=2,this.context.stroke(),this.renderInOrder(this.objects.path,this.objects.circleA,this.objects.circleB)}*sequence(){for(;;)yield*J.runTogether([this.sequencers.sequenceAX,this.sequencers.sequenceAY,this.sequencers.sequenceBX,this.sequencers.sequenceBY])}}const ue=class ue{constructor(e){this.loaded=!1,this.size=new u(-1,-1);const t=We+e;if(this.image=ue.cache.get(t)||new Image,!ue.cache.has(t))this.image.src=t,ue.cache.set(t,this.image);else{this.loaded=!0;const n=ue.cache.get(t);this.size.set(n.width,n.height)}this.image.onload=()=>{this.loaded=!0,this.size.set(this.image.width,this.image.height)}}isLoaded(){return this.loaded}getImage(){return this.loaded||console.warn(`Image at ${this.image.src} is not loaded yet.`),this.image}};ue.cache=new Map;let rt=ue;const he=class he extends rt{constructor(e,t,n,i=t*n){super(e),this.framesX=t,this.framesY=n,this.frameCount=i}drawFrame(e,t,n,i,r,o){if(!this.isLoaded()){console.warn(`Spritesheet at ${this.image.src} is not loaded yet.`);return}const h=t%this.frameCount,a=this.image.width/this.framesX,l=this.image.height/this.framesY,c=h%this.framesX*a,f=Math.floor(h/this.framesX)*l;e.drawImage(this.image,c+he.BIAS,f+he.BIAS,a-he.BIAS*2,l-he.BIAS*2,n,i,r,o)}};he.BIAS=.5;let Te=he;class Li{constructor(e,t){this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=t,this.context=this.canvas.getContext("2d")}getCanvas(){return this.canvas}getContext(){return this.context}get imageData(){return this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}set imageData(e){this.context.putImageData(e,0,0)}}class Ni extends G{getFileInfo(){return"src/rendering/scenes/ComplexSequence.ts"}constructor(e,t,n){super(e,t,n),this.textures={wood:new rt("/wood.webp")},this.objects={sign:new w(g.image(this.textures.wood),new u(0,200),new u(400,300),new u(1,1),new u(.5,0)),text:new w(g.staticText(["This whole animation is done","with the following objects:","","2 simple sequences.","A looping interpolator."].join(`
`),"20px Arial","#ffffff","center","top",!0),new u(0,100)),ropeLeft:new w(g.roundedRectangle("#000",null,5),new u(0,0),new u(10,300),new u(1,1),new u(.5,.01),Math.PI/5),ropeRight:new w(g.roundedRectangle("#000",null,5),new u(0,0),new u(10,300),new u(1,1),new u(.5,.01),-Math.PI/5),pivot:new w(()=>{},new u(640,-1e3),new u(1,1)),nail:new w(g.roundedRectangle("#888","#000",4),new u(0,8),new u(16,16),new u(1,1),new u(.5,.5),.2)},this.objects.pivot.append(this.objects.ropeLeft,this.objects.ropeRight,this.objects.sign,this.objects.nail),this.objects.sign.append(this.objects.text),this.sequencers={timer:new wt(this.time,.5),signRotation:new xe(this.time,i=>this.objects.sign.rotation=i,[0,-.05,.05,0],{duration:.25,easing:L.easeInOutQuad}),pivotY:new ve(this.time,i=>this.objects.pivot.position.y=i,{startValue:-600,endValue:100,duration:1,easing:L.easeOutElastic}),pivotRotationStart:new xe(this.time,i=>{this.objects.pivot.rotation=i,this.objects.nail.rotation=-i+.2},[Math.PI/5,-Math.PI/5,Math.PI/10],{duration:.6666,easing:L.easeInOutQuad}),pivotRotationLoop:new ve(this.time,i=>{this.objects.pivot.rotation=i,this.objects.nail.rotation=-i+.2},{startValue:Math.PI/10,endValue:-Math.PI/10,duration:.6666,easing:L.easeInOutQuad})}}*sequence(){for(yield*J.run(this.sequencers.timer),yield*J.runTogether([this.sequencers.signRotation,this.sequencers.pivotY,this.sequencers.pivotRotationStart]);;)if(yield*J.run(this.sequencers.pivotRotationLoop),this.sequencers.pivotRotationLoop.reverse(),this.sequencers.pivotRotationLoop.options.endValue*=.5,Math.abs(this.sequencers.pivotRotationLoop.options.endValue)<.001){this.objects.pivot.rotation=0;break}}render(){this.objects.pivot.render(this.context)}}class Ke{constructor(e,t,n){this.background=new w(g.roundedRectangle("rgba(0, 0, 0, 0.5)","black",8),e,t.clone(),new u(1,1),new u(0,0)),this.foreground=new w(g.roundedRectangle("rgba(0, 255, 0, 0.5)","green",8),new u(0,0),t.clone(),new u(1,1),new u(0,0)),this.text=new w(g.dynamicText(n,"24px Consolas, monospace","white","left","middle"),new u(0,-12)),this.background.append(this.foreground,this.text)}render(e){this.background.render(e)}setProgress(e){this.foreground.size.x=this.background.size.x*e}}class Ri extends G{getFileInfo(){return"src/rendering/scenes/SimpleFrameAnimation.ts"}constructor(e,t,n){super(e,t,n),this.textures={cat:new Te("/cat-spritesheet.webp",12,14,158)},this.objects={cat:new w(g.sprite(this.textures.cat,()=>Math.floor(n.now*24)),new u(1280/2,720/2),new u(256,256)),progressBar:new Ke(new u(256/2,592),new u(1024,32),()=>`Frame: ${Math.floor(n.now*24)%158} / 158`)}}render(){this.objects.progressBar.setProgress(Math.round(this.time.now*24)/158%1),this.renderInOrder(this.objects.cat,this.objects.progressBar)}}class Vi extends G{getFileInfo(){return"src/rendering/scenes/CatPendulum.ts"}constructor(e,t,n){super(e,t,n),this.textures={cat1:new Te("/cat-spritesheet.webp",12,14,158),cat2:new Te("/cat-alt-spritesheet.webp",9,8,71),cat3:new Te("/cat-alt-02-spritesheet.webp",9,8,68)},this.objects={cat1:new w(g.sprite(this.textures.cat1,()=>Math.floor(n.now*24)),new u(0,200),new u(200,200),new u(1,1),new u(.5,0),0),cat2:new w(g.sprite(this.textures.cat2,()=>Math.floor(n.now*24)),new u(0,150),new u(200,200),new u(1,1),new u(.5,0),0),cat3:new w(g.sprite(this.textures.cat3,()=>Math.floor(n.now*24)),new u(640,100),new u(200,150),new u(1,1),new u(.5,0),0),texts:{cat1:new w(g.staticText("Cat 1: 158 frames","24px Consolas, monospace","white","center","middle")),cat2:new w(g.staticText("Cat 2: 71 frames","24px Consolas, monospace","white","center","middle")),cat3:new w(g.staticText("Cat 3: 68 frames","24px Consolas, monospace","white","center","middle"))},progressBars:{cat1:new Ke(new u(50,518),new u(128,24),()=>`Cat 1: ${Math.floor(n.now*24)%158+1} / 158`),cat2:new Ke(new u(50,582),new u(128,24),()=>`Cat 2: ${Math.floor(n.now*24)%71+1} / 71`),cat3:new Ke(new u(50,646),new u(128,24),()=>`Cat 3: ${Math.floor(n.now*24)%68+1} / 68`)}},this.objects.cat3.append(this.objects.texts.cat3,this.objects.cat2),this.objects.cat2.append(this.objects.texts.cat2,this.objects.cat1),this.objects.cat1.append(this.objects.texts.cat1)}render(){this.objects.cat1.rotation=Math.sin(this.time.now*2)*.75,this.objects.cat2.rotation=Math.sin(this.time.now*3)*.5,this.objects.cat3.rotation=Math.sin(this.time.now*4)*.5,this.objects.progressBars.cat1.setProgress(Math.round(this.time.now*24)/158%1),this.objects.progressBars.cat2.setProgress(Math.round(this.time.now*24)/71%1),this.objects.progressBars.cat3.setProgress(Math.round(this.time.now*24)/68%1),this.renderInOrder(this.objects.cat3,this.objects.progressBars.cat1,this.objects.progressBars.cat2,this.objects.progressBars.cat3)}}class Hi extends G{getFileInfo(){return"src/rendering/scenes/GameOfLife.ts"}constructor(e,t,n){super(e,t,n);const i=e.resolution,r=8;this.cols=Math.floor(i.x/r),this.rows=Math.floor(i.y/r),this.grid=new Li(this.cols,this.rows),this.imageData=this.grid.imageData,this.timer=new wt(n,1/30);const o=this.imageData;for(let h=0;h<this.rows;h++)for(let a=0;a<this.cols;a++)o.data[(h*this.cols+a)*4]=0,o.data[(h*this.cols+a)*4+1]=0,o.data[(h*this.cols+a)*4+2]=0,o.data[(h*this.cols+a)*4+3]=Math.random()<.5?255:0;this.grid.imageData=o}*sequence(){for(;;)this.updateGrid(),yield*J.run(this.timer)}render(){const e=this.context;e.fillStyle="#ff5722",e.fillRect(0,0,this.wrapper.resolution.x,this.wrapper.resolution.y),e.imageSmoothingEnabled=!1,e.drawImage(this.grid.getCanvas(),0,0,this.wrapper.resolution.x,this.wrapper.resolution.y)}updateGrid(){const e=Array.from(this.grid.imageData.data.filter((t,n)=>n%4===3)).map(t=>t>0);for(let t=0;t<e.length;t++){const n=Math.floor(t/this.cols),i=t%this.cols,r=this.countAliveNeighbors(e,n,i);e[t]?r<2||r>3?this.imageData.data[t*4+3]=0:this.imageData.data[t*4+3]=255:r===3?this.imageData.data[t*4+3]=255:this.imageData.data[t*4+3]=0}this.grid.imageData=this.imageData}countAliveNeighbors(e,t,n){const i=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];let r=0;for(const[o,h]of i){const a=t+o,l=n+h;if(a>=0&&a<this.rows&&l>=0&&l<this.cols){const c=a*this.cols+l;e[c]&&r++}}return r}}function bt(s,e,t){return Math.max(e,Math.min(t,s))}function me(s,e,t){return s+(e-s)*t}function Wi(s,e,t){const n=(i,r=(i+s/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}const Tt={r:200,g:128,b:255},Mt={r:200,g:255,b:128},ye=500,us=Math.PI*4,hs=300,ce=100,Yi=40,Xi=60,U=200;function Gi(s,e){return(t,n)=>{const i=t.position.x/s.x,r=t.position.y/s.y,o={r:me(Tt.r,Mt.r,i),g:me(Tt.g,Mt.g,r),b:me(Tt.b,Mt.b,i+r)},h=Wi(t.rotation/Math.PI*360,1,1),a={r:me(o.r,h[0]*256,.25),g:me(o.g,h[1]*256,.25),b:me(o.b,h[2]*256,.25)};if(n.fillStyle=`rgb(${a.r}, ${a.g}, ${a.b})`,n.beginPath(),n.moveTo(10,0),n.lineTo(-10,7),n.lineTo(-5,0),n.lineTo(-10,-7),n.fill(),w.debugMode){n.save(),n.rotate(-t.rotation);const l=e.getObjectsInRange(t.position.x,t.position.y,ce);n.strokeStyle="#ff0000";for(const c of l){if(c===t)continue;const f=c.position.subtract(t.position);f.length()>ce||(n.beginPath(),n.moveTo(0,0),n.lineTo(f.x,f.y),n.stroke())}n.restore(),n.strokeStyle="#00ff00",n.lineWidth=2,n.beginPath(),n.moveTo(0,0),n.lineTo(50,0),n.arc(0,0,ce,0,Math.PI*2),n.stroke()}}}class Ui{constructor(e,t){this.grid=[],this.resolution=t,this.cellCount=e,this.cellSize=new u(t.x/e,t.y/e);for(let n=0;n<e;n++){this.grid[n]=[];for(let i=0;i<e;i++)this.grid[n][i]=[]}}add(e){const t=Math.floor(e.position.x/(this.resolution.x/this.cellCount)),n=Math.floor(e.position.y/(this.resolution.y/this.cellCount));t>=0&&t<this.cellCount&&n>=0&&n<this.cellCount&&this.grid[n][t].push(e)}getObjectsInCell(e,t){return e<0||e>=this.cellCount||t<0||t>=this.cellCount?[]:this.grid[t][e]||[]}getObjectsInRange(e,t,n){const i=[],r=Math.max(0,Math.floor((e-n)/this.cellSize.x)),o=Math.min(this.cellCount-1,Math.ceil((e+n)/this.cellSize.x)),h=Math.max(0,Math.floor((t-n)/this.cellSize.y)),a=Math.min(this.cellCount-1,Math.ceil((t+n)/this.cellSize.y));for(let l=h;l<=a;l++)for(let c=r;c<=o;c++)i.push(...this.grid[l][c]);return i}clear(){for(let e=0;e<this.cellCount;e++)for(let t=0;t<this.cellCount;t++)this.grid[e][t]=[]}debugRender(e){const t=this.resolution.x/this.cellCount,n=this.resolution.y/this.cellCount;e.strokeStyle="#000000",e.lineWidth=1,e.beginPath();for(let i=1;i<this.cellCount;i++)e.moveTo(i*t,0),e.lineTo(i*t,this.resolution.y),e.moveTo(0,i*n),e.lineTo(this.resolution.x,i*n);e.stroke()}}class Ki extends G{getFileInfo(){return"src/rendering/scenes/Boids.ts"}constructor(e,t,n){super(e,t,n),this.newRotations=new Float32Array(ye),this.debugAgent=null,this.grid=new Ui(Math.ceil(Math.sqrt(ye)),e.resolution);const i=Math.ceil(Math.sqrt(ye*e.resolution.x/e.resolution.y)),r=Math.ceil(ye/i),o=e.resolution.x/i;console.log(`Boids grid: ${i} x ${r} (${ye} agents)`);const h=Gi(e.resolution,this.grid);this.agents=Array.from({length:ye},(a,l)=>{const c=new w(h,new u(l%i*(e.resolution.x/i)+o/2,Math.floor(l/i)*(e.resolution.y/r)+o/2),new u(20,20),u.one(),new u(.5,.5),Math.random()*Math.PI*2);return this.grid.add(c),c}),this.debugAgent=this.agents[Math.floor(Math.random()*this.agents.length)]}turnAwayFromBounds(e){const t=this.wrapper.resolution,n=e.position;let i=new u(0,0),r=0;return n.x<U?(i.x=1,r+=U-n.x):n.x>t.x-U&&(i.x=-1,r+=n.x-(t.x-U)),n.y<U?(i.y=1,r+=U-n.y):n.y>t.y-U&&(i.y=-1,r+=n.y-(t.y-U)),i=i.normalize(),{steeringVector:new u(i.x,i.y),strength:Math.pow(r/U,2)}}separate(e,t){const n=new u(0,0);let i=1/0,r=0;for(const a of t){if(a===e)continue;const l=e.position.subtract(a.position),c=l.length();c<ce&&c>0&&(c<i&&(i=c),n.addInPlace(l.normalize().multiply(1/c)),r++)}let o=0,h=0;return r>0&&(o=Math.atan2(n.y,n.x),h=Math.max(0,ce-i)/ce),{steeringVector:new u(Math.cos(o),Math.sin(o)),strength:Math.pow(h,4)}}align(e,t){const n=new u(0,0);let i=0;for(const h of t){if(h===e)continue;const l=h.position.subtract(e.position).length();l<Yi&&l>0&&(n.addInPlace(new u(Math.cos(h.rotation),Math.sin(h.rotation))),i++)}let r=e.rotation,o=0;return i>0&&(n.multiplyInPlace(1/i),r=Math.atan2(n.y,n.x),o=1),{steeringVector:new u(Math.cos(r),Math.sin(r)),strength:Math.pow(o,2)}}cohere(e,t){const n=new u(0,0);let i=0;for(const h of t){if(h===e)continue;const l=h.position.subtract(e.position).length();l<Xi&&l>0&&(n.addInPlace(h.position),i++)}let r=e.rotation,o=0;return i>0&&(n.multiplyInPlace(1/i),n.subtractInPlace(e.position),r=Math.atan2(n.y,n.x),o=(1-1/i)*.5),{steeringVector:new u(Math.cos(r),Math.sin(r)),strength:Math.pow(o,2)}}moveAgents(e){for(const t of this.agents){const n=new u(Math.cos(t.rotation)*hs*e.delta,Math.sin(t.rotation)*hs*e.delta);t.position.addInPlace(n),t.position.x=bt(t.position.x,0,this.wrapper.resolution.x),t.position.y=bt(t.position.y,0,this.wrapper.resolution.y)}}render(){w.debugMode&&this.grid.debugRender(this.context);for(let e=0;e<this.agents.length;e++){const t=this.agents[e],n=this.grid.getObjectsInRange(t.position.x,t.position.y,ce),i=this.turnAwayFromBounds(t),r=this.separate(t,n),o=this.align(t,n),h=this.cohere(t,n);let a=i.steeringVector.multiply(i.strength).add(r.steeringVector.multiply(r.strength)).add(o.steeringVector.multiply(o.strength)).add(h.steeringVector.multiply(h.strength));a.length()===0?a=new u(Math.cos(t.rotation),Math.sin(t.rotation)):a=a.normalize();let c=Math.atan2(a.y,a.x)-t.rotation;c=Math.atan2(Math.sin(c),Math.cos(c));const f=bt(c,-us*this.time.delta,us*this.time.delta);this.newRotations[e]=(t.rotation+f+Math.PI*2)%(Math.PI*2)}for(let e=0;e<this.agents.length;e++){const t=this.agents[e];t.rotation=this.newRotations[e]}this.moveAgents(this.time),this.grid.clear();for(const e of this.agents)this.grid.add(e);for(const e of this.agents){const t=w.debugMode;t&&this.debugAgent!==e&&w.setDebugMode(!1),e.render(this.context),w.setDebugMode(t)}}}console.log("Running in production mode.");const We="/emergent-animations",Xt=[],Ys=[{title:"Basics",href:"/examples/basics",examples:[{name:"Coordinate Systems",scene:Bi.provide()}]},{title:"Functional Animations",href:"/examples/functional-animations",examples:[{name:"Simple functional",scene:$i.provide()},{name:"Simple interpolation",scene:Oi.provide()},{name:"Simple sequence",scene:Di.provide()},{name:"Complex sequence",scene:Ni.provide()}]},{title:"Frame Animations",href:"/examples/frame-animations",examples:[{name:"Simple animation",scene:Ri.provide()},{name:"Complex animation",scene:Vi.provide()}]},{title:"Rule Based Animations",href:"/examples/rule-based-animations",examples:[{name:"Game of Life",scene:Hi.provide()},{name:"Boids",scene:Ki.provide()}]}],Qi=[{href:"/",component:vi,title:"Home"},{href:"/404",component:gi,title:"404"},{href:"/thesis",component:mi,title:"Thesis"},{href:"/about",component:xi,title:"About"},{href:"/examples",component:Ti,title:"Examples"},...Ys.map(s=>({href:s.href,title:s.title,component:qi,props:{title:s.title,pages:s.examples||[]}}))],Se=Qi.reduce((s,e)=>(s[e.href]=e,s),{});let De=Se[globalThis.location.pathname.replace(We,"")]??Se["/404"];function Zi(s){globalThis.history.pushState({},"",We+s),De=Se[s]??Se["/404"],Xt.forEach(e=>e(De))}function Ji(){return De}function ji(s){Xt.push(s)}globalThis.addEventListener("popstate",()=>{const s=globalThis.location.pathname.replace(We,"");De=Se[s]??Se["/404"],Xt.forEach(e=>e(De))});function er(s,e,t){e()===""&&(s.preventDefault(),s.stopPropagation(),Zi(t.href))}var tr=O("<a><!> <!></a>");function ne(s,e){le(e,!0);let t=fe(e,"style",3,""),n=fe(e,"cssClass",3,""),i=fe(e,"target",3,""),r=fe(e,"rel",3,"");var o=tr();o.__click=[er,i,e];var h=B(o);vt(h,()=>e.children??lt);var a=q(h,2);{var l=c=>{var f=Q();re(()=>Oe(f,e.href)),x(c,f)};Rt(a,c=>{e.children||c(l)})}re(()=>{Fe(o,"href",e.href),Hs(o,t()),Fe(o,"target",i()),Fe(o,"rel",r()),Wt(o,1,`link ${n()??""}`,"svelte-1iwy9kf")}),x(s,o),ae()}Lt(["click"]);var sr=O('<header class="svelte-1xgxzs1"><!> <nav class="svelte-1xgxzs1"><!> <!> <!> <!></nav></header>');function nr(s){var e=sr(),t=B(e);ne(t,{href:"/",cssClass:"navbar-title",children:(a,l)=>{var c=Q("Emergent Animations");x(a,c)},$$slots:{default:!0}});var n=q(t,2),i=B(n);ne(i,{cssClass:"navbar-link",href:"/",children:(a,l)=>{var c=Q("Home");x(a,c)},$$slots:{default:!0}});var r=q(i,2);ne(r,{cssClass:"navbar-link",href:"/thesis",children:(a,l)=>{var c=Q("Thesis");x(a,c)},$$slots:{default:!0}});var o=q(r,2);ne(o,{cssClass:"navbar-link",href:"/examples",children:(a,l)=>{var c=Q("Examples");x(a,c)},$$slots:{default:!0}});var h=q(o,2);ne(h,{cssClass:"navbar-link",href:"/about",children:(a,l)=>{var c=Q("About");x(a,c)},$$slots:{default:!0}}),x(s,e)}function ir(s,e){le(e,!0);let t=V(K(Ji())),n=yt(()=>{var l;return(l=M(t))==null?void 0:l.component}),i=yt(()=>{var l;return((l=M(t))==null?void 0:l.title)||"*"}),r=yt(()=>{var l;return((l=M(t))==null?void 0:l.props)||{}}),o=null;ji(l=>{M(t).href!=l.href&&(o&&clearTimeout(o),document.getElementById("current-page").classList.add("fade-out"),o=setTimeout(()=>{F(t,l,!0),document.getElementById("current-page").classList.remove("fade-out")},150))});var h=Nt();Xn(l=>{re(()=>Ss.title=`Emergent Animations - ${M(i)??""}`)});var a=ct(h);ti(a,()=>M(n),(l,c)=>{c(l,ui(()=>M(r)))}),x(s,h),ae()}var rr=O('<!> <main class="svelte-7hgqb0"><!></main> <footer class="svelte-7hgqb0"><span>Created by <!> using <!> ❤️</span></footer>',1);function or(s){var e=rr(),t=ct(e);nr(t);var n=q(t,2),i=B(n);ir(i,{});var r=q(n,2),o=B(r),h=q(B(o));ne(h,{href:"https://github.com/KissKonradUni/emergent-animations",target:"_blank",rel:"noopener noreferrer",children:(l,c)=>{var f=Q("Konrád Soma Kiss");x(l,f)},$$slots:{default:!0}});var a=q(h,2);ne(a,{href:"https://svelte.dev",target:"_blank",rel:"noopener noreferrer",children:(l,c)=>{var f=Q("Svelte");x(l,f)},$$slots:{default:!0}}),x(s,e)}Un(or,{target:document.body});
